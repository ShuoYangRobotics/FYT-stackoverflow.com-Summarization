[{"text": ["Challenging dynamic programming problem"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["This is a toned down version of a computer vision problem I need to solve.", "Suppose you are given parameters n,q and have to count the number of ways of assigning integers 0..(q-1) to elements of n-by-n grid so that for each assignment the following are all true"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Since (i,j,k,l) are not given, the output should be an array of evaluations above, one for every valid setting of (i,j,k,l)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["A brute force approach is below.", "The goal is to get an efficient algorithm that works for q&lt;=100 and for n&lt;=18."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n def tuples(n,q):\n  return [[a,]+b for a in range(q) for b in tuples(n-1,q)] if n&gt;1 else [[a] for a in range(q)]\n\ndef isvalid(t,n):\n  grid=[t[n*i:n*(i+1)] for i in range(n)];\n  for r in range(n):\n    for c in range(n):\n      v=grid[r][c]\n      left=grid[r][c-1] if c&gt;0 else -1\n      right=grid[r][c-1] if c&lt;n-1 else -1\n      top=grid[r-1][c] if r &gt; 0 else -1\n      bottom=grid[r+1][c] if r &lt; n-1 else -1\n      if v==left or v==right or v==top or v==bottom:\n        return False\n  return True\n\ndef count(n,q):\n  result=[]\n  for pos1 in range(n**2):\n    for pos2 in range(n**2):\n      total=0\n      for t in tuples(n**2,q):\n        if t[pos1]==0 and t[pos2]==0 and isvalid(t,n):\n          total+=1\n\n      result.append(total)\n\n  return result\n\nassert count(2,2)==[1, 0, 0, 1, 0, 1, 1, 0, 0, 1, 1, 0, 1, 0, 0, 1]\n</code>\n</pre>\n", "senID": 4}, {"text": ["Update 11/11\nI've also asked this on TopCoder forums, and their solution is the most efficient one I've seen so far (about 3 hours for n=10, any q, from author's estimate)"], "childNum": 2, "tag": "p", "senID": 5, "childList": [{"text": "Update 11/11", "childNum": 0, "tag": "b", "pos": 0, "childList": []}, {"href": "http://forums.topcoder.com/?module=Thread&threadID=692834&start=0&mc=1#1308153", "text": "forums", "childNum": 0, "tag": "a", "childList": []}]}]