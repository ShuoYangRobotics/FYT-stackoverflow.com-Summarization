[[{"text": ["For the most part, this is an attempt to look at the packaging/distribution side, not the mechanics of import.", "Unfortunately, packaging is the place where Python provides way more than one way to do it.", "I'm just trying to get the ball rolling, hopefully others will help fill what I miss or point out mistakes.  "], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "import", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["First of all there's some messy terminology here.", "A directory containing an __init__.py file is a package.", "However, most of what we're talking about here are specific versions of packages published on PyPI, one of it's mirrors, or in a vendor specific package management system like Debian's Apt, Redhat's Yum, Fink, Macports, Homebrew, or ActiveState's pypm."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "__init__.py", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["These published packages are what folks are trying to call \"Distributions\" going forward in an attempt to use \"Package\" only as the Python language construct.", "You can see some of that usage in PEP-376 PEP-376.  "], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "PEP-376", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://www.python.org/dev/peps/pep-0376/#how-distributions-are-installed"}, {"href": "http://www.python.org/dev/peps/pep-0376/#how-distributions-are-installed", "text": "PEP-376", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["Now, your list of keywords relate to several different aspects of the Python Ecosystem:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Finding and publishing python distributions:"], "childNum": 0, "tag": "h2", "senID": 4, "childList": []}, {"tag": "ul", "num": 4, "lis": [{"text": "PyPI (aka the cheese shop)", "tag": "none", "senID": 5}, {"text": "PyPI Mirrors", "tag": "none", "senID": 6}, {"text": "Various package management tools / systems: apt, yum, fink, macports, homebrew", "tag": "none", "senID": 7}, {"text": "pypm (ActiveState's alternative to PyPI)", "tag": "none", "senID": 8}]}, {"text": ["The above are all services that provide a place to publish Python distributions in various formats.", "Some, like PyPI mirrors and apt / yum repositories can be run on your local machine or within your companies network but folks typically use the official ones.", "Most, if not all provide a tool (or multiple tools in the case of PyPI) to help find and download distributions."], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"text": ["Libraries used to create and install distributions:"], "childNum": 0, "tag": "h2", "senID": 10, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": ["setuptools"], "childNum": 0, "tag": "code", "senID": 11, "childList": []}, {"text": ["distutils"], "childNum": 0, "tag": "code", "senID": 12, "childList": []}]}, {"text": ["Distutils is the standard infrastructure on which Python packages are compiled and built into distributions.", "There's a ton of functionality in distutils but most folks just know:"], "childNum": 1, "tag": "p", "senID": 13, "childList": [{"text": "distutils", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n from distutils.core import setup\n\nsetup(name='Distutils',\n      version='1.0',\n      description='Python Distribution Utilities',\n      author='Greg Ward',\n      author_email='gward@python.net',\n      url='http://www.python.org/sigs/distutils-sig/',\n      packages=['distutils', 'distutils.command'],\n )\n</code>\n</pre>\n", "senID": 14}, {"text": ["And to some extent that's a most of what you need.", "With the prior 9 lines of code you have enough information to install a pure Python package and also the minimal metadata required to publish that package a distribution on PyPI."], "childNum": 0, "tag": "p", "senID": 15, "childList": []}, {"text": ["Setuptools provides the hooks necessary to support the Egg format and all of it's features and foibles.", "Distribute is an alternative to Setuptools that adds some features while trying to be mostly backwards compatible.", "I believe Distribute is going to be included in Python 3 as the successor to Distutil's from distutils.core import setup."], "childNum": 1, "tag": "p", "senID": 16, "childList": [{"text": "from distutils.core import setup", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}, {"text": ["Both Setuptools and Distribute provide a custom version of the distutils setup command\nthat does useful things like support the Egg format."], "childNum": 1, "tag": "p", "senID": 17, "childList": [{"text": "distutils", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Python Distribution Formats:"], "childNum": 0, "tag": "h2", "senID": 18, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": "source", "tag": "none", "senID": 19}, {"text": ["eggs"], "childNum": 0, "tag": "a", "senID": 20, "childList": []}]}, {"text": ["Distributions are typically provided either as source archives (tarball or zipfile).", "The standard way to install a source distribution is by downloading and uncompressing the archive and then running the setup.py file inside."], "childNum": 1, "tag": "p", "senID": 21, "childList": [{"text": "setup.py", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["For example, the following will download, build, and install the Pygments syntax highlighting library:"], "childNum": 0, "tag": "p", "senID": 22, "childList": []}, {"code": "<pre>\n<code>\n curl -O -G http://pypi.python.org/packages/source/P/Pygments/Pygments-1.4.tar.gz\ntar -zxvf Pygments-1.4.tar.gz\ncd Pygments-1.4\npython setup.py build\nsudo python setup.py install\n</code>\n</pre>\n", "senID": 23}, {"text": ["Alternatively you can download the Egg file and install it.", "Typically this is accomplished by using easy_install or pip:"], "childNum": 0, "tag": "p", "senID": 24, "childList": []}, {"code": "<pre>\n<code>\n sudo easy_install pygments\nor \nsudo pip install pygments\n</code>\n</pre>\n", "senID": 25}, {"text": ["Eggs were inspired by Java's Jarfiles and they have quite a few features you should read about here"], "childNum": 2, "tag": "p", "senID": 26, "childList": [{"text": "Eggs", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://peak.telecommunity.com/DevCenter/PythonEggs"}, {"href": "http://peak.telecommunity.com/DevCenter/PythonEggs", "text": "here", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["Python Package Formats:"], "childNum": 0, "tag": "h2", "senID": 27, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": "uncompressed directories", "tag": "none", "senID": 28}, {"text": "zipimport (zip compressed directories)", "tag": "none", "senID": 29}]}, {"text": ["A normal python package is just a directory containing an __init__.py file and an arbitrary number of additional modules or sub-packages.", "Python also has support for finding and loading source code within *.zip files as long as they are included on the PYTHONPATH (sys.path)."], "childNum": 3, "tag": "p", "senID": 30, "childList": [{"text": "__init__.py", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "PYTHONPATH", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "sys.path", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Installing Python Packages:"], "childNum": 0, "tag": "h2", "senID": 31, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": ["easy_install"], "childNum": 0, "tag": "code", "senID": 32, "childList": []}, {"text": ["pip"], "childNum": 0, "tag": "code", "senID": 33, "childList": []}, {"text": ["pypm"], "childNum": 0, "tag": "code", "senID": 34, "childList": []}]}, {"text": ["Environment Management / Automated Deployment:"], "childNum": 0, "tag": "h2", "senID": 35, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": ["bento"], "childNum": 0, "tag": "code", "senID": 36, "childList": []}, {"text": ["buildout"], "childNum": 0, "tag": "code", "senID": 37, "childList": []}, {"text": ["virtualenv"], "childNum": 0, "tag": "code", "senID": 38, "childList": []}]}, {"text": ["The above tools are used to help automate and manage dependencies for a Python project.", "Basically they give you tools to describe what distributions your application requires and automate the installation of those specific versions of your dependencies."], "childNum": 0, "tag": "p", "senID": 39, "childList": []}, {"text": ["Locations of Packages / Distributions:"], "childNum": 0, "tag": "h2", "senID": 40, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "site-packages", "tag": "none", "senID": 41}, {"text": ["PYTHONPATH"], "childNum": 0, "tag": "code", "senID": 42, "childList": []}, {"text": "the current working directory (depends on your OS and environment settings)", "tag": "none", "senID": 43}]}, {"text": ["By default, installing a python distribution is going to drop it into the site-packages directory.", "That directory is usually something like /usr/lib/pythonX.Y/site-packages."], "childNum": 1, "tag": "p", "senID": 44, "childList": [{"text": "/usr/lib/pythonX.Y/site-packages", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["A simple programmatic way to find your site-packages directory:"], "childNum": 0, "tag": "p", "senID": 45, "childList": []}, {"code": "<pre>\n<code>\n from distuils import sysconfig\nprint sysconfig.get_python_lib()\n</code>\n</pre>\n", "senID": 46}, {"text": ["Ways to modify your PYTHONPATH:"], "childNum": 0, "tag": "h2", "senID": 47, "childList": []}, {"text": ["Python's import statement will only find packages that are located in one of the directories included in your PYTHONPATH."], "childNum": 1, "tag": "p", "senID": 48, "childList": [{"text": "PYTHONPATH", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["You can inspect and change your path from within Python by accessing:"], "childNum": 0, "tag": "p", "senID": 49, "childList": []}, {"code": "<pre>\n<code>\n import sys\nprint sys.path\nsys.path.append(\"/home/myname/lib\")\n</code>\n</pre>\n", "senID": 50}, {"text": ["Besides that, you can set the PYTHONPATH environment variable like you would any other environment variable on your OS or you could use:"], "childNum": 1, "tag": "p", "senID": 51, "childList": [{"text": "PYTHONPATH", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"tag": "ul", "num": 3, "lis": [{"text": ".pth files: *.pth files located in directories that are already on your ", "tag": "none", "senID": 52}, {"text": "egg-link files: ", "tag": "none", "senID": 53}, {"text": ["site.py"], "childNum": 0, "tag": "code", "senID": 54, "childList": []}]}, {"text": ["To add the above /home/myname/lib to site-packages with a *.pth file you'd create a *.pth file.", "The name of the file doesn't matter but you should still probably choose something sensible."], "childNum": 1, "tag": "p", "senID": 55, "childList": [{"text": "/home/myname/lib", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Let's create myname.pth:"], "childNum": 1, "tag": "p", "senID": 56, "childList": [{"text": "myname.pth", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n # myname.pth\n/home/myname/lib\n</code>\n</pre>\n", "senID": 57}, {"text": ["That's it.", "Drop that into sysconfig.get_python_lib() on your system or any other directory in your PYTHONPATH and /home/myname/lib will be added to the path."], "childNum": 3, "tag": "p", "senID": 58, "childList": [{"text": "sysconfig.get_python_lib()", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "PYTHONPATH", "childNum": 0, "tag": "code", "childList": []}, {"text": "/home/myname/lib", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["For packaging question, this should help http://guide.python-distribute.org/"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://guide.python-distribute.org/", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://guide.python-distribute.org/"}]}, {"text": ["For import, the old article from Fredrik Lundh http://effbot.org/zone/import-confusion.htm still a very good starting point."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://effbot.org/zone/import-confusion.htm", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://effbot.org/zone/import-confusion.htm"}]}], [{"text": ["I recommend Tarek Ziadek's Book on Python.", "There's a chapter dedicated to packaging and distribution."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Tarek Ziadek's Book on Python.", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "https://www.packtpub.com/expert-python-programming/book"}]}], [{"text": ["I don't think import needs to be explored (Python's namespacing and importing functionality is intuitive IMHO)."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "import", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["I use pip exclusively now.", "I haven't run into any issues with it."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "pip", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["However, the topic of packaging and distribution is something worth exploring.", "Instead of giving a lengthy answer, I will say this:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["I learned how to package and distribute my own \"packages\" by simply copying how Pylons or many other open-source packages do it.", "I then combined that sort-of template with reading up of the docs to flesh it out even further and have come up with a solid distribution method."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["When you grok package management and distribution for python (distutils and pypi) it's actually quite powerful.", "I like it a lot."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["[edit]"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["I also wanted to add in a bit about virtualenv.", "USE IT.", "I create a virtualenv for every project and I always use --no-site-packages; I install all the packages I need for that particular project (even if it's something common amongst them all, like lxml) inside the virtualev.", "It keeps everything isolated and it's much easier for me to maintain the grouping in my head (rather than trying to keep track of what's where and for which version of python!"], "childNum": 2, "tag": "p", "senID": 6, "childList": [{"text": "--no-site-packages", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "lxml", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"text": ["[/edit]"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}]]