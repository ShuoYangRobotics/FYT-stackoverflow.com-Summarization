[[{"text": ["I see two answers with good qualities, each with a small flaw, so I'll give my take on it:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Try os.path.exists, and consider os.makedirs for the creation."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "os.path.exists", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "os.makedirs", "childNum": 0, "tag": "code", "childList": []}]}, {"code": "<pre>\n<code>\n if not os.path.exists(dir):\n    os.makedirs(dir)\n</code>\n</pre>\n", "senID": 2}, {"text": ["As noted in comments and elsewhere, there's a race condition - if the directory is created between the os.path.exists and the os.makedirs calls, the os.makedirs will fail with an OSError.", "Unfortunately, blanket-catching OSError and continuing is not foolproof, as it will ignore a failure to create the directory due to other factors, such as insufficient permissions, full disk, etc."], "childNum": 5, "tag": "p", "senID": 3, "childList": [{"text": "os.path.exists", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "os.makedirs", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "os.makedirs", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "OSError", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "OSError", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["One option would be to trap the OSError and examine the embedded error code, if one knew what's what (on my OS, 13 seems to indicate that permission is denied, and 17 that the file exists - it's not clear that that's even remotely portable, but is explored in Is there a cross-platform way of getting information from Python\u2019s OSError).", "Alterntively, there could be a second os.path.exists, but suppose another created the directory after the first check, then removed it before the second one - we could still be fooled. "], "childNum": 3, "tag": "p", "senID": 4, "childList": [{"text": "OSError", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "Is there a cross-platform way of getting information from Python\u2019s OSError", "tag": "a", "pos": -1, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/273698/is-there-a-cross-platform-way-of-getting-information-from-pythons-oserror"}, {"text": "os.path.exists", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Depending on the application, the danger of concurrent operations may be more or less than the danger posed by other factors such as file permissions.", "The developer would have to know more about the particular application being developed and its expected environment before choosing an implementation."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["Using try except and the right error code from errno module gets rid of the race condition and is cross-platform:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import os, errno\ntry:\n    os.makedirs('a/b/c')\nexcept OSError, e:\n    if e.errno != errno.EEXIST:\n        raise\n</code>\n</pre>\n", "senID": 1}, {"text": ["In other words, we try to create the directories, but if they already exist we ignore the error.", "On the other hand, any other error gets reported.", "For example, if you create dir 'a' beforehand and remove all permissions from it, you will get an OSError raised with errno.EACCES (Permission denied, error 13)."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Check out os.makedirs:  (It makes sure the complete path exists.", ")  To handle the fact the directory might exist, catch OSError."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "os.makedirs", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.python.org/doc/2.5.2/lib/os-file-dir.html"}]}, {"code": "<pre>\n<code>\n import os\ntry:\n    os.makedirs('./path/to/somewhere')\nexcept OSError:\n    pass\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Granted.. this question has long since been answered, but I'll throw in my two cents."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I would personally recommend that you use os.path.isdir() to test instead of os.path.exists()."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "os.path.isdir()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "os.path.exists()", "childNum": 0, "tag": "code", "childList": []}]}, {"code": "<pre>\n<code>\n &gt;&gt;&gt; os.path.exists('/tmp/dirname')\nTrue\n&gt;&gt;&gt; os.path.exists('/tmp/dirname/filename.etc')\nTrue\n&gt;&gt;&gt; os.path.isdir('/tmp/dirname/filename.etc')\nFalse\n&gt;&gt;&gt; os.path.isdir('/tmp/fakedirname')\nFalse\n</code>\n</pre>\n", "senID": 2}, {"text": ["If you have:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n &gt;&gt;&gt; dir = raw_input(\":: \")\n</code>\n</pre>\n", "senID": 4}, {"text": ["And a foolish user inputs:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n :: /tmp/dirname/filename.etc\n</code>\n</pre>\n", "senID": 6}, {"text": ["... You're going to end up with a directory named filename.etc when you pass that arg to os.makedirs() if you test with os.path.exists()."], "childNum": 3, "tag": "p", "senID": 7, "childList": [{"text": "filename.etc", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "os.makedirs()", "childNum": 0, "tag": "code", "childList": []}, {"text": "os.path.exists()", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["Ok, sorry, I made too many comments, I guess I should put it down.", "It's not totally foolproof though."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import os\n\ndirname = 'create/me'\n\ntry:\n    os.makedirs(dirname)\nexcept OSError:\n    if os.path.exists(dirname):\n        # We are nearly safe\n        pass\n    else:\n        # There was an error on creation, so make sure we know about it\n        raise\n</code>\n</pre>\n", "senID": 1}, {"text": ["Now as I say, this is not really foolproof, because we have the possiblity of failing to create the directory, and another process creating it during that period.", "I think I will ask the proper remainder as a question, as to whether the OSError codes can be used cross-platform."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["try the os.path.exists function"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n if not os.path.exists(dir):\n os.path.mkdir(dir)\n</code>\n</pre>\n", "senID": 1}]]