<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-3829457</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Generating</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">poker</span> <span style="background-color:yellow;">hands</span> </h2><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">sounds</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">glance</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">turns</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">complicated</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">seems.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">got</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">stumped</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">moment</span> . </p>
<p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">52c5</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">2,598,960</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">choose</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">52</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">deck.</span> <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">suits</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">interchangeable</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">poker</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">equivalent</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">2H</span> <span style="background-color:yellow;">2C</span> <span style="background-color:yellow;">3H</span> <span style="background-color:yellow;">3S</span> <span style="background-color:yellow;">4D</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">equivalent</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">2D</span> <span style="background-color:yellow;">2S</span> <span style="background-color:yellow;">3D</span> <span style="background-color:yellow;">3C</span> <span style="background-color:yellow;">4H</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">simply</span> <span style="background-color:yellow;">swap</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">suits</span> <span style="background-color:yellow;">around.</span> <span style="background-color:yellow;">According</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">wikipedia</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">134,459</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">account</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">recolorings</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">efficiently</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">hands</span> ? <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">eliminate</span> <span style="background-color:yellow;">duplicates</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">apply</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">larger</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">evaluate</span> <span style="background-color:yellow;">fast</span> <span style="background-color:yellow;">spirals</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">control.</span> <span style="background-color:yellow;">My</span> <span style="background-color:yellow;">current</span> <span style="background-color:yellow;">attempts</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">centered</span> <span style="background-color:yellow;">around</span> <span style="background-color:yellow;">either</span> <span style="background-color:yellow;">generating</span> <span style="background-color:yellow;">depth-first</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">keeping</span> <span style="background-color:yellow;">track</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">currently</span> <span style="background-color:yellow;">generated</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">determine</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">suits</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">ranks</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">valid</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">breadth-first</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">generating</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">removing</span> <span style="background-color:yellow;">duplicates</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">converting</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">'canonical</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">recoloring.</span> <span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">attempt</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">breadth-first</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">:</span> </p>
<pre><code># A card is represented by an integer. The low 2 bits represent the suit, while
# the remainder represent the rank.
suits = 'CDHS'
ranks = '23456789TJQKA'

def make_canonical(hand):
  suit_map = [None] * 4
  next_suit = 0
  for i in range(len(hand)):
    suit = hand[i] & 3
    if suit_map[suit] is None:
      suit_map[suit] = next_suit
      next_suit += 1
    hand[i] = hand[i] & ~3 | suit_map[suit]
  return hand

def expand_hand(hand, min_card):
  used_map = 0
  for card in hand:
    used_map |= 1 << card

  hands = set()
  for card in range(min_card, 52):
    if (1 << card) & used_map:
      continue
    new_hand = list(hand)
    new_hand.append(card)
    make_canonical(new_hand)
    hands.add(tuple(new_hand))
  return hands

def expand_hands(hands, num_cards):
  for i in range(num_cards):
    new_hands = set()
    for j, hand in enumerate(hands):
      min_card = hand[-1] + 1 if i > 0 else 0
      new_hands.update(expand_hand(hand, min_card))
    hands = new_hands
  return hands
</code></pre>
<p><span style="background-color:yellow;">Unfortunately</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">generates</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> len(expand_hands(set([()]), 5))
160537
</code></pre>
<p><span style="background-color:yellow;">Can</span> <span style="background-color:yellow;">anyone</span> <span style="background-color:yellow;">suggest</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">gone</span> <span style="background-color:yellow;">wrong</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">attempt</span> ? </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-9</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">Your</span> <span style="background-color:yellow;">overall</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">sound.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">lies</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">make_canonical</span> <span style="background-color:yellow;">function.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">printing</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">num_cards</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">equivalencies</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">missed</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">:</span> </p>
<pre><code># The inputs are equivalent and should return the same value
print make_canonical([8, 12 | 1]) # returns [8, 13]
print make_canonical([12, 8 | 1]) # returns [12, 9]
</code></pre>
<p><span style="background-color:yellow;">For</span> <span style="background-color:yellow;">reference</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">below</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">developed</span> <span style="background-color:yellow;">prior</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">depth-first</span> <span style="background-color:yellow;">search</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">breadth-first</span> <span style="background-color:yellow;">search.</span> <span style="background-color:yellow;">Also</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">writing</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">transform</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">canonical</span> <span style="background-color:yellow;">form</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wrote</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">canonical.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">canonical</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">skip</span> <span style="background-color:yellow;">it.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">defined</span> <span style="background-color:yellow;">rank</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">%</span> <span style="background-color:yellow;">13</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">/</span> <span style="background-color:yellow;">13.</span> <span style="background-color:yellow;">None</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">differences</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">important</span> . </p>
<pre><code>import collections

def canonical(cards):
    """
    Rules for a canonical hand:
    1. The cards are in sorted order

    2. The i-th suit must have at least many cards as all later suits.  If a
       suit isn't present, it counts as having 0 cards.

    3. If two suits have the same number of cards, the ranks in the first suit
       must be lower or equal lexicographically (e.g., [1, 3] <= [2, 4]).

    4. Must be a valid hand (no duplicate cards)
    """

    if sorted(cards) != cards:
        return False
    by_suits = collections.defaultdict(list)
    for suit in range(0, 52, 13):
        by_suits[suit] = [card%13 for card in cards if suit <= card < suit+13]
        if len(set(by_suits[suit])) != len(by_suits[suit]):
            return False
    for suit in range(13, 52, 13):
        suit1 = by_suits[suit-13]
        suit2 = by_suits[suit]
        if not suit2: continue
        if len(suit1) < len(suit2):
            return False
        if len(suit1) == len(suit2) and suit1 > suit2:
            return False
    return True

def deal_cards(permutations, n, cards):
    if len(cards) == n:
        permutations.append(list(cards))
        return
    start = 0
    if cards:
        start = max(cards) + 1
    for card in range(start, 52):
        cards.append(card)
        if canonical(cards):
            deal_cards(permutations, n, cards)
        del cards[-1]

def generate_permutations(n):
    permutations = []
    deal_cards(permutations, n, [])
    return permutations

for cards in generate_permutations(5):
    print cards
</code></pre>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">generates</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">correct</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">permutations</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Cashew:~/$ python2.6 /tmp/cards.py | wc
134459
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Your</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">sounded</span> <span style="background-color:yellow;">interesting</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">implements</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">looping</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">sorted</span> <span style="background-color:yellow;">way.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">looked</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">details</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">yours.</span> <span style="background-color:yellow;">Guess</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">count</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">160537</span> </p>
<ul><span style="background-color:yellow;">My</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">sorted</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">D</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">equal</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">color</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">sorted</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">colors</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">called</span> <span style="background-color:yellow;">0,1,2,3</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">color</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">color</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">color</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">previous</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">bigger</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">color</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">three</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">colors</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">1</span> </ul>
<p><span style="background-color:yellow;">Are</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">wikipedia</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">correct</span> ? </p>
<pre><code>count = 0
for a1 in range(13):
    c1 = 0
    for a2 in range(a1, 13):
        for c2 in range(2):
            if a1==a2 and c1==c2:
                continue
            nc3 = 2 if c1==c2 else 3
            for a3 in range(a2, 13):
                for c3 in range(nc3):
                    if (a1==a3 and c1>=c3) or (a2==a3 and c2>=c3):
                        continue
                    nc4 = nc3+1 if c3==nc3-1 else nc3
                    for a4 in range(a3, 13):
                        for c4 in range(nc4):
                            if (a1==a4 and c1>=c4) or (a2==a4 and c2>=c4) or (a3==a4 and c3>=c4):
                                continue
                            nc5 = nc4+1 if (c4==nc4-1 and nc4!=4) else nc4
                            for a5 in range(a4, 13):
                                for c5 in range(nc5):
                                    if (a1==a5 and c1>=c5) or (a2>=a5 and c2>=c5) or (a3==a5 and c3>=c5) or (a4==a5 and c4>=c5):
                                        continue
                                    #print([(a1,c1),(a2,c2),(a3,c3),(a4,c4),(a5,c5)])
                                    count += 1
print("result: ",count)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">poker</span> <span style="background-color:yellow;">player</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">details</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">precedence</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">beyond</span> <span style="background-color:yellow;">me.</span> <span style="background-color:yellow;">But</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">traversing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">sets</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">generating</span> <span style="background-color:yellow;">sets</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">deck</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">traversing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">poker</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">"</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">require</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">grammar.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">important</span> <span style="background-color:yellow;">thing</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">capture</span> <span style="background-color:yellow;">exactly</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">information</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">relevant</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">precedence.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">royal</span> <span style="background-color:yellow;">flushes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">described</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">symbol</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">RF</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">plus</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">designator</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">RFC</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">royal</span> <span style="background-color:yellow;">flush</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">clubs.</span> <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">10-high</span> <span style="background-color:yellow;">heart</span> <span style="background-color:yellow;">flush</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">FLH10</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">precedence</span> <span style="background-color:yellow;">characteristics</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">flushes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">2C</span> <span style="background-color:yellow;">2S</span> <span style="background-color:yellow;">AH</span> <span style="background-color:yellow;">10C</span> <span style="background-color:yellow;">5D</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">expression</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">PR2</span> <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">undestand</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">initial</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">statement</span> . </p>
<p><span style="background-color:yellow;">Once</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">defined</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">grammar</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">express</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">regular</span> <span style="background-color:yellow;">expressions</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">entire</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">hands.</span> <span style="background-color:yellow;">Sounds</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">fun</span> <span style="background-color:yellow;">!</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">simply</span> <span style="background-color:yellow;">give</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">canonical</span> <span style="background-color:yellow;">ordering</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">K</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">assign</span> <span style="background-color:yellow;">abstract</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">letters</span> <span style="background-color:yellow;">according</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">their</span> <span style="background-color:yellow;">order</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">appearance</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">order</span> . </p>
<p><span style="background-color:yellow;">Example</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">JH</span> <span style="background-color:yellow;">4C</span> <span style="background-color:yellow;">QD</span> <span style="background-color:yellow;">9C</span> <span style="background-color:yellow;">3D</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">3a</span> <span style="background-color:yellow;">4b</span> <span style="background-color:yellow;">9b</span> <span style="background-color:yellow;">Jc</span> <span style="background-color:yellow;">Qa</span> . </p>
<p><span style="background-color:yellow;">Generation</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">best</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">dynamic</span> <span style="background-color:yellow;">programming</span> <span style="background-color:yellow;">:</span> </p>
<ul><span style="background-color:yellow;">start</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">empty</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">old</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">adding</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">remaining</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">canonicalize</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">remove</span> <span style="background-color:yellow;">duplicates</span> </ul>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">Pokersource</span> . <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">worse</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">considering</span> <span style="background-color:yellow;">completing</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">given</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">drawn</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">guy</span> <span style="background-color:yellow;">behind</span> <span style="background-color:yellow;">PokerStove</span> <span style="background-color:yellow;">did</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">great</span> <span style="background-color:yellow;">job</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">direction</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">source</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">disclosed</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">Generating</span> <span style="background-color:yellow;">equivalence</span> <span style="background-color:yellow;">classes</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">card</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">task</span> . <span style="background-color:yellow;">When</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">usually</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//www.vpgenius.com/</span> <span style="background-color:yellow;">webpage.</span> <span style="background-color:yellow;">At</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//www.vpgenius.com/video-poker/games/</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">choose</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">variety</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">poker</span> <span style="background-color:yellow;">game</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">Programming</span> <span style="background-color:yellow;">tab</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">section</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">Unique</span> <span style="background-color:yellow;">Suit</span> <span style="background-color:yellow;">Patterns</span> <span style="background-color:yellow;">"</span> . <span style="background-color:yellow;">So</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">copying</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">loading</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">program</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">easier</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">trying</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">own</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">Initial</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>H 0 0 0 0 0 0 0 0 0 0 0 0 0
C 1 0 0 0 0 0 0 0 0 0 0 0 0
D 1 0 0 0 0 0 0 0 0 0 0 0 0
S 1 1 0 0 0 0 0 0 0 0 0 0 0
+ A 2 3 4 5 6 7 8 9 T J Q K
</code></pre>
<p><span style="background-color:yellow;">Step</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">rank</span> <span style="background-color:yellow;">greater</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">equal</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">highest</span> <span style="background-color:yellow;">rank</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">suits</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">rank</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">0.</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">away</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">checking</span> <span style="background-color:yellow;">higher</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">lower</span> <span style="background-color:yellow;">combinations</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">checked</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">lower</span> <span style="background-color:yellow;">starting</span> <span style="background-color:yellow;">points</span> . </p>
<pre><code>H 0 0 0 0 0 0 0 0 0 0 0 0 0
C 1 0 0 0 0 0 0 0 0 0 0 0 0
D 1 0 0 0 0 0 0 0 0 0 0 0 0
S 1 0 0 0 0 0 0 0 0 0 0 0 0
+ A 2 3 4 5 6 7 8 9 T J Q K
</code></pre>
<p><span style="background-color:yellow;">Step</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Collapse</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">rows</span> </p>
<pre><code>0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0 0 0 0 0 0
A 2 3 4 5 6 7 8 9 T J Q K
</code></pre>
<p><span style="background-color:yellow;">Step</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Climb</span> <span style="background-color:yellow;">back</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">determining</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">match</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">row</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">choose</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">suits</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">match</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">rows</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">identified</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;"></span> </p>
<pre><code>H 0 * 0 0 0 0 0 0 0 0 0 0 0
C 1 0 0 0 0 0 0 0 0 0 0 0 0
D 1 * 0 0 0 0 0 0 0 0 0 0 0
S 1 1 0 0 0 0 0 0 0 0 0 0 0
+ A 2 3 4 5 6 7 8 9 T J Q K
</code></pre>
<p><span style="background-color:yellow;">Now</span> <span style="background-color:yellow;">showing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">repeat</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">rank</span> <span style="background-color:yellow;">3</span> </p>
<pre><code>H 0 0 0 0 0 0 0 0 0 0 0 0 0
C 1 0 0 0 0 0 0 0 0 0 0 0 0
D 1 0 0 0 0 0 0 0 0 0 0 0 0
S 1 1 0 0 0 0 0 0 0 0 0 0 0
+ A 2 3 4 5 6 7 8 9 T J Q K

0 0 0 0 0 0 0 0 0 0 0 0 0
1 0 0 0 0 0 0 0 0 0 0 0 0
1 1 0 0 0 0 0 0 0 0 0 0 0
A 2 3 4 5 6 7 8 9 T J Q K

H 0 0 * 0 0 0 0 0 0 0 0 0 0
C 1 0 0 0 0 0 0 0 0 0 0 0 0
D 1 0 * 0 0 0 0 0 0 0 0 0 0
S 1 1 * 0 0 0 0 0 0 0 0 0 0
+ A 2 3 4 5 6 7 8 9 T J Q K
</code></pre>
<p><span style="background-color:yellow;">Step</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Once</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">cells</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">increment</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">total</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">abstracted</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">count</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">recurse</span> <span style="background-color:yellow;">up</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">total</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">suit</span> <span style="background-color:yellow;">abstracted</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">134,459.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wrote</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">test</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>using System;
using System.Collections.Generic;
using System.Linq;

namespace ConsoleApplication20
{
    struct Card
    {
        public int Suit { get; set; }
        public int Rank { get; set; }
    }
    
    class Program
    {
        static int ranks = 13;
        static int suits = 4;
        static int cardsInHand = 5;

        static void Main(string[] args)
        {
            List<Card> cards = new List<Card>();
            //cards.Add(new Card() { Rank = 0, Suit = 0 });
            int numHands = GenerateAllHands(cards);
    
            Console.WriteLine(numHands);
            Console.ReadLine();
        }
  
        static int GenerateAllHands(List<Card> cards)
        {
            if (cards.Count == cardsInHand) return 1;
    
            List<Card> possibleNextCards = GetPossibleNextCards(cards);
    
            int numSubHands = 0;
    
            foreach (Card card in possibleNextCards)
            {
                List<Card> possibleNextHand = cards.ToList(); // copy list
                possibleNextHand.Add(card);
                numSubHands += GenerateAllHands(possibleNextHand);
            }
    
            return numSubHands;
        }
    
        static List<Card> GetPossibleNextCards(List<Card> hand)
        {
            int maxRank = hand.Max(x => x.Rank);
            
            List<Card> result = new List<Card>();
    
            // only use ranks >= max
            for (int rank = maxRank; rank < ranks; rank++)
            {
                List<int> suits = GetPossibleSuitsForRank(hand, rank);
                var possibleNextCards = suits.Select(x => new Card { Rank = rank, Suit = x });
                result.AddRange(possibleNextCards);
            }
    
            return result;
        }
    
        static List<int> GetPossibleSuitsForRank(List<Card> hand, int rank)
        {
            int maxSuit = hand.Max(x => x.Suit);
    
            // select number of ranks of different suits
            int[][] card = GetArray(hand, rank);
    
            for (int i = 0; i < suits; i++)
            {
                card[i][rank] = 0;
            }
    
            int[][] handRep = GetArray(hand, rank);
    
            // get distinct rank sets, then find which ranks they correspond to
            IEnumerable<int[]> distincts = card.Distinct(new IntArrayComparer());
    
            List<int> possibleSuits = new List<int>();
    
            foreach (int[] row in distincts)
            {
                for (int i = 0; i < suits; i++)
                {
                    if (IntArrayComparer.Compare(row, handRep[i]))
                    {
                        possibleSuits.Add(i);
                        break;
                    }
                }
            }
    
            return possibleSuits;
        }
    
        class IntArrayComparer : IEqualityComparer<int[]>
        {
            #region IEqualityComparer<int[]> Members
    
            public static bool Compare(int[] x, int[] y)
            {
                for (int i = 0; i < x.Length; i++)
                {
                    if (x[i] != y[i]) return false;
                }
    
                return true;
            }
    
            public bool Equals(int[] x, int[] y)
            {
                return Compare(x, y);
            }
    
            public int GetHashCode(int[] obj)
            {
                return 0;
            }

            #endregion
        }

        static int[][] GetArray(List<Card> hand, int rank)
        {
            int[][] cards = new int[suits][];
            for (int i = 0; i < suits; i++)
            {
                cards[i] = new int[ranks];
            }

            foreach (Card card in hand)
            {
                cards[card.Suit][card.Rank] = 1;
            }
    
            return cards;
        }
    }
}
</code></pre>
<p><span style="background-color:yellow;">Hopefully</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">broken</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">easily</span> <span style="background-color:yellow;">understandable</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">Take</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//specialk-coding.blogspot.com/</span> </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//code.google.com/p/specialkpokereval/</span> </p>
<p><span style="background-color:yellow;">These</span> <span style="background-color:yellow;">regard</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">5-card</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">7-card</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">individual</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">independent</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">suit.</span> <span style="background-color:yellow;">Exactly</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">part</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">scheme</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">quickly</span> <span style="background-color:yellow;">ranking</span> <span style="background-color:yellow;">7-</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">5-card</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">written</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Objective-C</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">Java</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">interested</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">rankings</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">7462</span> <span style="background-color:yellow;">distinct</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">classes</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">considered</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">Wikipedia</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">By</span> <span style="background-color:yellow;">creating</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">table</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">their</span> <span style="background-color:yellow;">accompanying</span> <span style="background-color:yellow;">multiplicity</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">relevant</span> <span style="background-color:yellow;">hands</span> <span style="background-color:yellow;">weighted</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">their</span> <span style="background-color:yellow;">probability</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">fast.</span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">assuming</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">cards</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">known</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">therefore</span> <span style="background-color:yellow;">fixed</span> <span style="background-color:yellow;">beforehand</span> <span style="background-color:yellow;">already</span> . </p>
<br />