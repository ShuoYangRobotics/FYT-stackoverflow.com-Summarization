<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1531501</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">serialization</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Google</span> <span style="background-color:yellow;">App</span> <span style="background-color:yellow;">Engine</span> <span style="background-color:yellow;">models</span> </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">search</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">success.</span> <span style="background-color:yellow;">My</span> <span style="background-color:yellow;">project</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">serialize</span> <span style="background-color:yellow;">App</span> <span style="background-color:yellow;">Engine</span> <span style="background-color:yellow;">models</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">google.appengine.ext.db.Model</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;">serializer</span> ? <span style="background-color:yellow;">My</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">fairly</span> <span style="background-color:yellow;">simple.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">instance</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class Photo(db.Model):
    filename = db.StringProperty()
    title = db.StringProperty()
    description = db.StringProperty(multiline=True)
    date_taken = db.DateTimeProperty()
    date_uploaded = db.DateTimeProperty(auto_now_add=True)
    album = db.ReferenceProperty(Album, collection_name='photo')
</code></pre>
<p><span style="background-color:yellow;">Thanks</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">advance</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-10</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">recursive</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">entity</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">referents</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">nested</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">passed</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">simplejson</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import datetime
import time

SIMPLE_TYPES = (int, long, float, bool, dict, basestring, list)

def to_dict(model):
    output = {}

    for key, prop in model.properties().iteritems():
        value = getattr(model, key)

        if value is None or isinstance(value, SIMPLE_TYPES):
            output[key] = value
        elif isinstance(value, datetime.date):
            # Convert date/datetime to ms-since-epoch ("new Date()").
            ms = time.mktime(value.utctimetuple()) * 1000
            ms += getattr(value, 'microseconds', 0) / 1000
            output[key] = int(ms)
        elif isinstance(value, db.GeoPt):
            output[key] = {'lat': value.lat, 'lon': value.lon}
        elif isinstance(value, db.Model):
            output[key] = to_dict(value)
        else:
            raise ValueError('cannot encode ' + repr(prop))

    return output
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">simplest</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">found.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">requires</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">codes</span> . </p>
<p><span style="background-color:yellow;">Simply</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class DictModel(db.Model):
    def to_dict(self):
       return dict([(p, unicode(getattr(self, p))) for p in self.properties()])
</code></pre>
<p><span style="background-color:yellow;">SimpleJSON</span> <span style="background-color:yellow;">now</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">properly</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class Photo(DictModel):
   filename = db.StringProperty()
   title = db.StringProperty()
   description = db.StringProperty(multiline=True)
   date_taken = db.DateTimeProperty()
   date_uploaded = db.DateTimeProperty(auto_now_add=True)
   album = db.ReferenceProperty(Album, collection_name='photo')

from django.utils import simplejson
from google.appengine.ext import webapp

class PhotoHandler(webapp.RequestHandler):
   def get(self):
      photos = Photo.all()
      self.response.out.write(simplejson.dumps([p.to_dict() for p in photos]))
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">serialize</span> <span style="background-color:yellow;">models</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">custom</span> <span style="background-color:yellow;">json</span> <span style="background-color:yellow;">encoder</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import datetime
from google.appengine.api import users
from google.appengine.ext import db
from django.utils import simplejson

class jsonEncoder(simplejson.JSONEncoder):
    def default(self, obj):
        if isinstance(obj, datetime.datetime):
            return obj.isoformat()

        elif isinstance(obj, db.Model):
            return dict((p, getattr(obj, p)) 
                        for p in obj.properties())

        elif isinstance(obj, users.User):
            return obj.email()

        else:
            return simplejson.JSONEncoder.default(self, obj)


# use the encoder as: 
simplejson.dumps(model, cls=jsonEncoder)
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">:</span> </p>
<ul><span style="background-color:yellow;">a</span> <span style="background-color:yellow;">date</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">isoformat</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">per</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">suggestion</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">properties</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">user</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">his</span> <span style="background-color:yellow;">email</span> . </ul>
<p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">decode</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">date</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">javascript</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>function decodeJsonDate(s){
  return new Date( s.slice(0,19).replace('T',' ') + ' GMT' );
} // Note that this function truncates milliseconds.
</code></pre>
<p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Thanks</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">user</span> <span style="background-color:yellow;">pydave</span> <span style="background-color:yellow;">who</span> <span style="background-color:yellow;">edited</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">readable.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">originally</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">if/else</span> <span style="background-color:yellow;">expressions</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">express</span> <span style="background-color:yellow;">jsonEncoder</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">fewer</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">follows</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">added</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">comments</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">google.appengine.ext.db.to_dict</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">clearer</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">original.</span> <span style="background-color:yellow;"></span> </p>
<pre><code>class jsonEncoder(simplejson.JSONEncoder):
  def default(self, obj):
    isa=lambda x: isinstance(obj, x) # isa(<type>)==True if obj is of type <type>
    return obj.isoformat() if isa(datetime.datetime) else \
           db.to_dict(obj) if isa(db.Model) else \
           obj.email()     if isa(users.User) else \
           simplejson.JSONEncoder.default(self, obj)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Even</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">framework</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">libraries</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">available</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> . </p>
<pre><code>from django.core import serializers
data = serializers.serialize("xml", Photo.objects.all())
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">For</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">advocated</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">article</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>  # after obtaining a list of entities in some way, e.g.:
  user = users.get_current_user().email().lower();
  col = models.Entity.gql('WHERE user=:1',user).fetch(300, 0)

  # ...you can make a json serialization of name/key pairs as follows:
  json = simplejson.dumps(col, default=lambda o: {o.name :str(o.key())})
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">article</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">contains</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">spectrum</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">complex</span> <span style="background-color:yellow;">serializer</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">enriches</span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">require</span> <span style="background-color:yellow;">_meta</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">why</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">getting</span> <span style="background-color:yellow;">errors</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">_meta</span> <span style="background-color:yellow;">missing</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">perhaps</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">bug</span> <span style="background-color:yellow;">described</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">ability</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">serialize</span> <span style="background-color:yellow;">computed</span> <span style="background-color:yellow;">properties</span> <span style="background-color:yellow;">/</span> <span style="background-color:yellow;">methods.</span> <span style="background-color:yellow;">Most</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">serialization</span> <span style="background-color:yellow;">needs</span> <span style="background-color:yellow;">lay</span> <span style="background-color:yellow;">somewhere</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">introspective</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">@</span> <span style="background-color:yellow;">David</span> <span style="background-color:yellow;">Wilson</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">preferable</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">parser</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">parser</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">presumably</span> <span style="background-color:yellow;">turn</span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">serialize</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">yourself</span> . </p>
<p><span style="background-color:yellow;">Using</span> <span style="background-color:yellow;">simplejson</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import simplejson as json
serialized = json.dumps({
    'filename': self.filename,
    'title': self.title,
    'date_taken': date_taken.isoformat(),
    # etc.
})
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">app-engine-patch</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">automatically</span> <span style="background-color:yellow;">declare</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">_meta</span> <span style="background-color:yellow;">attribute</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">django.core.serializers</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">normally</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">models</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">sledge</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">App-engine-patch</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">cool</span> <span style="background-color:yellow;">features</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">hybrid</span> <span style="background-color:yellow;">authentication</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">google</span> <span style="background-color:yellow;">accounts</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">admin</span> <span style="background-color:yellow;">part</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">works</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">Model.properties</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">defined</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">Model</span> <span style="background-color:yellow;">classes.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">seek</span> . </p>
<pre><code>from django.utils import simplejson
class Photo(db.Model):
  # ...

my_photo = Photo(...)
simplejson.dumps(my_photo.properties())
</code></pre>
<p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">Model</span> <span style="background-color:yellow;">properties</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">docs</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">Mtgred</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">above</span> <span style="background-color:yellow;">worked</span> <span style="background-color:yellow;">wonderfully</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">slightly</span> <span style="background-color:yellow;">modified</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">key</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">entry.</span> <span style="background-color:yellow;">Not</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">few</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">unique</span> <span style="background-color:yellow;">key</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class DictModel(db.Model):
def to_dict(self):
    tempdict1 = dict([(p, unicode(getattr(self, p))) for p in self.properties()])
    tempdict2 = {'key':unicode(self.key())}
    tempdict1.update(tempdict2)
    return tempdict1
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">9</span> </b><br /><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">latest</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">1.5.2</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">release</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">App</span> <span style="background-color:yellow;">Engine</span> <span style="background-color:yellow;">SDK</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">to_dict</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">converts</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">instances</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">dictionaries</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">introduced</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">db.py</span> . <span style="background-color:yellow;">See</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">release</span> <span style="background-color:yellow;">notes</span> . </p>
<p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">reference</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">documentation</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">yet</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">myself</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">expected</span> . </p>
<br />