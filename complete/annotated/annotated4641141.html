<h3>Question ( ID-4641141 ) : </h3><h2>why is it <span style="background-color:yellow;">giving</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">an</span> error </h2><p>ok , <span style="background-color:yellow;">so</span> I <span style="background-color:yellow;">got</span> <span style="background-color:yellow;">a</span> little exercise <span style="background-color:yellow;">for</span> python <span style="background-color:yellow;">and</span> I want <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> values of <span style="background-color:yellow;">speed</span> <span style="background-color:yellow;">and</span> location <span style="background-color:yellow;">at</span> every <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">from</span> 0 <span style="background-color:yellow;">to</span> 30th within <span style="background-color:yellow;">a</span> list. <span style="background-color:yellow;">also</span> it must notify me when <span style="background-color:yellow;">they</span> intersect. while <span style="background-color:yellow;">finding</span> <span style="background-color:yellow;">the</span> location of <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> car I <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> method of Trapezoid code only . </p>
<p><span style="background-color:yellow;">the</span> <span style="background-color:yellow;">speed</span> equation of <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> car is V1 = <span style="background-color:yellow;">t</span> ^ 3-3 * <span style="background-color:yellow;">t</span> ^ 2 + 2 * <span style="background-color:yellow;">t</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> is V2 = 10 * <span style="background-color:yellow;">t</span> </p>
<p>my code : </p>
<pre><code>def cars():

    def LocationV1(x):
        x=x*1.0
        h=x/1000.0
        m=0
        n=m+h
        L=0.0
        for i in range (0,1000):
            def f(u):
                return u**3+3*u**2+2*u
            L=L+(f(m)+f(n))*h/2
            m=m+h
            n=n+h
        return L
    def LocationV2(x):
        x=x*1.0
        def g(x):
            return 5*x**2/2
    def SpeedV1 (x):
        x=x*1.0
        return x**3-3*x**2+2*x
    def SpeedV2 (x):
        x=x*1.0
        return 10*x
    V1=[]
    V2=[]
    t=0
    a=LocationV1(t)
    b=LocationV2(t)
    while t<=30:
        t=t+1
        V1=V1+[[LocationV1(t), SpeedV1(t), t]]
        V2=V2+[[LocationV2(t), SpeedV2(t), t]]
        print V1
        print V2
        if (a-b)<=0.1:
            print "cars meet"
</code></pre>
<p>when I <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">this</span> code it <span style="background-color:yellow;">gives</span> me <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">an</span> error : </p>
<pre><code>Traceback (most recent call last):
  File "<pyshell#8>", line 1, in <module>
    cars()
  File "C:/Users/ÖZGÜR/Desktop/ödev", line 35, in cars
    if (a-b)<=1:
TypeError: unsupported operand type(s) for -: 'int' and 'NoneType'
</code></pre>
<p>what do I do now ? </p>
<br /><h3>Answers ( Total-6 ) : </h3><b># 0 </b><br /><pre><code>b=LocationV2(t)
</code></pre>
<p>The problem is , <span style="background-color:yellow;">this</span> returns None <span style="background-color:yellow;">and</span> hence <span style="background-color:yellow;">a-b</span> <span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">the</span> error you <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">getting</span> . </p>
<pre><code>def LocationV2(x):
    x=x*1.0
    def g(x):
        return 5*x**2/2
</code></pre>
<p><span style="background-color:yellow;">should</span> really <span style="background-color:yellow;">be</span> : </p>
<pre><code>def LocationV2(x):
    x=x*1.0
    return 5*x**2/2
</code></pre>
<p>And <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">fix</span> your problem . </p>
<br /><b># 1 </b><br /><p>I do n't know Python , <span style="background-color:yellow;">but</span> your <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">LocationV2</span> ( ) does n't <span style="background-color:yellow;">seem</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> returning <span style="background-color:yellow;">anything</span> . </p>
<br /><b># 2 </b><br /><p>As <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">as</span> I can <span style="background-color:yellow;">see</span> you <span style="background-color:yellow;">are</span> doing </p>
<pre><code>b = LocationV2(t)
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">LocationV2</span> does not return <span style="background-color:yellow;">anything</span> , <span style="background-color:yellow;">so</span> it implicitly returns NoneType. Then you call </p>
<pre><code>if (a-b)<=0.1:
</code></pre>
<p><span style="background-color:yellow;">and</span> it is <span style="background-color:yellow;">trying</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">subtract</span> NoneType <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">an</span> int. In <span style="background-color:yellow;">fact</span> , I have no idea what <span style="background-color:yellow;">LocationV2</span> <span style="background-color:yellow;">actually</span> does. It <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> multiply <span style="background-color:yellow;">x</span> <span style="background-color:yellow;">by</span> 1. Return <span style="background-color:yellow;">the</span> value <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">LocationV2</span> <span style="background-color:yellow;">and</span> you <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">fine</span> . </p>
<br /><b># 3 </b><br /><p>The <span style="background-color:yellow;">LocationV2</span> <span style="background-color:yellow;">function</span> does not return explicitly return <span style="background-color:yellow;">a</span> value , <span style="background-color:yellow;">thus</span> Python runtime make it return None . </p>
<br /><b># 4 </b><br /><p><span style="background-color:yellow;">LocationV2</span> does not return <span style="background-color:yellow;">anything</span> , <span style="background-color:yellow;">therefore</span> <span style="background-color:yellow;">b</span> is None . </p>
<br /><b># 5 </b><br /><p>A <span style="background-color:yellow;">grossly</span> over-engineered version : </p>
<pre><code>rng = xrange if xrange else range

class Polynomial(object):
    def __init__(self, *args):
        """
        Args are coefficients of x**0, x**1, x**2, ...
        ie, Polynomial(3,0,2) is 2*(x**2) + 3
        """
        self.coeffs = [float(a) for a in args]

    def __call__(self, x):
        "Evaluate poly at x"
        return sum(a*(x**n) for n,a in enumerate(self.coeffs))

    def integrate(self, yAtZero=0.0):
        "Do symbolic integration of poly, return result as new poly"
        newCoeffs = [yAtZero] + [a/(n+1.0) for n,a in enumerate(self.coeffs)]
        return Polynomial(*newCoeffs)

class TrapezoidIntegrator(object):
    def __init__(self, fn, steps=1000):
        self.fn = fn
        self.steps = int(steps)

    def __call__(self, x):
        "Integrate fn from 0 to x in steps pieces"
        myfn = self.fn
        w = float(x)/self.steps
        return -0.5*w*myfn(0.0) + w*sum(myfn(w*step) for step in rng(self.steps)) + 0.5*w*myfn(x)

class Car(object):
    def __init__(self, posFn, speedFn):
        self.pos = posFn
        self.speed = speedFn

    def at(self, t):
        return self.pos(t), self.speed(t)

class Ahead(object):
    def __init__(self, fmt, *args):
        """
        @param fmt,  string:  format-string with one parameter, to report a change in leader
        @param args, strings: contestant names
        """        
        self.was_ahead = None
        self.fmt = fmt
        self.names = list(args)

    def __call__(self, *args):
        "Compare an arbitrary number of racers and report whenever the leader changes"
        state = zip(args, self.names)    # we assume that len(args)==len(self.names)
        state.sort(reverse=True, key=lambda x: x[0])
        leader = state[0][1]

        if leader==self.was_ahead:
            return ''
        else:
            self.was_ahead = leader
            return self.fmt.format(leader)

def niceFloat(val, width, decimals):
    """
    Really wretchedly annoying - I have not yet found a nice way to do
    decimal-aligned floats with the new-style string formatting.
    """
    fmt = "%{0}.{1}f".format(width, decimals)
    return fmt % val

def main():
    v1 = Polynomial(0,2,-3,1)    # speed of first car = t^3 - 3t^2 + 2t
    d1 = TrapezoidIntegrator(v1) # must use trapezoidal numeric integration
    car1 = Car(d1, v1)

    v2 = Polynomial(0,10)        # speed of second car is 10t
    d2 = v2.integrate()          # use symbolic integration
    car2 = Car(d2, v2)

    fmt = "{0:>4}: {1:>10} {2:>10}{3}"
    print(fmt.format('Time','Car1','Car2',''))
    ahead = Ahead('  Car {0} is in the lead!', 1, 2)
    log = []

    for t in rng(31):
        a, da = car1.at(t)
        b, db = car2.at(t)

        print(fmt.format(t, niceFloat(a,10,2), niceFloat(b,10,2), ahead(a,b)))
        log.append((t,a,da,b,db))

if __name__=="__main__":
    main()
</code></pre>
<p>which results in : </p>
<pre><code>Time:       Car1       Car2
   0:       0.00       0.00  Car 1 is in the lead!
   1:       0.25       5.00  Car 2 is in the lead!
   2:       0.00      20.00
   3:       2.25      45.00
   4:      16.00      80.00
   5:      56.25     125.00
   6:     144.00     180.00
   7:     306.25     245.00  Car 1 is in the lead!
   8:     576.00     320.00
   9:     992.25     405.00
  10:    1600.00     500.00
  11:    2450.25     605.00
  12:    3600.00     720.00
  13:    5112.26     845.00
  14:    7056.01     980.00
  15:    9506.26    1125.00
  16:   12544.01    1280.00
  17:   16256.27    1445.00
  18:   20736.02    1620.00
  19:   26082.28    1805.00
  20:   32400.04    2000.00
  21:   39800.29    2205.00
  22:   48400.05    2420.00
  23:   58322.31    2645.00
  24:   69696.08    2880.00
  25:   82656.34    3125.00
  26:   97344.11    3380.00
  27:  113906.37    3645.00
  28:  132496.14    3920.00
  29:  153272.41    4205.00
  30:  176400.19    4500.00
</code></pre>
<br />