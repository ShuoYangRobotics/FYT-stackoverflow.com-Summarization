<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1032281</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">finding</span> <span style="background-color:yellow;">keys</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">unique</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> ? </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">receive</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">keys</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">unique</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">scope</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">dictionary</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">clarify</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">example.</span> <span style="background-color:yellow;">Say</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">constructed</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">follows</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>a = dict()
a['cat'] =      1
a['fish'] =     1
a['dog'] =      2  # <-- unique
a['bat'] =      3
a['aardvark'] = 3
a['snake'] =    4  # <-- unique
a['wallaby'] =  5
a['badger'] =   5
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">expect</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">'dog</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">'snake</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">]</span> . </p>
<p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">obvious</span> <span style="background-color:yellow;">brute</span> <span style="background-color:yellow;">force</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">achieve</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">however</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wondered</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">neat</span> <span style="background-color:yellow;">Pythonian</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">job</span> <span style="background-color:yellow;">done</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-9</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">efficient</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">large</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> </p>
<pre><code>countMap = {}
for v in a.itervalues():
    countMap[v] = countMap.get(v,0) + 1
uni = [ k for k, v in a.iteritems() if countMap[v] == 1]
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bruteforce</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>l = a.values()
b = [x for x in a if l.count(a[x]) == 1]
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><pre><code>>>> b = []
>>> import collections
>>> bag = collections.defaultdict(lambda: 0)
>>> for v in a.itervalues():
...     bag[v] += 1
...
>>> b = [k for (k, v) in a.iteritems() if bag[v] == 1]
>>> b.sort() # optional
>>> print b
['dog', 'snake']
>>>
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">requires</span> <span style="background-color:yellow;">traversing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def unique_values(d):
    seen = {} # dict (value, key)
    result = set() # keys with unique values
    for k,v in d.iteritems():
        if v in seen:
            result.discard(seen[v])
        else:
            seen[v] = k
            result.add(k)
    return list(result)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">verbose</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">pass</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>revDict = {}
for k, v in a.iteritems():
  if v in revDict:
     revDict[v] = None
  else:
     revDict[v] = k

[ x for x in revDict.itervalues() if x != None ]
</code></pre>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">hope</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">test</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">What</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">subclassing</span> ? </p>
<pre><code>class UniqueValuesDict(dict):

    def __init__(self, *args):
        dict.__init__(self, *args)
        self._inverse = {}

    def __setitem__(self, key, value):
        if value in self.values():
            if value in self._inverse:
                del self._inverse[value]
        else:
            self._inverse[value] = key
        dict.__setitem__(self, key, value)

    def unique_values(self):
        return self._inverse.values()

a = UniqueValuesDict()

a['cat'] =      1
a['fish'] =     1
a[None] =       1
a['duck'] =     1
a['dog'] =      2  # <-- unique
a['bat'] =      3
a['aardvark'] = 3
a['snake'] =    4  # <-- unique
a['wallaby'] =  5
a['badger'] =   5

assert a.unique_values() == ['dog', 'snake']
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">variation</span> . </p>
<pre><code>>>> import collections
>>> inverse= collections.defaultdict(list)
>>> for k,v in a.items():
...     inverse[v].append(k)
... 
>>> [ v[0] for v in inverse.values() if len(v) == 1 ]
['dog', 'snake']
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">partial</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">inverted</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">common</span> <span style="background-color:yellow;">design</span> <span style="background-color:yellow;">pattern</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">count</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">occurrences</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">value</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def unique(a):
    from collections import defaultdict
    count = defaultdict(lambda: 0)
    for k, v in a.iteritems():
        count[v] += 1
    for v, c in count.iteritems():
        if c <= 1:
            yield v
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">Use</span> <span style="background-color:yellow;">nested</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">comprehensions</span> <span style="background-color:yellow;">!</span> </p>
<pre><code>print [v[0] for v in 
           dict([(v, [k for k in a.keys() if a[k] == v])
                     for v in set(a.values())]).values()
       if len(v) == 1]
</code></pre>
<br />