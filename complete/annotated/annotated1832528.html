<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1832528</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">necessary</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">iterator</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">object</span> </h2><p><span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">bad</span> <span style="background-color:yellow;">practice</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">explicitly</span> <span style="background-color:yellow;">handle</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">method</span> ? </p>
<pre><code>for line in open('hello.txt'):
    print line
</code></pre>
<p><span style="background-color:yellow;">NB</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">versions</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">yet</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">statement</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">ask</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">documentation</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">recommend</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">-</span> </p>
<pre><code>f = open("hello.txt")
try:
    for line in f:
        print line
finally:
    f.close()
</code></pre>
<p><span style="background-color:yellow;">Which</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">verbose</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">necessary</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-8</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">Close</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">necessary</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">dealing</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">idea</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">leave</span> <span style="background-color:yellow;">open</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">handles</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">place.</span> <span style="background-color:yellow;">They</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">eventually</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">garbage</span> <span style="background-color:yellow;">collected</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">mean</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">wasting</span> <span style="background-color:yellow;">system</span> <span style="background-color:yellow;">resources</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">holding</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">handles</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">need</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2.5</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">higher</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">called</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">automatically</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from __future__ import with_statement # Only needed in Python 2.5
with open("hello.txt") as f:
    for line in f:
        print line
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">effect</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>f = open("hello.txt")
try:
    for line in f:
        print line
finally:
    f.close()
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">direct</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;">support</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Resource</span> <span style="background-color:yellow;">Acquisition</span> <span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">Initialization</span> <span style="background-color:yellow;">idiom</span> <span style="background-color:yellow;">commonly</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">C</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">+</span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">allows</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">safe</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">clean</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">sorts</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">resources</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">ensure</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">database</span> <span style="background-color:yellow;">connections</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">locks</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">released</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">below</span> . </p>
<pre><code>mylock = threading.Lock()
with mylock:
    pass # do some thread safe stuff
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">actuality</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">garbage</span> <span style="background-color:yellow;">collected.</span> <span style="background-color:yellow;">See</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">works</span> . </p>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">recommended</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">try/finally</span> <span style="background-color:yellow;">block</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">though.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">exception</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">reference</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">stored</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">traceback</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">stored</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">global</span> <span style="background-color:yellow;">variable</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">until</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">clear</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">exception</span> <span style="background-color:yellow;">occurs</span> . </p>
<p><span style="background-color:yellow;">Thus</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">bad</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">rely</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">garbage</span> <span style="background-color:yellow;">collection</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> . </p>
<p><span style="background-color:yellow;">Also</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">written</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">guarantee</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">changes</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">saved</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">until</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">flushed</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">Upon</span> <span style="background-color:yellow;">exit</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">interpreter</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">kernel</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">event</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">crash</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">practice</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">them.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">bring</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">whole</span> <span style="background-color:yellow;">system</span> <span style="background-color:yellow;">down</span> . </p>
<p><span style="background-color:yellow;">Most</span> <span style="background-color:yellow;">importantly</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">sign</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">person</span> <span style="background-color:yellow;">who</span> <span style="background-color:yellow;">wrote</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">cares</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">his</span> <span style="background-color:yellow;">work</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">kind</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">hinted</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">place</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">clear</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">yes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">file.</span> <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2.5</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">future</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2.6</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">wordy</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from __future__ import with_statement
with open("hello.txt") as f:
    for line in f:
        print line
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Strange</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">discussion</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">topic</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">importance</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">freeing</span> <span style="background-color:yellow;">system</span> <span style="background-color:yellow;">resources</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">nobody</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">mentioned</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">obviously</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">significant</span> <span style="background-color:yellow;">reason</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">deterministically</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">opened</span> <span style="background-color:yellow;">again</span> . </p>
<p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">certainly</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">matter.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">goes</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">scope</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">deleted</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">underlying</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">closed.</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">When</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">depends</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">specific</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">using.</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">generally</span> <span style="background-color:yellow;">going</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">exactly</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">variable</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">going</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">scope</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">care</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">deterministically</span> . </p>
<p><span style="background-color:yellow;">But</span> <span style="background-color:yellow;">why</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">troubling</span> <span style="background-color:yellow;">yourself</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">kind</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">analysis</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">exists</span> ? </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">close</span> <span style="background-color:yellow;">handles</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">memory</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">freed</span> <span style="background-color:yellow;">up.</span> <span style="background-color:yellow;">Not</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">needed</span> <span style="background-color:yellow;">until</span> <span style="background-color:yellow;">dealing</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">time</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">Yes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">otherwise</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">leak</span> <span style="background-color:yellow;">resources</span> . </p>
<blockquote>
<p>When youâ€™re done with a file, call
  <code>f.close()</code> to close it and free up any
  system resources taken up by the open
  file.</p>
</blockquote>
<p><span style="background-color:yellow;">From</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">docs</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">happen</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">program</span> <span style="background-color:yellow;">exits</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">otherwise</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">keeping</span> <span style="background-color:yellow;">around</span> <span style="background-color:yellow;">resources</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">needs</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">point</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">No</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">believe</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">idiom</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">necessary</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">why</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">grepped</span> <span style="background-color:yellow;">/usr/lib/python2.6/</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;">'for</span> <span style="background-color:yellow;">\</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">+</span> . <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">\</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">\</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">open</span> <span style="background-color:yellow;">\</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">examples</span> <span style="background-color:yellow;">of</span> </p>
<pre><code>for line in open('hello.txt'):
    print line
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">zero</span> <span style="background-color:yellow;">instances</span> <span style="background-color:yellow;">of</span> </p>
<pre><code>f = open("hello.txt")
try:
    for line in f:
        print line
finally:
    f.close()
</code></pre>
<p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">below</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">library</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">...</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">open</span> <span style="background-color:yellow;">idiom</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">naturally</span> <span style="background-color:yellow;">leads</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">developers</span> <span style="background-color:yellow;">accept</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">shorter</span> <span style="background-color:yellow;">idiom</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">libraries</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">improving</span> <span style="background-color:yellow;">anything</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">our</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">our</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">depends</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">libraries</span> ? </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">idiom</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">improve</span> <span style="background-color:yellow;">anything</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">ran</span> </p>
<pre><code>#!/usr/bin/env python
try:
    for i,line in enumerate(open('a')):
        print line
        raw_input()
        if i==5:
            break
except Exception:
    pass

raw_input()
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">checked</span> <span style="background-color:yellow;">/proc/PID/fd</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">descriptor</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">closed</span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">appears</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">break</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">closed</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> . </p>
<p><span style="background-color:yellow;">On</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">basis</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">experiments</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">believe</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">long</span> <span style="background-color:yellow;">try...finally...close</span> <span style="background-color:yellow;">idiom</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">necessary</span> . </p>
<p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">grep</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>/usr/lib/python2.6/dist-packages/NvidiaDetector/nvidiadetector.py:89:tempList = [ x.strip() for x in open(obsolete).readlines() ]
/usr/lib/python2.6/dist-packages/rpy_io.py:49:for line in open(file).readlines():
/usr/lib/python2.6/dist-packages/setuptools/command/easy_install.py:1376:for line in open(self.filename,'rt'):
/usr/lib/python2.6/dist-packages/GDebi/DscSrcPackage.py:47:for line in open(file):
/usr/lib/python2.6/dist-packages/aptsources/distinfo.py:220:[x.strip() for x in open(value)])
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeCache.py:989:for line in open("/proc/mounts"):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeAufs.py:100:for line in open("/proc/mounts"):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeAufs.py:205:for line in open("/proc/mounts"):
/usr/lib/python2.6/dist-packages/DistUpgrade/distinfo.py:220:[x.strip() for x in open(value)])
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeViewKDE.py:826:for c in open(sys.argv[2]).read():
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeConfigParser.py:45:items = [x.strip() for x in open(p)]
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:684:for line in open(cpuinfo):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:692:for line in open("/proc/mounts"):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:726:for line in open("/etc/fstab"):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:762:for line in open(fstab):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:801:for line in open("/etc/fstab"):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:874:for line in open(XORG):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeQuirks.py:939:for line in open(os.path.join(modaliasesdir,filename)):
/usr/lib/python2.6/dist-packages/DistUpgrade/DistUpgradeController.py:1307:for line in open(template):
/usr/lib/python2.6/dist-packages/DistUpgrade/xorg_fix_proprietary.py:23:for raw in open(xorg_source):
/usr/lib/python2.6/dist-packages/DistUpgrade/xorg_fix_proprietary.py:58:for line in open(xorg):
/usr/lib/python2.6/dist-packages/DistUpgrade/xorg_fix_proprietary.py:82:for line in open(xorg):
/usr/lib/python2.6/dist-packages/jockey/oslib.py:377:for line in open(self.apt_jockey_source):
/usr/lib/python2.6/dist-packages/jockey/oslib.py:393:for line in open(f):
/usr/lib/python2.6/dist-packages/jockey/backend.py:651:for line in open(path):
/usr/lib/python2.6/dist-packages/jockey/detection.py:277:for line in open(alias_file):
/usr/lib/python2.6/dist-packages/jockey/detection.py:597:for l in open(os.path.join(path, 'uevent')):
/usr/lib/python2.6/dist-packages/apt/cdrom.py:83:for line in open(fname):
/usr/lib/python2.6/dist-packages/problem_report.py:1119:for line in open('/proc/mounts'):
/usr/lib/python2.6/dist-packages/apport/packaging_impl.py:128:for line in open(f):
/usr/lib/python2.6/dist-packages/apport/packaging_impl.py:190:for line in open(sumfile):
/usr/lib/python2.6/dist-packages/apport/packaging_impl.py:641:for l in open('/etc/apt/sources.list'):
/usr/lib/python2.6/dist-packages/apport/hookutils.py:190:for line in open('/proc/asound/cards'):
/usr/lib/python2.6/dist-packages/apport/hookutils.py:290:for line in open('/var/log/syslog'):
/usr/lib/python2.6/dist-packages/apport/hookutils.py:493:mods = [l.split()[0] for l in open(module_list)]
/usr/lib/python2.6/dist-packages/softwareproperties/SoftwareProperties.py:597:for line in open(f):
/usr/lib/python2.6/dist-packages/softwareproperties/gtk/SoftwarePropertiesGtk.py:883:for x in open(tmp.name):
/usr/lib/python2.6/dist-packages/lsb_release.py:253:for line in open('/etc/lsb-release'):
/usr/lib/python2.6/dist-packages/numpy/distutils/system_info.py:815:for d in open(ld_so_conf,'r').readlines():
/usr/lib/python2.6/dist-packages/LanguageSelector/LocaleInfo.py:72:for line in open(languagelist_file):
/usr/lib/python2.6/dist-packages/LanguageSelector/LocaleInfo.py:187:for line in open(environment).readlines():
/usr/lib/python2.6/dist-packages/LanguageSelector/LocaleInfo.py:193:for line in open(environment).readlines():
/usr/lib/python2.6/dist-packages/LanguageSelector/LanguageSelector.py:125:for line in open(fname):
/usr/lib/python2.6/dist-packages/LanguageSelector/LanguageSelector.py:140:for line in open(fname):
/usr/lib/python2.6/dist-packages/LanguageSelector/LanguageSelector.py:171:for line in open(fname):
/usr/lib/python2.6/dist-packages/LanguageSelector/LanguageSelector.py:210:for line in open(fname):
/usr/lib/python2.6/dist-packages/LanguageSelector/macros.py:16:for l in open(file):
/usr/lib/python2.6/dist-packages/LanguageSelector/macros.py:37:for l in open(self.LANGCODE_TO_LOCALE):
/usr/lib/python2.6/dist-packages/LanguageSelector/LangCache.py:94:for l in open(self.BLACKLIST):
/usr/lib/python2.6/dist-packages/LanguageSelector/LangCache.py:99:for l in open(self.LANGCODE_TO_LOCALE):
/usr/lib/python2.6/dist-packages/LanguageSelector/LangCache.py:111:for l in open(self.PACKAGE_DEPENDS):
/usr/lib/python2.6/dist-packages/LanguageSelector/ImSwitch.py:78:for l in open(self.blacklist_file):
</code></pre>
<br />