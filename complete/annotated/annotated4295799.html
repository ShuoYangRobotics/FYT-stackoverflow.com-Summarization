<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-4295799</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">improve</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">code</span> ? </h2><p><span style="background-color:yellow;">thanks</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">help</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">people</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">able</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">Tasmanian</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">puzzle</span> <span style="background-color:yellow;">working.</span> <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">horribly</span> <span style="background-color:yellow;">slow</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">program</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">run</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">bottom</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">takes</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">long</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">solved</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">machine</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>dumrat@dumrat:~/programming/python$ time python camels.py
[['F', 'F', 'F', 'G', 'B', 'B', 'B'], ['F', 'F', 'G', 'F', 'B', 'B', 'B'], ['F', 'F', 'B', 'F', 'G', 'B', 'B'], ['F', 'F', 'B', 'F', 'B', 'G', 'B'], ['F', 'F', 'B', 'G', 'B', 'F', 'B'], ['F', 'G', 'B', 'F', 'B', 'F', 'B'], ['G', 'F', 'B', 'F', 'B', 'F', 'B'], ['B', 'F', 'G', 'F', 'B', 'F', 'B'], ['B', 'F', 'B', 'F', 'G', 'F', 'B'], ['B', 'F', 'B', 'F', 'B', 'F', 'G'], ['B', 'F', 'B', 'F', 'B', 'G', 'F'], ['B', 'F', 'B', 'G', 'B', 'F', 'F'], ['B', 'G', 'B', 'F', 'B', 'F', 'F'], ['B', 'B', 'G', 'F', 'B', 'F', 'F'], ['B', 'B', 'B', 'F', 'G', 'F', 'F']]

real    0m20.883s
user    0m20.549s
sys 0m0.020s
</code></pre>
<p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import Queue

fCamel = 'F'
bCamel = 'B'
gap = 'G'

def solution(formation):
    return len([i for i in formation[formation.index(fCamel) + 1:] if i == bCamel]) == 0

def heuristic(formation):
    fCamels, score = 0, 0
    for i in formation:
        if i == fCamel:
            fCamels += 1;
        elif i == bCamel:
            score += fCamels;
        else:
            pass
    return score

def getneighbors (formation):
    igap = formation.index(gap)
    res = []
    # AB_CD --> A_BCD | ABC_D | B_ACD | ABD_C
    def genn(i,j):
        temp = list(formation)
        temp[i], temp[j] = temp[j], temp[i]
        res.append(temp)

    if(igap > 0):
        genn(igap, igap-1)
    if(igap > 1):
        genn(igap, igap-2)
    if igap < len(formation) - 1:
        genn(igap, igap+1)
    if igap < len(formation) - 2:
        genn(igap, igap+2)

    return res

class node:
    def __init__(self, a, g, p):
        self.arrangement = a
        self.g = g
        self.parent = p

def astar (formation, heuristicf, solutionf, genneighbors):

    openlist = Queue.PriorityQueue()
    openlist.put((heuristicf(formation), node(formation, 0, None)))
    closedlist = []

    while 1:        
        try:
            f, current = openlist.get()
        except IndexError:
            current = None

        if current is None:
            print "No solution found"
            return None;

        if solutionf(current.arrangement):
            path = []
            cp = current
            while cp != None:
                path.append(cp.arrangement)
                cp = cp.parent
            path.reverse()
            return path

        #arr = current.arrangement
        closedlist.append(current)
        neighbors = genneighbors(current.arrangement)

        for neighbor in neighbors:
            if neighbor in closedlist:
                pass
            else:
                openlist.put((current.g + heuristicf(neighbor), node(neighbor, current.g + 1, current)))

        #sorted(openlist, cmp = lambda x, y : x.f > y.f)

def solve(formation):
    return astar(formation, heuristic, solution, getneighbors)

print solve([fCamel, fCamel, fCamel, gap, bCamel, bCamel, bCamel])
#print solve([fCamel, fCamel, fCamel, fCamel, gap, bCamel, bCamel, bCamel, bCamel])
</code></pre>
<p><span style="background-color:yellow;">That</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">each.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wanted</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">least.</span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">test</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">minutes</span> <span style="background-color:yellow;">now</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">update</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">finishes.</span> <span style="background-color:yellow;">What</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">improve</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">code</span> ? <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Mostly</span> <span style="background-color:yellow;">performance-wise</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">suggestions</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">welcome</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">Thanks</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-7</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">First</span> <span style="background-color:yellow;">let</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem.</span> <span style="background-color:yellow;">Then</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">bothered</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">figure</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">code.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">ran</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">took</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">random-time</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">samples.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">did</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">typing</span> <span style="background-color:yellow;">control-C</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">resulting</span> <span style="background-color:yellow;">stacktrace</span> . </p>
<p><span style="background-color:yellow;">One</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">appears</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">X</span> <span style="background-color:yellow;">%</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">traces</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">X</span> <span style="background-color:yellow;">%</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">responsible</span> <span style="background-color:yellow;">for.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">avoid</span> <span style="background-color:yellow;">executing</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">save</span> . </p>
<p><span style="background-color:yellow;">OK</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">took</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">samples.</span> <span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">they</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>File "camels.py", line 87, in <module>
  print solve([fCamel, fCamel, fCamel, gap, bCamel, bCamel, bCamel])
File "camels.py", line 85, in solve
  return astar(formation, heuristic, solution, getneighbors)
File "camels.py", line 80, in astar
  openlist.put((current.g + heuristicf(neighbor), node(neighbor, current.g + 1, current)))

File "camels.py", line 87, in <module>
  print solve([fCamel, fCamel, fCamel, gap, bCamel, bCamel, bCamel])
File "camels.py", line 85, in solve
  return astar(formation, heuristic, solution, getneighbors)
File "camels.py", line 80, in astar
  openlist.put((current.g + heuristicf(neighbor), node(neighbor, current.g + 1, current)))

File "camels.py", line 87, in <module>
  print solve([fCamel, fCamel, fCamel, gap, bCamel, bCamel, bCamel])
File "camels.py", line 85, in solve
  return astar(formation, heuristic, solution, getneighbors)
File "camels.py", line 80, in astar
  openlist.put((current.g + heuristicf(neighbor), node(neighbor, current.g + 1, current)))
</code></pre>
<p><span style="background-color:yellow;">Notice</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">samples</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">identical.</span> <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">words</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">three</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">individually</span> <span style="background-color:yellow;">responsible</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">nearly</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time.</span> <span style="background-color:yellow;">So</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>line        87: print solve([fCamel, fCamel, fCamel, gap, bCamel, bCamel, bCamel])
line solve: 85: return astar(formation, heuristic, solution, getneighbors)
line astar: 80: openlist.put((current.g + heuristicf(neighbor), node(neighbor, current.g + 1, current)))
</code></pre>
<p><span style="background-color:yellow;">Clearly</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">87</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">avoid</span> <span style="background-color:yellow;">executing</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">85</span> <span style="background-color:yellow;">either.</span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">leaves</span> <span style="background-color:yellow;">80</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">openlist.put</span> <span style="background-color:yellow;">call.</span> <span style="background-color:yellow;">Now</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">operator</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">heuristicf</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">node</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">put</span> <span style="background-color:yellow;">call.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">split</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">onto</span> <span style="background-color:yellow;">separate</span> <span style="background-color:yellow;">lines</span> . </p>
<p><span style="background-color:yellow;">So</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">hope</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">pick</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">quick</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;">problems</span> <span style="background-color:yellow;">are</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">tripped</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">too.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">bottleneck</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">neighbor</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">closedlist</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">forget</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">linear</span> <span style="background-color:yellow;">search</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">linear</span> <span style="background-color:yellow;">searches</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">lists</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">fast.</span> <span style="background-color:yellow;">What</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">closedlist</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">object.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">keeps</span> <span style="background-color:yellow;">hashes</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">items</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">operator</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">efficient</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">lists.</span> <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">lists</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">hashable</span> <span style="background-color:yellow;">items</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">configurations</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">tuples</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">lists</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">order</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">closedlist</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">crucial</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">operator</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">keep</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">parallel</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">around</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">results</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">including</span> <span style="background-color:yellow;">aaronasterling</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">namedtuple</span> <span style="background-color:yellow;">trick</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">performed</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">0.2</span> <span style="background-color:yellow;">sec</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">2.1</span> <span style="background-color:yellow;">sec</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">verifying</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">one</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">tkerwin</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">correct</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">closedlist</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">speeds</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">kind</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">slow</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">side.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">allowing</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">solutions</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">allowing</span> <span style="background-color:yellow;">fCamels</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">backwards</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">bCamels</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">forward.</span> <span style="background-color:yellow;">To</span> <span style="background-color:yellow;">fix</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">replace</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">lines,</span> </p>
<pre><code>if(igap > 0):
    genn(igap, igap-1)
if(igap > 1):
    genn(igap, igap-2)
if igap < len(formation) - 1:
    genn(igap, igap+1)
if igap < len(formation) - 2:
    genn(igap, igap+2)
</code></pre>
<p><span style="background-color:yellow;">with</span> </p>
<pre><code>if(igap > 0 and formation[igap-1] == fCamel):
    genn(igap, igap-1)
if(igap > 1 and formation[igap-2] == fCamel):
    genn(igap, igap-2)
if (igap < len(formation) - 1) and formation[igap+1] == bCamel:
    genn(igap, igap+1)
if (igap < len(formation) - 2) and formation[igap + 2] == bCamel:
    genn(igap, igap+2)
</code></pre>
<p><span style="background-color:yellow;">then</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">side</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">.05</span> <span style="background-color:yellow;">seconds</span> <span style="background-color:yellow;">rather</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">seconds.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">side</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">took</span> <span style="background-color:yellow;">0.09</span> <span style="background-color:yellow;">seconds.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">closedlist</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">heapq</span> <span style="background-color:yellow;">rather</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">Queue</span> . </p>
<p><span style="background-color:yellow;">Additional</span> <span style="background-color:yellow;">speed-up</span> </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">additional</span> <span style="background-color:yellow;">speed-up</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">heuristic</span> <span style="background-color:yellow;">correctly.</span> <span style="background-color:yellow;">Currently</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">line</span> </p>
<pre><code>openlist.put((current.g + heuristicf(neighbor), node(neighbor, current.g + 1, current)))
</code></pre>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">heapq</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">to</span> </p>
<pre><code>openlist.put((heuristicf(neighbor), node(neighbor, current.g + 1, current)))
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">factor</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">moves</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">needed</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">okay.</span> <span style="background-color:yellow;">With</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">puzzle</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">screening</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">moves</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">move</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">wrong</span> <span style="background-color:yellow;">direction</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">worry</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">moves</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">takes</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">either</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">move</span> <span style="background-color:yellow;">advances</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">towards</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">come</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dead</span> <span style="background-color:yellow;">end.</span> <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">words</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">solutions</span> <span style="background-color:yellow;">require</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">moves.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">takes</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">12</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">side</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">13</span> <span style="background-color:yellow;">seconds</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">heapq</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">closedlist</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">changes</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">neighbors</span> <span style="background-color:yellow;">above</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">0.389</span> <span style="background-color:yellow;">seconds.</span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">bad</span> . </p>
<p><span style="background-color:yellow;">By</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">fCamel</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">equal</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">length</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">formation/2</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">int</span> <span style="background-color:yellow;">division</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">equal</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">gap</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">below</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">1s</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">solve</span> <span style="background-color:yellow;">this</span> </p>
<pre><code>from itertools import permutations

GAP='G'
LEFT='F'
RIGHT='B'
BEGIN=('F','F','F','F','G','B','B','B','B')
END=('B','B','B','B','G','F','F','F','F')
LENGTH=len(BEGIN)

ALL=set(permutations(BEGIN))

def NextMove(seq):
    g=seq.index(GAP)
    ret = set()
    def swap(n):
        return seq[:n]+seq[n:n+2][::-1]+seq[n+2:]
    if g>0 and seq[g-1]==LEFT:
        ret.add(swap(g-1))
    if g<LENGTH-1 and seq[g+1]==RIGHT:
        ret.add(swap(g))
    if g<LENGTH-2 and seq[g+1]==LEFT and seq[g+2]==RIGHT:
        ret.add(seq[:g]+seq[g+2:g+3]+seq[g+1:g+2]+seq[g:g+1]+seq[g+3:])
    if g>1 and seq[g-1]==RIGHT and seq[g-2]==LEFT:
        ret.add(seq[:g-2]+seq[g:g+1]+seq[g-1:g]+seq[g-2:g-1]+seq[g+1:])

    return ret

AllMoves={state:NextMove(state) for state in ALL}

def Solve(now,target):
    if now==target:
        return True
    for state in AllMoves[now]:
        if Solve(state,target):
            print(now)
            return True
    return False

Solve(BEGIN,END)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">well</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;">astray</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">went</span> <span style="background-color:yellow;">ahead</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">made</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">own.</span> <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">interest</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">simplest</span> <span style="background-color:yellow;">thing</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">possibly</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bastardized</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Dijkstra</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">open</span> <span style="background-color:yellow;">nodes</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">visited</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">arbitrary</span> <span style="background-color:yellow;">order</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">consideration</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">distance.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">means</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">come</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">heuristic</span> . </p>
<pre><code>""" notation: a game state is a string containing angle 
    brackets ('>' and '<') and blanks
 '>>> <<<'

 """

def get_moves(game):
    result = []
    lg = len(game)
    for i in range(lg):
        if game[i] == '>':
            if i < lg-1 and game[i+1] == ' ': # '> ' -> ' >'
                result.append(game[:i]+' >'+game[i+2:])
            if i < lg-2 and game[i+1] != ' ' and game[i+2] == ' ': # '>< ' -> ' <>'
                result.append(game[:i]+' '+game[i+1]+'>'+game[i+3:])
        if game[i] == '<':
            if i >= 1 and game[i-1] == ' ': # ' <' -> '< '
                result.append(game[:i-1]+'< '+game[i+1:])
            if i >= 2 and game[i-1] != ' ' and game[i-2] == ' ': # ' ><' -> '<> '
                result.append(game[:i-2]+'<'+game[i-1]+' '+game[i+1:])
    return result



def wander(start, stop):
    fringe = [start]
    paths = {}

    paths[start] = ()

    def visit(state):
      path = paths[state]
      moves = [move for move in get_moves(state) if move not in paths]
      for move in moves:
          paths[move] = paths[state] + (state,)
      fringe.extend(moves)

    while stop not in paths:
      visit(fringe.pop())

    print "still open: ", len(fringe)
    print "area covered: " , len(paths)
    return paths[stop] + (stop,)

if __name__ == "__main__":
    start = '>>>> <<<<'
    stop = '<<<< >>>>'
    print start, "   -->   ", stop
    pathway = wander(start,stop)
    print len(pathway), "moves: ", pathway
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">Replacing</span> </p>
<pre><code>class node:
    def __init__(self, a, g, p):
        self.arrangement = a
        self.g = g
        self.parent = p
</code></pre>
<p><span style="background-color:yellow;">with</span> </p>
<pre><code>node = collections.namedtuple('node', 'arrangement, g, parent')
</code></pre>
<p><span style="background-color:yellow;">dropped</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">around</span> <span style="background-color:yellow;">340-600</span> <span style="background-color:yellow;">msecs</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">11.4</span> <span style="background-color:yellow;">1.89</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">msecs</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">fCamel</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">fCamel</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">gap</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">bCamel</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">bCamel</span> <span style="background-color:yellow;">]</span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">yielded</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">output</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">obviously</span> <span style="background-color:yellow;">wont</span> <span style="background-color:yellow;">help</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">algorithmic</span> <span style="background-color:yellow;">problems</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">micro-optimizations</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">ai</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">bad</span> . </p>
<p><span style="background-color:yellow;">1</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">wrong</span> <span style="background-color:yellow;">input.</span> <span style="background-color:yellow;">There</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">extra</span> <span style="background-color:yellow;">fCamel</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">making</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">run</span> <span style="background-color:yellow;">slower</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">My</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">rather</span> <span style="background-color:yellow;">long</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">decided</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">separate</span> <span style="background-color:yellow;">answer.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">suited</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">depth-first</span> <span style="background-color:yellow;">search.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">made</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">depth-first</span> <span style="background-color:yellow;">search</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">optimized</span> <span style="background-color:yellow;">A-star</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">made</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">changes</span> <span style="background-color:yellow;">outlined</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">OP</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">instance</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;">both</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">A-star</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">depth-first</span> <span style="background-color:yellow;">search</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">17</span> <span style="background-color:yellow;">camels</span> <span style="background-color:yellow;">per</span> <span style="background-color:yellow;">side</span> <span style="background-color:yellow;">case</span> . </p>
<pre><code>A-star:  14.76 seconds
Depth-first search: 1.30 seconds
</code></pre>
<p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">depth-first</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">interested</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from sys import argv

fCamel = 'F'
bCamel = 'B'
gap = 'G'

def issolution(formlen):
    def solution(formation):
        if formation[formlen2] == gap:
            return formation.index(fCamel) == x
        return 0
    x = formlen/2 + 1
    formlen2 = formlen/2
    return solution

def solve(formation):
    def depthfirst(form, g):
        if checksolution(form):
            return [tuple(form)], g + 1
        else:
            igap = form.index(gap)
            if(igap > 1 and form[igap-2] == fCamel):
                form[igap-2],form[igap] = form[igap],form[igap-2]
                res = depthfirst(form,g+1)
                form[igap-2],form[igap] = form[igap],form[igap-2]
                if res != 0:
                    return [tuple(form)]+res[0],res[1]
            if (igap < flen - 2) and form[igap + 2] == bCamel:
                form[igap+2],form[igap] = form[igap],form[igap+2]
                res = depthfirst(form,g+1)
                form[igap+2],form[igap] = form[igap],form[igap+2]
                if res != 0:
                    return [tuple(form)]+res[0],res[1]
            if(igap > 0 and form[igap-1] == fCamel):                
                form[igap-1],form[igap] = form[igap],form[igap-1]
                res = depthfirst(form,g+1)
                form[igap-1],form[igap] = form[igap],form[igap-1]
                if res != 0:
                    return [tuple(form)]+res[0],res[1]               
            if (igap < flen - 1) and form[igap+1] == bCamel:
                form[igap+1],form[igap] = form[igap],form[igap+1]
                res = depthfirst(form,g+1)
                form[igap+1],form[igap] = form[igap],form[igap+1]
                if res != 0:
                    return [tuple(form)]+res[0],res[1]                
            return 0
    flen = len(formation)
    checksolution = issolution(flen)
    res = depthfirst(list(formation), 0)
    return res

L = lambda x: tuple([fCamel]*x + [gap] + [bCamel]*x)
print solve(L(int(argv[1])))
</code></pre>
<br />