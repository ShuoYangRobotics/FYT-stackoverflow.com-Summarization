<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1257413</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Iterate</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">pairs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">circular</span> <span style="background-color:yellow;">fashion</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> </h2><p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">iterate</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">element</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">pairs</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">wrapping</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">last</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">thought</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">unpythonic</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def pairs(lst):
    n = len(lst)
    for i in range(n):
        yield lst[i],lst[(i+1)%n]
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def pairs(lst):
    return zip(lst,lst[1:]+[lst[0]])
</code></pre>
<p><span style="background-color:yellow;">expected</span> <span style="background-color:yellow;">output</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> for i in pairs(range(10)):
    print i

(0, 1)
(1, 2)
(2, 3)
(3, 4)
(4, 5)
(5, 6)
(6, 7)
(7, 8)
(8, 9)
(9, 0)
>>>
</code></pre>
<p><span style="background-color:yellow;">any</span> <span style="background-color:yellow;">suggestions</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">pythonic</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">this</span> ? <span style="background-color:yellow;">maybe</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">predefined</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">heard</span> <span style="background-color:yellow;">about</span> ? </p>
<p><span style="background-color:yellow;">also</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">n-fold</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">triplets</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">quartets</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">etc.</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">pairs</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">interesting</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-10</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><pre><code>def pairs(lst):
    i = iter(lst)
    first = prev = i.next()
    for item in i:
        yield prev, item
        prev = item
    yield item, first
</code></pre>
<p><span style="background-color:yellow;">Work</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">non-empty</span> <span style="background-color:yellow;">sequence</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">indexing</span> <span style="background-color:yellow;">required</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">satisfactory</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def pairs(lst):
    for i in range(1, len(lst)):
        yield lst[i-1], lst[i]
    yield lst[-1], lst[0]

>>> a = list(range(5))
>>> for a1, a2 in pairs(a):
...     print a1, a2
...
0 1
1 2
2 3
3 4
4 0
</code></pre>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">kind</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">stuff</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">articles</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">wordaligned.org</span> . <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">author</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">special</span> <span style="background-color:yellow;">love</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">generators</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">coded</span> <span style="background-color:yellow;">myself</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">tuple</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">versions</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">ellegant</span> <span style="background-color:yellow;">simplicity</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">Pythonic</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">feels</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">me...</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">Pythonic</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">liner</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">zip</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">asterisk</span> <span style="background-color:yellow;">argument</span> <span style="background-color:yellow;">expansion</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">comprehensions</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">slicing</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">concatenation</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">range</span> <span style="background-color:yellow;">"</span> ? </p>
<pre><code>def ntuples(lst, n):
    return zip(*[lst[i:]+lst[:i] for i in range(n)])
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">itertools</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">efficient</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">large</span> <span style="background-color:yellow;">lists..</span> . </p>
<pre><code>from itertools import *
def ntuples(lst, n):
    return izip(*[chain(islice(lst,i,None), islice(lst,None,i)) for i in range(n)])
</code></pre>
<p><span style="background-color:yellow;">And</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">non-indexable</span> <span style="background-color:yellow;">sequences</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from itertools import *
def ntuples(seq, n):
    iseq = iter(seq)
    curr = head = tuple(islice(iseq, n))
    for x in chain(iseq, head):
        yield curr
        curr = curr[1:] + (x,)
</code></pre>
<p><span style="background-color:yellow;">Anyway</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">thanks</span> <span style="background-color:yellow;">everybody</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">suggestions</span> <span style="background-color:yellow;">!</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">mostly</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">read</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class Pairs(object):
    def __init__(self, start):
        self.i = start
    def next(self):
        p, p1 = self.i, self.i + 1
        self.i = p1
        return p, p1
    def __iter__(self):
        return self

if __name__ == "__main__":
    x = Pairs(0)
    y = 1
    while y < 20:
        print x.next()
        y += 1
</code></pre>
<p><span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>(0, 1)
(1, 2)
(2, 3)
(3, 4)
(4, 5)
(5, 6)
(6, 7)
(7, 8)
(8, 9)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">solving</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import itertools

def pair(series, n):
    s = list(itertools.tee(series, n))
    try:
        [ s[i].next() for i in range(1, n) for j in range(i)]
    except StopIteration:
        pass
    while True:
        result = []
        try:
            for j, ss in enumerate(s):
                result.append(ss.next())
        except StopIteration:
            if j == 0:
                break
            else:
                s[j] = iter(series)
                for ss in s[j:]:
                    result.append(ss.next())
        yield result
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">output</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> for a in pair(range(10), 2):
...     print a
...
[0, 1]
[1, 2]
[2, 3]
[3, 4]
[4, 5]
[5, 6]
[6, 7]
[7, 8]
[8, 9]
[9, 0]
>>> for a in pair(range(10), 3):
...     print a
...
[0, 1, 2]
[1, 2, 3]
[2, 3, 4]
[3, 4, 5]
[4, 5, 6]
[5, 6, 7]
[6, 7, 8]
[7, 8, 9]
[8, 9, 0]
[9, 0, 1]
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">infinitely</span> <span style="background-color:yellow;">cycles</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">ill</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">algorithmically</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">clear</span> . </p>
<pre><code>from itertools import tee, cycle

def nextn(iterable,n=2):
    ''' generator that yields a tuple of the next n items in iterable.
    This generator cycles infinitely '''
    cycled = cycle(iterable)
    gens = tee(cycled,n)

    # advance the iterators, this is O(n^2)
    for (ii,g) in zip(xrange(n),gens):
        for jj in xrange(ii):
            gens[ii].next()

    while True:
        yield tuple([x.next() for x in gens])


def test():
    data = ((range(10),2),
        (range(5),3),
        (list("abcdef"),4),)
    for (iterable, n) in data:
        gen = nextn(iterable,n)
        for j in range(len(iterable)+n):
            print gen.next()            


test()
</code></pre>
<p><span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>(0, 1)
(1, 2)
(2, 3)
(3, 4)
(4, 5)
(5, 6)
(6, 7)
(7, 8)
(8, 9)
(9, 0)
(0, 1)
(1, 2)
(0, 1, 2)
(1, 2, 3)
(2, 3, 4)
(3, 4, 0)
(4, 0, 1)
(0, 1, 2)
(1, 2, 3)
(2, 3, 4)
('a', 'b', 'c', 'd')
('b', 'c', 'd', 'e')
('c', 'd', 'e', 'f')
('d', 'e', 'f', 'a')
('e', 'f', 'a', 'b')
('f', 'a', 'b', 'c')
('a', 'b', 'c', 'd')
('b', 'c', 'd', 'e')
('c', 'd', 'e', 'f')
('d', 'e', 'f', 'a')
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">Even</span> <span style="background-color:yellow;">shorter</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Fortran</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">zip</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">range</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">lambda</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>group = lambda t, n: zip(*[t[i::n] for i in range(n)])

group([1, 2, 3, 3], 2)
</code></pre>
<p><span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>[(1, 2), (3, 4)]
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><pre><code>i=(range(10))

for x in len(i):
    print i[:2]
    i=i[1:]+[i[1]]
</code></pre>
<p><span style="background-color:yellow;">more</span> <span style="background-color:yellow;">pythonic</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">impossible</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">supports</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">optional</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">pair</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">-1</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import itertools

def iterrot(lst, start = 0):

    if start == 0:
        i = iter(lst)
    elif start > 0:
        i1 = itertools.islice(lst, start, None)
        i2 = itertools.islice(lst, None, start)
        i = itertools.chain(i1, i2)
    else:
        # islice doesn't support negative slice indices so...
        lenl = len(lst)
        i1 = itertools.islice(lst, lenl + start, None)
        i2 = itertools.islice(lst, None, lenl + start)
        i = itertools.chain(i1, i2)
    return i


def iterpairs(lst, start = 0):

    i = iterrot(lst, start)     

    first = prev = i.next()
    for item in i:
        yield prev, item
        prev = item
    yield prev, first


def itertrios(lst, start = 0):

    i = iterrot(lst, start)     

    first = prevprev = i.next()
    second = prev = i.next()
    for item in i:
        yield prevprev, prev, item
        prevprev, prev = prev, item

    yield prevprev, prev, first
    yield prev, first, second
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">9</span> </b><br /><pre><code>[(i,(i+1)%len(range(10))) for i in range(10)]
</code></pre>
<p><span style="background-color:yellow;">replace</span> <span style="background-color:yellow;">range</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> . </p>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">circular</span> <span style="background-color:yellow;">indexing</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>a[i%len(a)] 
</code></pre>
<br />