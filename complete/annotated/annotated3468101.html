<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-3468101</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Java</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Which</span> <span style="background-color:yellow;">method/class</span> <span style="background-color:yellow;">invoked</span> <span style="background-color:yellow;">mine</span> ? </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">internal</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">print</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">method/class</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">invoked</span> <span style="background-color:yellow;">it</span> . </p>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">My</span> <span style="background-color:yellow;">assumption</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">anything</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">method..</span> <span style="background-color:yellow;"></span> </p>
<p><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">programming</span> <span style="background-color:yellow;">languages</span> ? </p>
<p><span style="background-color:yellow;">EDIT</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Thanks</span> <span style="background-color:yellow;">guys</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">JavaScript</span> ? <span style="background-color:yellow;">python</span> ? <span style="background-color:yellow;">C</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">+</span> ? </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-10</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">specific</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Java</span> . </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">Thread.currentThread</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">getStackTrace</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">array</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">StackTraceElements</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">2nd</span> <span style="background-color:yellow;">element</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">array</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">calling</span> <span style="background-color:yellow;">method</span> . </p>
<p><span style="background-color:yellow;">Example</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>public void methodThatPrintsCaller() {
    StackTraceElement elem = Thread.currentThread.getStackTrace()[2];
    System.out.println(elem);

    // rest of you code
}
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">print</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">trace</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">hunting</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">use</span> </p>
<pre><code>Thread.dumpStack();
</code></pre>
<p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">API</span> <span style="background-color:yellow;">doc</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">Justin</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">down</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wanted</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">mention</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">special</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">demonstrated</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">snippit</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import java.util.Comparator;

public class WhoCalledMe {

    public static void main(String[] args) {
        ((Comparator)(new SomeReifiedGeneric())).compare(null, null);
        new WhoCalledMe().new SomeInnerClass().someInnerMethod();
    }

    public static StackTraceElement getCaller() {
        //since it's a library function we use 3 instead of 2 to ignore ourself
        return Thread.currentThread().getStackTrace()[3];
    }

    private void somePrivateMethod() {
        System.out.println("somePrivateMethod() called by: " + WhoCalledMe.getCaller());
    }

    private class SomeInnerClass {
        public void someInnerMethod() {
            somePrivateMethod();
        }
    }
}

class SomeReifiedGeneric implements Comparator<SomeReifiedGeneric> {
    public int compare(SomeReifiedGeneric o1, SomeReifiedGeneric o2) {
        System.out.println("SomeRefiedGeneric.compare() called by: " + WhoCalledMe.getCaller());
        return 0;
    }
}
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">prints</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>SomeRefiedGeneric.compare() called by: SomeReifiedGeneric.compare(WhoCalledMe.java:1)
somePrivateMethod() called by: WhoCalledMe.access$0(WhoCalledMe.java:14)
</code></pre>
<p><span style="background-color:yellow;">Even</span> <span style="background-color:yellow;">though</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">called</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">directly</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">main</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">SomeInnerClass.someInnerMethod</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">These</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">transparent</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">made</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">methods</span> . </p>
<ul><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">calling</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">bridge</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">generic</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">added</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">compiler</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">ensure</span> <span style="background-color:yellow;">SomeReifiedGeneric</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">raw</span> <span style="background-color:yellow;">type</span> . <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">calling</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">private</span> <span style="background-color:yellow;">member</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">WhoCalledMe</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">inner</span> <span style="background-color:yellow;">class.</span> <span style="background-color:yellow;">To</span> <span style="background-color:yellow;">accomplish</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">compiler</span> <span style="background-color:yellow;">adds</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">synthetic</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">go-between</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">override</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">visibility</span> <span style="background-color:yellow;">problems</span> . </ul>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">the</span> <span style="background-color:yellow;">sequence</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">calls</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">located</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">stack.</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//stackoverflow.com/questions/1069066/get-current-stack-trace-in-java</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">previous</span> <span style="background-color:yellow;">item</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Since</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">asked</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">languages</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">Tcl</span> <span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">command</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">info</span> <span style="background-color:yellow;">level</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">lets</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">examine</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">stack.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">info</span> <span style="background-color:yellow;">level</span> <span style="background-color:yellow;">-1</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">caller</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">current</span> <span style="background-color:yellow;">procedure</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">current</span> <span style="background-color:yellow;">procedure</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">Yes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">possible</span> . </p>
<p><span style="background-color:yellow;">Have</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">Thread.getStackTrace</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">deals</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">view</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">javascript</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">traceback</span> <span style="background-color:yellow;">module.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">examples</span> <span style="background-color:yellow;">there</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">traceback</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">inspect</span> <span style="background-color:yellow;">modules.</span> <span style="background-color:yellow;">These</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">modules</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">shield</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">details</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">interpreter</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">differ</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">today</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">IronPython</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">Jython</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">future.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">modules</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">under</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">interpreter</span> <span style="background-color:yellow;">today</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">however</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">sys._getframe</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">particular</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">sys._getframe</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">.f_code.co_name</span> <span style="background-color:yellow;">provides</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">information</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">9</span> </b><br /><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">inspect</span> <span style="background-color:yellow;">module</span> . <span style="background-color:yellow;">Getting</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">name</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">name</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">below</span> . </p>
<p><span style="background-color:yellow;">Getting</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">itself</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">work.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">__import__</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">caller</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">module.</span> <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">must</span> <span style="background-color:yellow;">somehow</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">filename</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">valid</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">name</span> . </p>
<pre><code>import inspect

def find_caller():
    caller_frame = inspect.currentframe().f_back
    print "Called by function:", caller_frame.f_code.co_name
    print "In file           :", caller_frame.f_code.co_filename
    #Alternative, probably more portable way
    #print inspect.getframeinfo(caller_frame)

def foo():
    find_caller()

foo()
</code></pre>
<br />