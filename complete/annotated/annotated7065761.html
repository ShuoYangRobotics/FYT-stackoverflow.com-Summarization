<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-7065761</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">substract</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">datetime.time</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">template,and</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">format</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">hour,minutes</span> </h2><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">django</span> <span style="background-color:yellow;">app</span> <span style="background-color:yellow;">,I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">sending</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Entry</span> <span style="background-color:yellow;">objects</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">template.Each</span> <span style="background-color:yellow;">Entry</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">datetime.time</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">TimeFields</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">form</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">.While</span> <span style="background-color:yellow;">listing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Entry</span> <span style="background-color:yellow;">objects,I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">show</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">entry.Putting</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">field</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">seemed</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">reduntant</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">,start</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">were</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">there</span> </p>
<p><span style="background-color:yellow;">model</span> </p>
<pre><code>class Entry(models.Model):
    title = models.CharField(unique=True,max_length=50)
    starttime=models.TimeField(null=True)
    endtime=models.TimeField(null=True)
...
</code></pre>
<p><span style="background-color:yellow;">template</span> </p>
<pre><code>{% for entry in object_list %}
<tr> 
  <td> {{entry.title}} </td>
  <td> {{entry.starttime}}</td>
  <td> {{entry.endtime}}</td>
  <td> want to show duration here </td>
{%endfor %}
</code></pre>
<p><span style="background-color:yellow;">1.</span> <span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">filter</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">datetime.time</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">calculate</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">seconds</span> . <span style="background-color:yellow;">ie,</span> </p>
<pre><code>given
 t1=datetime.time(2,30,50) and
 t2=datetime.time(3,00,50)
should show
30 minutes
</code></pre>
<p><span style="background-color:yellow;">2.</span> <span style="background-color:yellow;">Also,is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">filter,that</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">show</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">given</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">minutes</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">hour,minutes</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">minutes</span> <span style="background-color:yellow;">value</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">greater</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">60</span> </p>
<p><span style="background-color:yellow;">ie,</span> </p>
<pre><code>if duration is 50 minutes ==> 50 minutes
if duration is 150 minutes ==> 2 hours,30 minutes
</code></pre>
<p><span style="background-color:yellow;">update</span> </p>
<pre><code>def diff_in_time(start,end):
    startdelta=datetime.timedelta(hours=start.hour,minutes=start.minute,seconds=start.second)
    enddelta=datetime.timedelta(hours=end.hour,minutes=end.minute,seconds=end.second)
    return (enddelta-startdelta).seconds/60
</code></pre>
<p><span style="background-color:yellow;">when</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">sample</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;">,it</span> <span style="background-color:yellow;">gave</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">expected</span> <span style="background-color:yellow;">result</span> </p>
<pre><code>#start 11:35:00 pm
#end   00:05:00 am
start= datetime.time(23,35,00)
end = datetime.time(00,05,00)
print diff_in_time(start,end)

==> 30 minutes

#start 00:35:00 am
#end   01:35:00 am
start= datetime.time(00,35,00)
end = datetime.time(01,35,00)
print diff_in_time(start,end)

==>60 minutes
</code></pre>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-6</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">got</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">problem.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">able</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">compare</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">times.</span> <span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">11pm</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">1am</span> ? <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">depends</span> <span style="background-color:yellow;">whether</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">they</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">day</span> . </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">either</span> <span style="background-color:yellow;">store</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">datetime</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">else</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">represents</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">relatively</span> <span style="background-color:yellow;">absolute</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">turn</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">datetime</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def todatetime(time):
    return datetime.datetime.today().replace(hour=time.hour, minute=time.minute, second=time.second, 
                                             microsecond=time.microsecond, tzinfo=time.tzinfo)

def timestodelta(starttime, endtime):
    return todatetime(endtime) - todatetime(starttime)
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">fail</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">give</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">expected</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">calls</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">today</span> <span style="background-color:yellow;">span</span> <span style="background-color:yellow;">midnight</span> . </p>
<p><span style="background-color:yellow;">Then</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">app</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">DurationField</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">stores</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">timedelta</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">store</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">database</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">display</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">apart</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">end-time</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">later</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">24</span> <span style="background-color:yellow;">hours</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start-time</span> . </p>
<p><span style="background-color:yellow;">Suppose</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">start-time</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">9</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">end-time</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">13</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">were</span> <span style="background-color:yellow;">taken</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">August</span> <span style="background-color:yellow;">15</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">9</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">August</span> <span style="background-color:yellow;">17</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">13</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">sense</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">obtain</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">delta</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">knowing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">days</span> <span style="background-color:yellow;">15</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">17</span> . </p>
<p><span style="background-color:yellow;">Hence</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">:</span> </p>
<ul><span style="background-color:yellow;">either</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">separated</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">24</span> <span style="background-color:yellow;">hours</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">said</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">must</span> <span style="background-color:yellow;">move</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">datetime</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">objects</span> <span style="background-color:yellow;">either</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">24</span> <span style="background-color:yellow;">hours</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start-time</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">end-time</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">simple</span> . </ul>
<p><span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> </p>
<p><span style="background-color:yellow;">Let</span> <span style="background-color:yellow;">us</span> <span style="background-color:yellow;">examine</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">case</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">start-time</span> <span style="background-color:yellow;">11</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">30</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">end-time..</span> <span style="background-color:yellow;">12</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">35</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">evidently</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">hour</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">minutes</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">start-time</span> <span style="background-color:yellow;">11</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">30</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">end-time..</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">35</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">00</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">morning</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">morning</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">day</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">day</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">24</span> <span style="background-color:yellow;">hours</span> <span style="background-color:yellow;">later</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">reasoning</span> <span style="background-color:yellow;">applies</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">afternoon</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">apparently</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">day</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">afternoon</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">morning</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">day</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">morning</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">afternoon</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">depends</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">24</span> <span style="background-color:yellow;">hours</span> <span style="background-color:yellow;">later</span> . </p>
<h3><span style="background-color:yellow;">1</span> <span style="background-color:yellow;"></span> </h3>
<p><span style="background-color:yellow;">So</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">attributes</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">sufficient</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">deduct</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">difference</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def difft(start,end):
    a,b,c,d = start.hour, start.minute, start.second, start.microsecond
    w,x,y,z = end.hour, end.minute, end.second, end.microsecond
    delt = (w-a)*60 + (x-b) + (y-c)/60. + (z-d)/60000000
    return delt + 1440 if delt<0 else delt
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">display</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">from</span> <span style="background-color:yellow;">datetime</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">time</span> </p>
<pre><code>def difft(start,end):
    a,b,c,d = start.hour, start.minute, start.second, start.microsecond
    w,x,y,z = end.hour, end.minute, end.second, end.microsecond
    delt = (w-a)*60 + (x-b) + (y-c)/60. + (z-d)/60000000

    D = '%sh %smn %ss %sms - %sh %smn %ss %sms == '
    ft = '%s + 1440 = %s  (1440 = 24x60mn)'
    return D % (w,x,y,z,a,b,c,d) +( ft % (delt, delt+1440) if delt<0 else str(delt))


print difft(time(11,30,0),time(12,35,0))
print difft(time(11,30,0),time(10,35,0))
print
print difft(time(20,40,0),time(22,41,0))
print difft(time(20,40,0),time(18,41,0))
</code></pre>
<p><span style="background-color:yellow;">result</span> </p>
<pre><code>12h 35mn 0s 0ms - 11h 30mn 0s 0ms == 65.0
10h 35mn 0s 0ms - 11h 30mn 0s 0ms == -55.0 + 1440 = 1385.0  (1440 = 24x60mn)

22h 41mn 0s 0ms - 20h 40mn 0s 0ms == 121.0
18h 41mn 0s 0ms - 20h 40mn 0s 0ms == -119.0 + 1440 = 1321.0  (1440 = 24x60mn)
</code></pre>
<h3><span style="background-color:yellow;">2</span> <span style="background-color:yellow;"></span> </h3>
<p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">obtain</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">durations</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">readable</span> <span style="background-color:yellow;">format</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def difft2(start,end):
    a,b,c,d = start.hour, start.minute, start.second, start.microsecond
    w,x,y,z = end.hour, end.minute, end.second, end.microsecond
    delt = (w-a)*60 + (x-b) + (y-c)/60. + (z-d)/60000000.
    if delt < 0:
        delt += 1440

    hh,rem = divmod(delt,60)
    hh = int(hh)
    mm = int(rem)
    rem = (rem - mm)*60
    ss = int(rem)
    ms = (rem - ss)*1000000
    ms = int(ms)

    SS = '%sh %smn %ss %sms - %sh %smn %ss %sms == %sh %smn %ss %sms'
    return SS % (w,x,y,z,a,b,c,d,hh,mm,ss,ms)



print difft2(time(11,30,0),time(12,35,45,478129))
print difft2(time(11,30,45,11),time(10,35,45,12))
print
print difft2(time(20,40,0),time(22,41,0))
print difft2(time(20,40,0),time(18,41,0))
</code></pre>
<p><span style="background-color:yellow;">result</span> </p>
<pre><code>12h 35mn 45s 478129ms - 11h 30mn 0s 0ms == 1h 5mn 45s 478128ms
10h 35mn 45s 12ms - 11h 30mn 45s 11ms == 23h 5mn 0s 1ms

22h 41mn 0s 0ms - 20h 40mn 0s 0ms == 2h 1mn 0s 0ms
18h 41mn 0s 0ms - 20h 40mn 0s 0ms == 22h 1mn 0s 0ms
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">1</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">Probably</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">create</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;">tag</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Timedelta</span> <span style="background-color:yellow;">template</span> <span style="background-color:yellow;">tag</span> </p>
<p><span style="background-color:yellow;">2</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">Again</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">couldnt</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">anything</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this.</span> <span style="background-color:yellow;">But</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">custom</span> <span style="background-color:yellow;">tag</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> . <span style="background-color:yellow;">Something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def round_to_hours(minutes):
    return str(minutes/60) + ' hours and ' + str(minutes%60) + ' minutes'
register.filter(round_to_hours)
</code></pre>
<p><span style="background-color:yellow;">Of</span> <span style="background-color:yellow;">course</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">There</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">improve</span> . </p>
<p><span style="background-color:yellow;">As</span> <span style="background-color:yellow;">agf</span> <span style="background-color:yellow;">pointed</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">timedelta</span> <span style="background-color:yellow;">objects</span> . <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">assume</span> <span style="background-color:yellow;">both</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">day</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>dummydate = datetime.date(1999,1,1)
delta = datetime.combine(dummydate, time1) - datetime.combine(dummydate, time2)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Represent</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">property</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from datetime import timedelta

@property
def duration(self):
    end = timedelta(self.endtime.hour, self.endtime.minute, self.endtime.second)
    start = timedelta(self.starttime.hour, self.starttime.minute, self.starttime.second)
    return end - start
</code></pre>
<p><span style="background-color:yellow;">Which</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">timedelta</span> <span style="background-color:yellow;">object.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">format</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">templatetag</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">etc</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Perhaps</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">Look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time_delta_total_seconds.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">lib</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">complicated</span> <span style="background-color:yellow;">event</span> <span style="background-color:yellow;">scheduling</span> <span style="background-color:yellow;">requirements</span> . </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//code.google.com/p/django-swingtime/source/browse/swingtime/utils.py</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">duration</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">Entry</span> <span style="background-color:yellow;">model</span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">straight</span> <span style="background-color:yellow;">forward</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">access</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">template</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">model</span> <span style="background-color:yellow;">field</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">{</span> <span style="background-color:yellow;">{</span> <span style="background-color:yellow;">entry.duration</span> <span style="background-color:yellow;">}</span> <span style="background-color:yellow;">}</span> . </p>
<pre><code>class Entry(models.Model):
    title = models.CharField(unique=True,max_length=50)
    starttime=models.TimeField(null=True)
    endtime=models.TimeField(null=True)

    def duration(self):
        # perform duration calculation here
        return duration_display
</code></pre>
<br />