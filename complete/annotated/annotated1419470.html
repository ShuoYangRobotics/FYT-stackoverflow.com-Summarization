<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1419470</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">__init__</span> <span style="background-color:yellow;">setattr</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">arguments</span> ? </h2><p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">often</span> <span style="background-color:yellow;">__init__</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def __init__(self, ivar1, ivar2, ivar3):
    self.ivar1 = ivar1
    self.ivar2 = ivar2
    self.ivar3 = ivar3
</code></pre>
<p><span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">someway</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">turn</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">resorting</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">args</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">kwargs</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">setattr</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">instance</span> <span style="background-color:yellow;">variables</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">name</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">parameter</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">arugment</span> <span style="background-color:yellow;">passed</span> ? <span style="background-color:yellow;">And</span> <span style="background-color:yellow;">maybe</span> <span style="background-color:yellow;">slice</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">least</span> <span style="background-color:yellow;">slice</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">self.self</span> . </p>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">guess</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">hold</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">name</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">value</span> <span style="background-color:yellow;"></span> </p>
<p><span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def __init__(self, ivar1, ivar2, ivar3, optional=False):
    for k, v in makedict(self.__class__.__init__.__args__): # made up __args__
        setattr(self, k, v)
</code></pre>
<p><span style="background-color:yellow;">Thanks</span> <span style="background-color:yellow;">!</span> </p>
<p><span style="background-color:yellow;">Responding</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Unknown</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Class A(object):
    def __init__(self, length, width, x):
        self.__dict__.update(dict([(k, v) for k, v in locals().iteritems() if k != 'self']))
</code></pre>
<p><span style="background-color:yellow;">or</span> </p>
<pre><code>Class A(object):
    def __init__(self, length, width, x):
        self.__dict__.update(locals())
        del self.__dict__['self']
</code></pre>
<p><span style="background-color:yellow;">Not</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">bad.</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-8</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">they</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">specified</span> <span style="background-color:yellow;">individually</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">signature.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">inspect</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">frame</span> <span style="background-color:yellow;">hacks</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">uglier</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">simply</span> <span style="background-color:yellow;">spelling</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">done</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">go.</span> <span style="background-color:yellow;">Yes</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">ugly</span> <span style="background-color:yellow;">evil</span> <span style="background-color:yellow;">hack.</span> <span style="background-color:yellow;">Yes</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">needs</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">__dict__</span> <span style="background-color:yellow;">variable.</span> <span style="background-color:yellow;">But</span> <span style="background-color:yellow;">hey</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">neat</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">liner</span> <span style="background-color:yellow;">!</span> </p>
<pre><code>def __init__(self):
    self.__dict__.update(locals())
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">constructor</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">type</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">arguments</span> . </p>
<pre><code>class test(object):
    def __init__(self, a, b, foo, bar=5)...

a = test(1,2,3)
dir(a)

['__class__', '__delattr__', '__dict__', '__doc__', '__format__', '__getattribute__', '__hash__', '__init__', '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__sizeof__', '__str__', '__subclasshook__', '__weakref__', 'a', 'b', 'foo', 'bar', 'self']
</code></pre>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">include</span> <span style="background-color:yellow;">self</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">easily</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;">update</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">ignores</span> <span style="background-color:yellow;">self</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">inspect.getargspec</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">encapsulate</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">decorator.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">lookup</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">optional</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">keyword</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">tricky</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def inits_args(func):
    """Initializes object attributes by the initializer signature"""
    argspec = inspect.getargspec(func)
    argnames = argspec.args[1:]
    defaults = dict(zip(argnames[-len(argspec.defaults):], argspec.defaults))
    @functools.wraps(func)
    def __init__(self, *args, **kwargs):
        args_it = iter(args)
        for key in argnames:
            if key in kwargs:
                value = kwargs[key]
            else:
                try:
                    value = args_it.next()
                except StopIteration:
                    value = defaults[key]
            setattr(self, key, value)
        func(self, *args, **kwargs)
    return __init__
</code></pre>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class Foo(object):
    @inits_args
    def __init__(self, spam, eggs=4, ham=5):
        print "Foo(%r, %r, %r)" % (self.spam, self.eggs, self.ham)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Try</span> <span style="background-color:yellow;">inspect.getargspec</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>In [31]: inspect.getargspec(C.__init__)

Out[31]: ArgSpec(args=['self', 'ivar1', 'ivar2', 'ivar3', 'optional'],

                 varargs=None, keywords=None, defaults=(False,))
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">namedtuple</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2.6</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">collections</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">introspection</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">going</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">longer</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">replace.</span> <span style="background-color:yellow;">Especially</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">handling</span> <span style="background-color:yellow;">kw</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">short</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">improved</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">Unknowns</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> class Foo:
...   def __init__(self, labamba, **kw):
...       params = locals().copy()
...       del params['self']
...       if 'kw' in params:
...           params.update(params['kw'])
...           del params['kw']
...       self.__dict__.update(params)
</code></pre>
<p><span style="background-color:yellow;">But</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">ugly</span> <span style="background-color:yellow;">hack</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">making</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">readable</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">particular</span> <span style="background-color:yellow;">reason</span> <span style="background-color:yellow;">except</span> <span style="background-color:yellow;">laziness</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it.</span> <span style="background-color:yellow;">And</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">often</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">classes</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">5-6</span> <span style="background-color:yellow;">init</span> <span style="background-color:yellow;">parameters</span> ? </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">form</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">long</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">both</span> <span style="background-color:yellow;">copy-pasteable</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">sub-classable</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class DynamicInitClass(object):
      __init_defargs=('x',)
      def __init__(self,*args,**attrs):
        for idx,val in enumerate(args): attrs[self.__init_defargs[idx]]=val
        for key,val in attrs.iteritems(): setattr(self,key,val)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">deriving</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">special</span> <span style="background-color:yellow;">class</span> ? <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">explicit</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">flexible</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class InitMe:
    def __init__(self, data):
        if 'self' in data:
             data = data.copy()
             del data['self']
        self.__dict__.update(data)


class MyClassA(InitMe):
    def __init__(self, ivar1, ivar2, ivar3 = 'default value'):
        super().__init__(locals())


class MyClassB(InitMe):
    def __init__(self, foo):
        super().__init__({'xxx': foo, 'yyy': foo, 'zzz': None})
# or    super().__init__(dict(xxx=foo, yyy=foo, zzz=None))

class MyClassC(InitMe):
    def __init__(self, foo, **keywords):
        super().__init__(keywords)
</code></pre>
<br />