<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-53428</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">What</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">solutions</span> ? </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">evaluating</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">CherryPy</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">project</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">basically</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">javascript</span> <span style="background-color:yellow;">front-end</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">client-side</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">browser</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">talks</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">web</span> <span style="background-color:yellow;">service</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">back-end.</span> <span style="background-color:yellow;">So</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">fast</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">lightweight</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">back-end</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">speaks</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">PostgreSQL</span> <span style="background-color:yellow;">db</span> <span style="background-color:yellow;">via</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">browser</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">built-in.</span> <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">i.e.</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">features</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">slower</span> ? <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">Anyone</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">experience</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">solutions</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">compare</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">contrast</span> <span style="background-color:yellow;">their</span> <span style="background-color:yellow;">features</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">functionality</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">speed</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">efficiency</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">etc.</span> ? </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-13</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">full-featured</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">powerful</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">DataMapper</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">cleaner</span> <span style="background-color:yellow;">syntax</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">easier</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ActiveRecord</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;">differences</span> . </p>
<p><span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">declarative</span> <span style="background-color:yellow;">layer</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">hides</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">complexity</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">ActiveRecord-style</span> <span style="background-color:yellow;">syntax</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">ORM</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">worry</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">being</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">heavy.</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">decoupled</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">having</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">rest</span> . </p>
<p><span style="background-color:yellow;">That</span> <span style="background-color:yellow;">said</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">were</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">CherryPy</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">web</span> <span style="background-color:yellow;">layer</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">needed</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">opt</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">SQLAlchemy</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Storm</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">arguably</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">simplest</span> <span style="background-color:yellow;">API</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>  class Foo:
      __storm_table__ 'foos'
      id = Int(primary=True)


  class Thing:
      __storm_table__ 'things'
      id = Int(primary=True)
      name = Unicode()
      description = Unicode()
      foo_id = Int()
      foo = Reference(foo_id, Foo.id)

  db = create_database('sqlite:')
  store = Store(db)

  foo = Foo()
  store.add(foo)
  thing = Thing()
  thing.foo = foo
  store.add(thing)
  store.commit()
</code></pre>
<p><span style="background-color:yellow;">And</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">makes</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">painless</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">drop</span> <span style="background-color:yellow;">down</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">raw</span> <span style="background-color:yellow;">SQL</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>store.execute('UPDATE bars SET bar_name=? WHERE bar_id like ?', []) 
store.commit()
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">usually</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">SQLAlchemy</span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">powerful</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">mature</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">ORM</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">planning</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">CherryPy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">dejavu</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">Robert</span> <span style="background-color:yellow;">Brewer</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">guy</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">current</span> <span style="background-color:yellow;">CherryPy</span> <span style="background-color:yellow;">project</span> <span style="background-color:yellow;">leader</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">personally</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">people</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">love</span> <span style="background-color:yellow;">it</span> . </p>
<p><span style="background-color:yellow;">SQLObject</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">easier</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">powerful</span> . </p>
<p><span style="background-color:yellow;">Personally</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">unless</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">planning</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">writing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">entire</span> <span style="background-color:yellow;">project</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">me</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">lightweight</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">familiar</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">django-style</span> <span style="background-color:yellow;">declarative</span> <span style="background-color:yellow;">models</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">peewee</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//charlesleifer.com/docs/peewee/</span> </p>
<p><span style="background-color:yellow;">Example</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class Blog(Model):
    name = CharField()

class Entry(Model):
    blog = ForeignKeyField(Blog)
    title = CharField()
    body = TextField()
    pub_date = DateTimeField(default=datetime.datetime.now)

# query it like django
Entry.filter(blog__name='Some great blog')

# or programmatically for finer-grained control
Entry.select().join(Blog).where(name='Some awesome blog')
</code></pre>
<p><span style="background-color:yellow;">Check</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">docs</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">examples</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">declarative</span> <span style="background-color:yellow;">extension</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">becoming</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">0.5</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">provides</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">interface</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">Storm.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">integrates</span> <span style="background-color:yellow;">seamlessly</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">classes/tables</span> <span style="background-color:yellow;">configured</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">datamapper</span> <span style="background-color:yellow;">style</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Base = declarative_base()

class Foo(Base):
      __tablename__ 'foos'
      id = Column(Integer, primary_key=True)

class Thing(Base):
    __tablename__ = 'things'

    id = Column(Integer, primary_key=True)
    name = Column(Unicode)
    description = Column(Unicode)
    foo_id = Column(Integer, ForeignKey('foos.id'))
    foo = relation(Foo)

engine = create_engine('sqlite://')

Base.metadata.create_all(engine)  # issues DDL to create tables

session = sessionmaker(bind=engine)()

foo = Foo()
session.add(foo)
thing = Thing(name='thing1', description='some thing')
thing.foo = foo  # also adds Thing to session
session.commit()
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">We</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">Elixir</span> <span style="background-color:yellow;">alongside</span> <span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">liked</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">far.</span> <span style="background-color:yellow;">Elixir</span> <span style="background-color:yellow;">puts</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">layer</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">top</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">makes</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">ActiveRecord</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">counter</span> <span style="background-color:yellow;">parts</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">Autumn</span> </p>
<p><span style="background-color:yellow;">Storm</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">powerful.</span> <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">thread</span> <span style="background-color:yellow;">safe</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">keep</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">mind</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">working</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">cherrypy</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">thread-pool</span> <span style="background-color:yellow;">mode</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">canonical</span> <span style="background-color:yellow;">reference</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">high-level</span> <span style="background-color:yellow;">database</span> <span style="background-color:yellow;">interaction</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//wiki.python.org/moin/HigherLevelDatabaseProgramming</span> </p>
<p><span style="background-color:yellow;">From</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">looks</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">Dejavu</span> <span style="background-color:yellow;">implements</span> <span style="background-color:yellow;">Martin</span> <span style="background-color:yellow;">Fowler</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">DataMapper</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;">fairly</span> <span style="background-color:yellow;">abstractly</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">9</span> </b><br /><p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">conceivable</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">unused</span> <span style="background-color:yellow;">features</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">give</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;">penalty.</span> <span style="background-color:yellow;">Might</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">come</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">handy</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">ever</span> <span style="background-color:yellow;">decide</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">upscale</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">project</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">10</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">Storm</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">SQLite</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">small</span> <span style="background-color:yellow;">project</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">happy</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">until</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">added</span> <span style="background-color:yellow;">multiprocessing.</span> <span style="background-color:yellow;">Trying</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">database</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">multiple</span> <span style="background-color:yellow;">processes</span> <span style="background-color:yellow;">resulted</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">Database</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">locked</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">exception.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">switched</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">worked</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">problems</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">11</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">introduce</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">option</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Quick</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">Its</span> <span style="background-color:yellow;">features</span> <span style="background-color:yellow;">:</span> </p>
<ul><span style="background-color:yellow;">quick</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">play</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">minute.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">straightforward</span> . <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">SQL</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">including</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">create</span> <span style="background-color:yellow;">table</span> <span style="background-color:yellow;">xxx</span> <span style="background-color:yellow;">...</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">ones</span> . <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">core</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">counts</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">230</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">including</span> <span style="background-color:yellow;">comments</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">pydocs</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">bugs</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">nowhere</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">hide</span> . <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">released</span> <span style="background-color:yellow;">under</span> <span style="background-color:yellow;">BSD</span> <span style="background-color:yellow;">license</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">distribute</span> <span style="background-color:yellow;">it</span> . <span style="background-color:yellow;">powerful</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">built</span> <span style="background-color:yellow;">upon</span> <span style="background-color:yellow;">SQLAlchemy</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">compromise</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">power</span> . <span style="background-color:yellow;">flexible</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">raw</span> <span style="background-color:yellow;">sql</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">improve</span> <span style="background-color:yellow;">performance</span> . <span style="background-color:yellow;">support</span> <span style="background-color:yellow;">multiple</span> <span style="background-color:yellow;">databases</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">map</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">models</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">databases</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">difficulty</span> . <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">taking</span> <span style="background-color:yellow;">advantage</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">metaclass</span> <span style="background-color:yellow;">reduces</span> <span style="background-color:yellow;">data</span> <span style="background-color:yellow;">modeling</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">dramatically</span> . <span style="background-color:yellow;">long-term</span> <span style="background-color:yellow;">maintained</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Continous</span> <span style="background-color:yellow;">efforts</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">taking</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">improve</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">maintain</span> <span style="background-color:yellow;">it</span> . </ul>
<p><span style="background-color:yellow;">Hello</span> <span style="background-color:yellow;">World</span> <span style="background-color:yellow;">Example</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from quick_orm.core import Database
from sqlalchemy import Column, String

class User(object):
    __metaclass__ = Database.DefaultMeta
    name = Column(String(30))

if __name__ == '__main__':
    database = Database('sqlite://')
    database.create_tables()

    user = User(name = 'Hello World')
    database.session.add_then_commit(user)

    user = database.session.query(User).get(1)
    print 'My name is', user.name
</code></pre>
<p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">comprehensive</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from quick_orm.core import Database
from sqlalchemy import Column, String, Text

class User(object):
    __metaclass__ = Database.DefaultMeta
    name = Column(String(70))

@Database.foreign_key(User)
class Post(object):
    __metaclass__ = Database.DefaultMeta
    content = Column(Text)

class Question(Post):
    title = Column(String(70))

@Database.foreign_key(Question)
class Answer(Post):
    pass

@Database.foreign_key(Post)
class Comment(Post):
    pass

if __name__ == '__main__':
    database = Database('sqlite://')
    database.create_tables()

    user1 = User(name = 'Tyler Long')
    user2 = User(name = 'Peter Lau')

    question = Question(user = user1, title = 'What is Quick ORM ?', content = 'What is Quick ORM ?')
    answer = Answer(user = user1, question = question,
        content = 'Quick ORM is a python ORM which enables you to get started in less than a minute!')
    comment1 = Comment(user = user2, content = 'good question', post = question)
    comment2 = Comment(user = user2, content = 'nice answer', post = answer)
    database.session.add_all_then_commit([question, answer, comment1, comment2])

    question = database.session.query(Question).get(1)
    print 'new comment on question:', question.comments.first().content
    print 'new comment on answer:', question.answers.first().comments.first().content

    # Could the last two lines work as you expected? Try it yourself!
    user = database.session.query(User).filter_by(name = 'Peter Lau').one()
    print 'Peter Lau has posted {0} comments'.format(user.comments.count())
</code></pre>
<p><span style="background-color:yellow;">Check</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">project</span> <span style="background-color:yellow;">page</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">examples</span> . </p>
<p><span style="background-color:yellow;">Disclaimer</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">author</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Quick</span> <span style="background-color:yellow;">ORM</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">12</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">SQLAlchemy</span> </p>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">models</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">wrok</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">bad</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">all</span> . </p>
<p><span style="background-color:yellow;">Django</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">sqlalchemy</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">ORM</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">itself</span> <span style="background-color:yellow;">lets</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">full</span> <span style="background-color:yellow;">power</span> </p>
<p><span style="background-color:yellow;">here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">small</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">creating</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">selecting</span> <span style="background-color:yellow;">orm</span> <span style="background-color:yellow;">objects</span> </p>
<pre><code>>>> ed_user = User('ed', 'Ed Jones', 'edspassword')
>>> session.add(ed_user)
>>> our_user = session.query(User).filter_by(name='ed').first() 
>>> our_user
    <User('ed','Ed Jones', 'edspassword')>
</code></pre>
<br />