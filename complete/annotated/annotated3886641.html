<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-3886641</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">pattern</span> </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">help</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">wanted</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">tutorial</span> <span style="background-color:yellow;">said</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>  # type can be either create or update or .. 
  message = { 'create':msg(some_data),
              'update':msg(other_data)
              # can have more
            }

  return message(type)
</code></pre>
<p><span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">working</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">some_data</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">other_data</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">None</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">raise</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">error</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">none</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">put</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">condition</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">executed</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">filling</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">unlike</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">pattern</span> <span style="background-color:yellow;">who</span> <span style="background-color:yellow;">usually</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">programming</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">execute</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">unless</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">match</span> . </p>
<p><span style="background-color:yellow;">is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">elif</span> <span style="background-color:yellow;">..</span> . </p>
<p><span style="background-color:yellow;">Update</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">thank</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">replies</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> </p>
<pre><code>message = { 'create': "blabla %s" % msg(some_data),
            'update': "blabla %s" % msg(other_data)
            'delete': "blabla %s" % diff(other_data, some_data)
           }
</code></pre>
<p><span style="background-color:yellow;">so</span> <span style="background-color:yellow;">lambda</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">called</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">real</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">maybe</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">pattern</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-9</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><pre><code>message = { 'create':msg(some_data or ''),
            'update':msg(other_data or '')
            # can have more
          }
</code></pre>
<p><span style="background-color:yellow;">Better</span> <span style="background-color:yellow;">yet</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">prevent</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">being</span> <span style="background-color:yellow;">executed</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">fill</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>message = { 'create':(msg,some_data),
            'update':(msg,other_data),
            # can have more
          }
func,data=message[msg_type]
func(data)
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">now</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">define</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">sensible</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">deal</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">argument</span> <span style="background-color:yellow;">equal</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">None</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def msg(data):
    if data is None: data=''
    ...
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">sounds</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">complicating</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">simple</span> ? </p>
<pre><code>if mytype == 'create':
    return msg(some_data)
elif mytype == 'update':
    return msg(other_data)
else:
    return msg(default_data)
</code></pre>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">dicts</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">references</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> . <span style="background-color:yellow;">Sometimes</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">boring</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">explicit</span> <span style="background-color:yellow;">if/else</span> <span style="background-color:yellow;">block</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">exactly</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">clear</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">newest</span> <span style="background-color:yellow;">programmers</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">team</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">wo</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">unnecessarily</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">ever.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">willing</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">bet</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">were</span> <span style="background-color:yellow;">working</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">unless</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">grows</span> <span style="background-color:yellow;">large</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">lightning</span> <span style="background-color:yellow;">fast</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">Turns</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">jokes</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">pwned</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">inventing</span> <span style="background-color:yellow;">game</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">years</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">learned</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Readable</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">construction</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">lambdas</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">dictionaries</span> . <span style="background-color:yellow;">Oh</span> <span style="background-color:yellow;">well.</span> <span style="background-color:yellow;">Read</span> <span style="background-color:yellow;">below</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> . </p>
<hr />
<p><span style="background-color:yellow;">Here.</span> <span style="background-color:yellow;">Have</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">statement.</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">nice</span> <span style="background-color:yellow;">cleanups</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">@</span> <span style="background-color:yellow;">martineau</span> <span style="background-color:yellow;"></span> </p>
<pre><code>with switch(foo):

    @case(1)
    def _():
        print "1"

    @case(2)
    def _():
        print "2"

    @case(3)
    def _():
        print "3"

    @case(5)
    @case(6)
    def _():
        print '5 and 6'

    @case.default
    def _():
        print 'default'
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">toss</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">moderately</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">hacked</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">abused</span> <span style="background-color:yellow;">decorators</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">questionable</span> <span style="background-color:yellow;">context</span> <span style="background-color:yellow;">manager</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">free.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">ugly</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">functional</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">Essentially</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">wrap</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">logic</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">ugly</span> <span style="background-color:yellow;">wrapper</span> . </p>
<pre><code>import inspect

class switch(object):
    def __init__(self, var):
        self.cases = {}
        self.var = var


    def __enter__(self):
        def case(value):
            def decorator(f):
                if value not in self.cases:
                    self.cases[value] = f
                return f
            return decorator

        def default(f):
            self.default = f
            return f
        case.default = default 

        f_locals = inspect.currentframe().f_back.f_locals
        self.f_locals = f_locals.copy()
        f_locals['case'] = case

    def __exit__(self, *args, **kwargs):
        new_locals = inspect.currentframe().f_back.f_locals
        new_items = [key for key in new_locals if key not in self.f_locals]
        for key in new_items:
             del new_locals[key]              # clean up
        new_locals.update(self.f_locals)      # this reverts all variables to their
        try:                                  # previous values
            self.cases[self.var]()
        except KeyError:
            try:
                getattr(self, 'default')()
            except AttributeError:
                pass
</code></pre>
<p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">hacked</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">necessary.</span> <span style="background-color:yellow;">We</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">create</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">scope</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">definitions</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">occur</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">leak</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">enclosing</span> <span style="background-color:yellow;">scope</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">namespace.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">mind</span> <span style="background-color:yellow;">leaks</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">loops</span> <span style="background-color:yellow;">leak</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">instance</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">remove</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">stack</span> <span style="background-color:yellow;">hack</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">decorator</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">__enter__</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">clause</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">receive</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">enclosing</span> <span style="background-color:yellow;">scope</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">hide</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">evaluation</span> <span style="background-color:yellow;">inside</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lambda</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>message = { 'create': lambda: msg(some_data),
            'update': lambda: msg(other_data),
          }
return message[type]()
</code></pre>
<p>As long as the names are all defined (so you donâ€™t get a <code>NameError</code>), you could also structure it like this:</p>
<pre><code>message = { 'create': (msg, some_data),
            'update': (other_func, other_data),
          }
func, arg = message[type]
return func(arg)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">although</span> <span style="background-color:yellow;">somewhat</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">@</span> <span style="background-color:yellow;">Tumbleweed</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">arguably</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">object-oriented</span> <span style="background-color:yellow;">"</span> . <span style="background-color:yellow;">Instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">explicitly</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">handle</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">various</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">contains</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">provides</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">fairly</span> <span style="background-color:yellow;">natural</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">translation</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">C/C</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">statements</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">code.</span> <span style="background-color:yellow;">Like</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">latter</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">defers</span> <span style="background-color:yellow;">execution</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">handles</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">allows</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">default</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">provided</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">switch</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">corresponds</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">consist</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">&lt</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">expression&gt</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">ones</span> <span style="background-color:yellow;">shown</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">compiled</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">once.</span> <span style="background-color:yellow;">One</span> <span style="background-color:yellow;">difference</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">limitation</span> <span style="background-color:yellow;">though</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">handling</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">wo</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">made</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">automatically</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">fall-though</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">issue</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">nice</span> <span style="background-color:yellow;"></span> . </p>
<pre><code>class switch:
    def create(self): return "blabla %s" % msg(some_data)
    def update(self): return "blabla %s" % msg(other_data)
    def delete(self): return "blabla %s" % diff(other_data, some_data)
    def _default(self): return "unknown type_"
    def __call__(self, type_): return getattr(self, type_, self._default)()

switch = switch() # only needed once

return switch(type_)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">delay</span> <span style="background-color:yellow;">execution</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">match</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">lambda</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>return {
    'create': lambda: msg(some_data),
    'update': lambda: msg(other_data),
    # ...
}[type]()
</code></pre>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">calling</span> <span style="background-color:yellow;">msg</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">simplify</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>return msg({
    'create': some_data,
    'update': other_data,
    # ...
}[type])
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">what</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">creating</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">wrap</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">data/arguments</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">binding</span> <span style="background-color:yellow;">data</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">passing</span> <span style="background-color:yellow;">arguments</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">let</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">decide</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">parameters</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">needs..</span> . </p>
<pre><code>class MyObj(object):
        def __init__(self, data, other_data):
                self.data = data
                self.other_data = other_data

        def switch(self, method_type):
                return {
                                "create": self.msg,
                                "update": self.msg,
                                "delete": self.delete_func,
                        }[method_type]()

        def msg(self):
                #process self.data
                return "Hello, World  !!"

        def delete_func(self):
                #process other data self.other_data or anything else....
                return True

if "__main__" == __name__:
        m1 = MyObj(1,2)
        print m1.switch('create')
        print m1.switch('delete')
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">Ah</span> <span style="background-color:yellow;">never</span> <span style="background-color:yellow;">mind</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">explained</span> <span style="background-color:yellow;">it.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">thinking</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">elif</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//bytebaker.com/2008/11/03/switch-case-statement-in-python/</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">Since</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">execute</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">safe</span> <span style="background-color:yellow;">source</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">store</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">snippet</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">separate</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">expression</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">along</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>message = { 'create': '"blabla %s" % msg(some_data)',
            'update': '"blabla %s" % msg(other_data)',
            'delete': '"blabla %s" % diff(other_data, some_data)'
          }

return eval(message[type_])
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">expression</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">last</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">eval</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">message.get</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">type_</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">unknown</span> <span style="background-color:yellow;">type_</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">provide</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">default.</span> <span style="background-color:yellow;">Either</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">keep</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">readable</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">ugly</span> <span style="background-color:yellow;">details</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">hidden</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>switch = lambda type_: eval(message.get(type_, '"unknown type_"'))

return switch(type_)
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">snippets</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">precompiled</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">speed</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from compiler import compile # deprecated since version 2.6: Removed in Python 3

for k in message:
    message[k] = compile(message[k], 'message case', 'eval')
</code></pre>
<br />