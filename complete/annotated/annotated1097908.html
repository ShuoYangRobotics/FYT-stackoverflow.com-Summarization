<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1097908</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">unicode</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">alphabetically</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> ? </h2><p>Python sorts by byte value by default, which means é comes after z and other equally funny things. What is the best way to sort alphabetically in Python?</p>
<p>Is there a library for this? I couldn't find anything. Preferrably sorting should have language support so it understands that åäö should be sorted after z in Swedish, but that ü should be sorted by u, etc. Unicode support is thereby pretty much a requirement.</p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">library</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">best</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> ? <span style="background-color:yellow;">Just</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">mapping</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">letter</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">value</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">map</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">that</span> ? </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-10</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">IBM</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">ICU</span> <span style="background-color:yellow;">library</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">bindings</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">PyICU</span> . </p>
<p><span style="background-color:yellow;">Update</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">core</span> <span style="background-color:yellow;">difference</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">sorting</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">ICU</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">locale.strcoll</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">ICU</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">full</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">Collation</span> <span style="background-color:yellow;">Algorithm</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">strcoll</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">ISO</span> <span style="background-color:yellow;">14651</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">differences</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">algorithms</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">briefly</span> <span style="background-color:yellow;">summarized</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//unicode.org/faq/collation.html</span> <span style="background-color:yellow;">#</span> <span style="background-color:yellow;">13</span> . <span style="background-color:yellow;">These</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">rather</span> <span style="background-color:yellow;">exotic</span> <span style="background-color:yellow;">special</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">rarely</span> <span style="background-color:yellow;">matter</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">practice</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">answers.</span> <span style="background-color:yellow;">My</span> <span style="background-color:yellow;">Application</span> <span style="background-color:yellow;">sorts</span> <span style="background-color:yellow;">according</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">library.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">easy</span> . </p>
<pre><code># python2.5 code below
# corpus is our unicode() strings collection as a list
corpus = [u"Art", u"Älg", u"Ved", u"Wasa"]

import locale
# this reads the environment and inits the right locale
locale.setlocale(locale.LC_ALL, "")
# alternatively, (but it's bad to hardcode)
# locale.setlocale(locale.LC_ALL, "sv_SE.UTF-8")

corpus.sort(cmp=locale.strcoll)

# in python2.x, locale.strxfrm is broken and does not work for unicode strings
# in python3.x however:
# corpus.sort(key=locale.strxfrm)
</code></pre>
<p></p>
<p><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Lennart</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">answerers</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">anyone</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">'locale</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">task</span> ? </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">answers</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">done</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">excellent</span> <span style="background-color:yellow;">job</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">wanted</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">coding</span> <span style="background-color:yellow;">inefficiency</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Human</span> <span style="background-color:yellow;">Sort</span> . <span style="background-color:yellow;">To</span> <span style="background-color:yellow;">apply</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">selective</span> <span style="background-color:yellow;">char-by-char</span> <span style="background-color:yellow;">translation</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">unicode</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>spec_dict = {'Å':'A', 'Ä':'A'}

def spec_order(s):
    return ''.join([spec_dict.get(ch, ch) for ch in s])
</code></pre>
<p><span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">concise</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">perform</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">auxiliary</span> <span style="background-color:yellow;">task</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">analogous</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">byte</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">somewhat</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">helpful</span> <span style="background-color:yellow;">specification</span> <span style="background-color:yellow;">!</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>spec_dict = dict((ord(k), spec_dict[k]) for k in spec_dict)

def spec_order(s):
    return s.translate(spec_dict)
</code></pre>
<p>The dict you pass to the <code>translate</code> method has Unicode ordinals (not strings) as keys, which is why we need that rebuilding step from the original char-to-char <code>spec_dict</code>. (Values in the dict you pass to translate [as opposed to keys, which must be ordinals] can be Unicode ordinals, arbitrary Unicode strings, or None to remove the corresponding character as part of the translation, so it's easy to specify "ignore a certain character for sorting purposes", "map ä to ae for sorting purposes", and the like).</p>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">rebuilding</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">step</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">simply</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>spec_dict = ''.maketrans(spec_dict)
</code></pre>
<p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">docs</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">maketrans</span> <span style="background-color:yellow;">static</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">3</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Try</span> <span style="background-color:yellow;">James</span> <span style="background-color:yellow;">Tauber</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">Collation</span> <span style="background-color:yellow;">Algorithm</span> . <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">exactly</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">worth</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">look.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">information</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">issues</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">post</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">Christopher</span> <span style="background-color:yellow;">Lenz</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">summary</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">extended</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">locale.strcoll</span> <span style="background-color:yellow;">under</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">locale.strxfrm</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">solve</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">job</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">assuming</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">installed.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">tested</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">under</span> <span style="background-color:yellow;">Windows</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">names</span> <span style="background-color:yellow;">confusingly</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">hand</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">locales</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">supported</span> <span style="background-color:yellow;">installed</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">default</span> . </p>
<p><span style="background-color:yellow;">ICU</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">necessarily</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">practice</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">however</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">more</span> . <span style="background-color:yellow;">Most</span> <span style="background-color:yellow;">notably</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">support</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">splitters</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">split</span> <span style="background-color:yellow;">texts</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">languages</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">words.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">useful</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">languages</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">word</span> <span style="background-color:yellow;">separators.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">corpus</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">words</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">splitting</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">included</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">though</span> . </p>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">long</span> <span style="background-color:yellow;">names</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">locales</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">display</span> <span style="background-color:yellow;">names</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">support</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">calendars</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">Gregorian</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">although</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">interface</span> <span style="background-color:yellow;">supports</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">tons</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">tons</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">obscure</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">supports</span> . </p>
<p><span style="background-color:yellow;">So</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">alphabetically</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">locale-dependent</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">unless</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">special</span> <span style="background-color:yellow;">requirements</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">dependent</span> <span style="background-color:yellow;">functionality</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">words</span> <span style="background-color:yellow;">splitter</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">Jeff</span> <span style="background-color:yellow;">Atwood</span> <span style="background-color:yellow;">wrote</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">post</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">Natural</span> <span style="background-color:yellow;">Sort</span> <span style="background-color:yellow;">Order</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">he</span> <span style="background-color:yellow;">linked</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">ask</span> . </p>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">trivial</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">means</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">trick</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">read</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">collation</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//en.wikipedia.org/wiki/Unicode_collation_algorithm</span> </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//www.unicode.org/unicode/reports/tr10/</span> </p>
<p><span style="background-color:yellow;">a</span> <span style="background-color:yellow;">sample</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">here</span> </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//jtauber.com/blog/2006/01/27/python_unicode_collation_algorithm/</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">might</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">interested</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">pyuca</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//jtauber.com/blog/2006/01/27/python_unicode_collation_algorithm/</span> </p>
<p><span style="background-color:yellow;">Though</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">certainly</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">exact</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">least</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">somewhat</span> <span style="background-color:yellow;">right.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">beats</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">webapp</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">threadsafe</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">sets</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;">settings</span> <span style="background-color:yellow;">process-wide.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">easier</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">PyICU</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">relies</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">external</span> <span style="background-color:yellow;">C</span> <span style="background-color:yellow;">library</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">uploaded</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">github</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">original</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">down</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">writing</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">resort</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">web</span> <span style="background-color:yellow;">caches</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">https</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//github.com/href/Python-Unicode-Collation-Algorithm</span> </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">successfully</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">sanely</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">German/French/Italian</span> <span style="background-color:yellow;">text</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">plone</span> <span style="background-color:yellow;">module</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">complete</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">unaccent.py</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">effbot.org.</span> <span style="background-color:yellow;">What</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">basically</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">remove</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">accents</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">text.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'sanitized</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">text</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">alphabetically.</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">description</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">page.</span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">9</span> </b><br /><h1><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">Complete</span> <span style="background-color:yellow;">UCA</span> <span style="background-color:yellow;">Solution</span> </h1>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">simplest</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">easiest</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">straightforward</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">callout</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Perl</span> <span style="background-color:yellow;">library</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Collate</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Locale</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">subclass</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Collate</span> <span style="background-color:yellow;">module.</span> <span style="background-color:yellow;">All</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">pass</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">constructor</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">value</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">xv</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">Sweden</span> . </p>
<p>(You may not neccesarily appreciate this for Swedish text, but because Perl uses abstract characters, you can use any Unicode code point you please — no matter the platform or build! Few languages offer such convenience. I mention it because I’ve fighting a losing battle with Java a lot over this maddening problem lately.)</p>
<p>The problem is that I do not know how to access a Perl module from Python — apart, that is, from using a shell callout or two-sided pipe. To that end, <a href="http://training.perl.com/scripts/ucsort" rel="nofollow">I have therefore provided you with a complete working script called <em>ucsort</em></a> that you can call to do exactly what you have asked for with perfect ease. </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">100</span> <span style="background-color:yellow;">%</span> <span style="background-color:yellow;">compliant</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">full</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">Collation</span> <span style="background-color:yellow;">Algorithm</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">tailoring</span> <span style="background-color:yellow;">options</span> <span style="background-color:yellow;">supported</span> <span style="background-color:yellow;">!</span> <span style="background-color:yellow;">!</span> <span style="background-color:yellow;">And</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">optional</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">installed</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">run</span> <span style="background-color:yellow;">Perl</span> <span style="background-color:yellow;">5.13</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">full</span> <span style="background-color:yellow;">access</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">easy-to-use</span> <span style="background-color:yellow;">CLDR</span> <span style="background-color:yellow;">locales.</span> <span style="background-color:yellow;">See</span> <span style="background-color:yellow;">below</span> . </p>
<h2><span style="background-color:yellow;">Demonstration</span> </h2>
<p><span style="background-color:yellow;">Imagine</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">ordered</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>b o i j n l m å y e v s k h d f g t ö r x p z a ä c u q
</code></pre>
<p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">default</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">yields</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>a b c d e f g h i j k l m n o p q r s t u v x y z ä å ö
</code></pre>
<p>which is incorrect by everybody’s book.  Using my script, which uses the Unicode Collation Algorithm, you get this order:</p>
<pre><code>% perl ucsort /tmp/swedish_alphabet | fmt
a å ä b c d e f g h i j k l m n o ö p q r s t u v x y z
</code></pre>
<p><span style="background-color:yellow;">That</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">default</span> <span style="background-color:yellow;">UCA</span> <span style="background-color:yellow;">sort.</span> <span style="background-color:yellow;">To</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Swedish</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">ucsort</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>% perl --locale=sv /tmp/swedish_alphabet | fmt
a b c d e f g h i j k l m n o p q r s t u v x y z å ä ö
</code></pre>
<p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">demo.</span> <span style="background-color:yellow;">First</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">input</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>% fmt /tmp/swedish_set
cTD cDD Cöd Cbd cAD cCD cYD Cud cZD Cod cBD Cnd cQD cFD Ced Cfd cOD
cLD cXD Cid Cpd cID Cgd cVD cMD cÅD cGD Cqd Cäd cJD Cdd Ckd cÖD cÄD
Ctd Czd Cxd cHD cND cKD Cvd Chd Cyd cUD Cld Cmd cED Crd Cad Cåd Ccd
cRD cSD Csd Cjd cPD
</code></pre>
<p><span style="background-color:yellow;">By</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">sorts</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Cad Cbd Ccd Cdd Ced Cfd Cgd Chd Cid Cjd Ckd Cld Cmd Cnd Cod Cpd Cqd
Crd Csd Ctd Cud Cvd Cxd Cyd Czd Cäd Cåd Cöd cAD cBD cCD cDD cED cFD
cGD cHD cID cJD cKD cLD cMD cND cOD cPD cQD cRD cSD cTD cUD cVD cXD
cYD cZD cÄD cÅD cÖD
</code></pre>
<p><span style="background-color:yellow;">But</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">default</span> <span style="background-color:yellow;">UCA</span> <span style="background-color:yellow;">makes</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>% ucsort /tmp/swedish_set | fmt
cAD Cad cÅD Cåd cÄD Cäd cBD Cbd cCD Ccd cDD Cdd cED Ced cFD Cfd cGD
Cgd cHD Chd cID Cid cJD Cjd cKD Ckd cLD Cld cMD Cmd cND Cnd cOD Cod
cÖD Cöd cPD Cpd cQD Cqd cRD Crd cSD Csd cTD Ctd cUD Cud cVD Cvd cXD
Cxd cYD Cyd cZD Czd
</code></pre>
<p><span style="background-color:yellow;">But</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Swedish</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>% ucsort --locale=sv /tmp/swedish_set | fmt
cAD Cad cBD Cbd cCD Ccd cDD Cdd cED Ced cFD Cfd cGD Cgd cHD Chd cID
Cid cJD Cjd cKD Ckd cLD Cld cMD Cmd cND Cnd cOD Cod cPD Cpd cQD Cqd
cRD Crd cSD Csd cTD Ctd cUD Cud cVD Cvd cXD Cxd cYD Cyd cZD Czd cÅD
Cåd cÄD Cäd cÖD Cöd
</code></pre>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">prefer</span> <span style="background-color:yellow;">uppercase</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">lowercase</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>% ucsort --upper-before-lower --locale=sv /tmp/swedish_set | fmt
Cad cAD Cbd cBD Ccd cCD Cdd cDD Ced cED Cfd cFD Cgd cGD Chd cHD Cid
cID Cjd cJD Ckd cKD Cld cLD Cmd cMD Cnd cND Cod cOD Cpd cPD Cqd cQD
Crd cRD Csd cSD Ctd cTD Cud cUD Cvd cVD Cxd cXD Cyd cYD Czd cZD Cåd
cÅD Cäd cÄD Cöd cÖD
</code></pre>
<h2><span style="background-color:yellow;">Customized</span> <span style="background-color:yellow;">Sorts</span> </h2>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">ucsort</span> . <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">titles</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">English</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>% ucsort --preprocess='s/^(an?|the)\s+//i' /tmp/titles
Anathem
The Book of Skulls
A Civil Campaign
The Claw of the Conciliator
The Demolished Man
Dune
An Early Dawn
The Faded Sun: Kesrith
The Fall of Hyperion
A Feast for Crows
Flowers for Algernon
The Forbidden Tower
Foundation and Empire
Foundation’s Edge
The Goblin Reservation
The High Crusade
Jack of Shadows
The Man in the High Castle
The Ringworld Engineers
The Robots of Dawn
A Storm of Swords
Stranger in a Strange Land
There Will Be Time
The White Dragon
</code></pre>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">Perl</span> <span style="background-color:yellow;">5.10.1</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">run</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">general.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">locale</span> <span style="background-color:yellow;">support</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">must</span> <span style="background-color:yellow;">either</span> <span style="background-color:yellow;">install</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">optional</span> <span style="background-color:yellow;">CPAN</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">Unicode</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Collate</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Locale</span> . <span style="background-color:yellow;">Alternately</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">install</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">development</span> <span style="background-color:yellow;">versions</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Perl</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">5.13</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">include</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">standardly</span> . </p>
<h1><span style="background-color:yellow;">Calling</span> <span style="background-color:yellow;">Conventions</span> </h1>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">rapid</span> <span style="background-color:yellow;">prototype</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">ucsort</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">mostly</span> <span style="background-color:yellow;">un</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">der</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">documented.</span> <span style="background-color:yellow;">But</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">SYNOPSIS</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">switches/options</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">accepts</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">command</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>    # standard options
    --help|?
    --man|m
    --debug|d

    # collator constructor options
    --backwards-levels=i
    --collation-level|level|l=i
    --katakana-before-hiragana
    --normalization|n=s
    --override-CJK=s
    --override-Hangul=s
    --preprocess|P=s
    --upper-before-lower|u
    --variable=s

    # program specific options
    --case-insensitive|insensitive|i
    --input-encoding|e=s
    --locale|L=s
    --paragraph|p
    --reverse-fields|last
    --reverse-output|r
    --right-to-left|reverse-input
</code></pre>
<p>Yeah, ok: that’s really the argument list I use for the call to <code>Getopt::Long</code>, but you get the idea. :) </p>
<p>If you can figure out how to call Perl library modules from Python directly without calling a Perl script, by all means do so.  I just don’t know how myself.  I’d love to learn how.</p>
<p>In the meantime, I believe this script will do what you need done in all its particular — <strong>and more!</strong>  I now use this for all of text sorting. It <em>finally</em> does what I’ve needed for a long, long time. </p>
<p>The only downside is that <code>--locale</code> argument causes performance to go down the tubes, although it’s plenty fast enough for regular, non-locale <strong>but still 100% UCA compliant</strong> sorting.  Since it loads everything in memory, you probably don’t want to use this on gigabyte documents. I use it many times a day, and it sure it great having sane text sorting at last.</p>
<br />