<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-471946</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> ? </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">App</span> <span style="background-color:yellow;">Engine</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">document</span> <span style="background-color:yellow;">being</span> <span style="background-color:yellow;">retrieved</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">remote</span> <span style="background-color:yellow;">server</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">equivalent</span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">object</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">xml.dom.minidom</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">parse</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">data</span> <span style="background-color:yellow;">being</span> <span style="background-color:yellow;">returned</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">urlfetch</span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">trying</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">django.utils.simplejson</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">parsed</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">document</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">JSON.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">completely</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">loss</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">hook</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">together.</span> <span style="background-color:yellow;">Below</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">tinkering</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from xml.dom import minidom
from django.utils import simplejson as json

#pseudo code that returns actual xml data as a string from remote server. 
result = urlfetch.fetch(url,'','get');

dom = minidom.parseString(result.content)
json = simplejson.load(dom)

self.response.out.write(json)
</code></pre>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-6</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">format</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">diverse</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">impossible</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">write</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">strict</span> <span style="background-color:yellow;">defined</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">format.</span> <span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">mean</span> <span style="background-color:yellow;">:</span> </p>
<pre><code><persons>
	<person>
		<name>Koen Bok</name>
		<age>26</age>
	</person>
	<person>
		<name>Plutor Heidepeen</name>
		<age>33</age>
	</person>
</persons>
</code></pre>
<p><span style="background-color:yellow;">Would</span> <span style="background-color:yellow;">become</span> </p>
<pre><code>{'persons': [
	{'name': 'Koen Bok', 'age': 26},
	{'name': 'Plutor Heidepeen', 'age': 33}]
}
</code></pre>
<p><span style="background-color:yellow;">But</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">:</span> </p>
<pre><code><persons>
	<person name="Koen Bok">
		<locations name="defaults">
			<location long=123 lat=384 />
		</locations>
	</person>
</persons>
</code></pre>
<p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">mean</span> ? </p>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">article</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//www.xml.com/pub/a/2006/05/31/converting-between-xml-and-json.html</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Jacob</span> <span style="background-color:yellow;">Smullyan</span> <span style="background-color:yellow;">wrote</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">utility</span> <span style="background-color:yellow;">called</span> <span style="background-color:yellow;">pesterfish</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">effbot</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">ElementTree</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">JSON</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">Soviut</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">advice</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">lxml</span> <span style="background-color:yellow;">objectify</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">good.</span> <span style="background-color:yellow;">With</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">specially</span> <span style="background-color:yellow;">subclassed</span> <span style="background-color:yellow;">simplejson</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">turn</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">lxml</span> <span style="background-color:yellow;">objectify</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">json</span> . </p>
<pre><code>import simplejson as json
import lxml

class objectJSONEncoder(json.JSONEncoder):
"""A specialized JSON encoder that can handle simple lxml objectify types
   >>> from lxml import objectify
   >>> obj = objectify.fromstring("<Book><price>1.50</price><author>W. Shakespeare</author></Book>")       
   >>> objectJSONEncoder().encode(obj)
   '{"price": 1.5, "author": "W. Shakespeare"}'       
"""
 def default(self,o):
    if isinstance(o, lxml.objectify.IntElement):
        return int(o)
    if isinstance(o, lxml.objectify.NumberElement) or isinstance(o, lxml.objectify.FloatElement):
        return float(o)
    if isinstance(o, lxml.objectify.ObjectifiedDataElement):
        return str(o)
    if hasattr(o, '__dict__'):
        #For objects with a __dict__, return the encoding of the __dict__
        return o.__dict__
    return json.JSONEncoder.default(self, o)
</code></pre>
<p><span style="background-color:yellow;">See</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">docstring</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">usage</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">essentially</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">pass</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">lxml</span> <span style="background-color:yellow;">objectify</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">instance</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">objectJSONEncoder</span> </p>
<p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">Koen</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">valid</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">above</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">simply</span> <span style="background-color:yellow;">nested</span> <span style="background-color:yellow;">xml</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">include</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">name</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">root</span> <span style="background-color:yellow;">elements.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">fixed</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">included</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">gist</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//gist.github.com/345559</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">One</span> <span style="background-color:yellow;">possibility</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">Objectify</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">ElementTree</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">lxml</span> <span style="background-color:yellow;">module</span> . <span style="background-color:yellow;">An</span> <span style="background-color:yellow;">older</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">ElementTree</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">available</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">xml.etree</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">well.</span> <span style="background-color:yellow;">Either</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">xml</span> <span style="background-color:yellow;">converted</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">objects</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">simplejson</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">serialize</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">JSON</span> . </p>
<p><span style="background-color:yellow;">While</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">seem</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">painful</span> <span style="background-color:yellow;">intermediate</span> <span style="background-color:yellow;">step</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">starts</span> <span style="background-color:yellow;">making</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">sense</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">dealing</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">both</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">normal</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">objects</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">XML</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">regular</span> <span style="background-color:yellow;">objects</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">usually</span> <span style="background-color:yellow;">reasonable</span> <span style="background-color:yellow;">tools</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">harder</span> <span style="background-color:yellow;">conversion</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">And</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">Plain</span> <span style="background-color:yellow;">Old</span> <span style="background-color:yellow;">Object</span> <span style="background-color:yellow;">produce</span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">tools</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">serialization</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">JSON</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">Object</span> <span style="background-color:yellow;">Notation</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">natural</span> <span style="background-color:yellow;">fit</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">serializing</span> <span style="background-color:yellow;">objects</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">assume</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">tools</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wrote</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">small</span> <span style="background-color:yellow;">command-line</span> <span style="background-color:yellow;">based</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">based</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">pesterfesh</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">exactly</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<p><span style="background-color:yellow;">https</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//github.com/hay/xml2json</span> </p>
<br />