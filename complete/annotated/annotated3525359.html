<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-3525359</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">why</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">strings</span> ? </h2><p><span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">built</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">effectively</span> <span style="background-color:yellow;">equivalent</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def sum(iterable, start):
    return start + reduce(operator.add, iterable)
</code></pre>
<p><span style="background-color:yellow;">for</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">types</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">parameters</span> <span style="background-color:yellow;">except</span> <span style="background-color:yellow;">strings.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">lists</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">example</span> . </p>
<p><span style="background-color:yellow;">Why</span> <span style="background-color:yellow;">were</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">specially</span> <span style="background-color:yellow;">left</span> <span style="background-color:yellow;">out</span> ? </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">seem</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">remember</span> <span style="background-color:yellow;">discussions</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">reason</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">explanation</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">link</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">thread</span> <span style="background-color:yellow;">explaining</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">fine</span> . </p>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">aware</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">.join</span> . <span style="background-color:yellow;">My</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">why</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">option</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">banned</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">banning</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">lists</span> . </p>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Although</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">believe</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">needed</span> <span style="background-color:yellow;">given</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">answers</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">got</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Why</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">containing</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">containing</span> <span style="background-color:yellow;">lists</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">containing</span> <span style="background-color:yellow;">strings</span> ? </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-6</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">tries</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">discourage</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">summing</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">strings.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">supposed</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">join</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>"".join(list_of_strings)
</code></pre>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">memory</span> . </p>
<p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">quick</span> <span style="background-color:yellow;">benchmark</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>$ python -m timeit -s 'import operator; strings = ["a"]*10000' 'r = reduce(operator.add, strings)'
100 loops, best of 3: 8.46 msec per loop
$ python -m timeit -s 'import operator; strings = ["a"]*10000' 'r = "".join(strings)'
1000 loops, best of 3: 296 usec per loop
</code></pre>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">OP</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">edit</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">As</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">why</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">were</span> <span style="background-color:yellow;">apparently</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">singled</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">believe</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">simply</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">matter</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">optimizing</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">common</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">enforcing</span> <span style="background-color:yellow;">best</span> <span style="background-color:yellow;">practice</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">join</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">''.join</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">explicitly</span> <span style="background-color:yellow;">forbidding</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">point</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">newbies</span> . </p>
<p><span style="background-color:yellow;">BTW</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">restriction</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">place</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">forever</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">i.e.</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">added</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">built-in</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">rev.</span> <span style="background-color:yellow;">32347</span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">From</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">docs</span> <span style="background-color:yellow;">:</span> </p>
<blockquote><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">fast</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">correct</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">concatenate</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">sequence</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">calling</span> <span style="background-color:yellow;">''.join</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">sequence</span> <span style="background-color:yellow;"></span> . </blockquote>
<p><span style="background-color:yellow;">By</span> <span style="background-color:yellow;">making</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">refuse</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">operate</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">encouraged</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">correct</span> <span style="background-color:yellow;">method</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">..</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">concatenate</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">appropriate</span> <span style="background-color:yellow;">starting</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">!</span> <span style="background-color:yellow;">Of</span> <span style="background-color:yellow;">course</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">understood</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">.join</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">..</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">anyway.</span> . </p>
<pre><code>>>> class ZeroObject(object):
...  def __add__(self, other):
...   return other
...
>>> sum(["hi", "there"], ZeroObject())
'hithere'
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Moved</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">parts</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">immutability</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">history</span> . </p>
<p><span style="background-color:yellow;">Basically</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">preallocation.</span> <span style="background-color:yellow;">When</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">as</span> </p>
<pre><code>sum(["a", "b", "c", ..., ])
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">expect</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">reduce</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">generated</span> <span style="background-color:yellow;">looks</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> </p>
<pre><code>v1 = "" + "a" # must allocate v1 and set its size to len("") + len("a")
v2 = v1 + "b" # must allocate v2 and set its size to len("a") + len("b")
...
res = v10000 + "$" # must allocate res and set its size to len(v9999) + len("$")
</code></pre>
<p>In each of these steps a new string is created, which for one might give some copying overhead as the strings are getting longer and longer. But that’s maybe not the point here. What’s more important, is that every new string on each line must be <em>allocated</em> to it’s specific size (which. I don’t know it it must allocate in every iteration of the <code>reduce</code> statement, there might be some obvious heuristics to use and Python might allocate a bit more here and there for reuse – but at several points the new string will be large enough that this won’t help anymore and Python must allocate again, which is rather expensive.</p>
<p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">dedicated</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">join</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">however</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">job</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">figure</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">real</span> <span style="background-color:yellow;">size</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">starts</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">therefore</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">theory</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">allocate</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">beginning</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">fill</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">cheaper</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">solution</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">source</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//svn.python.org/view/python/trunk/Python/bltinmodule.c</span> ? <span style="background-color:yellow;">revision</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">81029&amp</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">view</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">markup</span> </p>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">builtin_sum</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>     /* reject string values for 'start' parameter */
        if (PyObject_TypeCheck(result, &PyBaseString_Type)) {
            PyErr_SetString(PyExc_TypeError,
                "sum() can't sum strings [use ''.join(seq) instead]");
            Py_DECREF(iter);
            return NULL;
        }
        Py_INCREF(result);
    }
</code></pre>
<p><span style="background-color:yellow;">So..</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">answer</span> . </p>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">explicitly</span> <span style="background-color:yellow;">checked</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">rejected</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">Short</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Efficiency</span> . </p>
<p><span style="background-color:yellow;">Long</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">create</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">partial</span> <span style="background-color:yellow;">sum</span> . </p>
<p><span style="background-color:yellow;">Assume</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">amount</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">required</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">create</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">directly</span> <span style="background-color:yellow;">proportional</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">size</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">data.</span> <span style="background-color:yellow;">Let</span> <span style="background-color:yellow;">N</span> <span style="background-color:yellow;">denote</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">elements</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">sequence</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">sum</span> . </p>
<p><code>double</code>s are always the same size, which makes <code>sum</code>'s running time O(1)×N = <strong>O(N)</strong>.</p>
<p><code>int</code> (formerly known as <code>long</code>) is arbitary-length.  Let M denote the absolute value of the largest sequence element.  Then <code>sum</code>'s worst-case running time is lg(M) + lg(2M) + lg(3M) + ... + lg(NM) = N×lg(M) + lg(N!) = <strong>O(N log N)</strong>.</p>
<p>For <code>str</code> (where M = the length of the longest string), the worst-case running time is M + 2M + 3M + ... + NM = M×(1 + 2 + ... + N) = <strong>O(N²)</strong>.</p>
<p><span style="background-color:yellow;">Thus</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">ming</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">slower</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">sum</span> <span style="background-color:yellow;">ming</span> <span style="background-color:yellow;">numbers</span> . </p>
<p><span style="background-color:yellow;">str.join</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">allocate</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">intermediate</span> <span style="background-color:yellow;">objects.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">preallocates</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">buffer</span> <span style="background-color:yellow;">large</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">hold</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">joined</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">copies</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">data.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">O</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">N</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">sum</span> . </p>
<br />