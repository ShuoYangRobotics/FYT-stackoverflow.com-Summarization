<h3>Question ( ID-8337069 ) : </h3><h2>Find <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">n'th</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> </h2><p>I want <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">n'th</span> <span style="background-color:yellow;">occurrence</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list.</span> <span style="background-color:yellow;">e.g.,</span> </p>
<pre><code>x=[False,True,True,False,True,False,True,False,False,False,True,False,True]
</code></pre>
<p>What <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">n'th</span> <span style="background-color:yellow;">true</span> ? If I wanted <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">fifth</span> <span style="background-color:yellow;">occurrence</span> ( 4th <span style="background-color:yellow;">if</span> zero-indexed ) , <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">10</span> . </p>
<p>I 've come <span style="background-color:yellow;">up</span> with : </p>
<pre><code>indargs = [ i for i,a in enumerate(x) if a ]
indargs[n]
</code></pre>
<p>Note <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">x.index</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">occurrence</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">occurrence</span> <span style="background-color:yellow;">after</span> some point , <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">therefore</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">as</span> I can <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">a</span> solution . </p>
<p>There <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">a</span> solution <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">numpy</span> <span style="background-color:yellow;">for</span> cases similar <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">above</span> , <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">using</span> cumsum <span style="background-color:yellow;">and</span> where , but I 'd like <span style="background-color:yellow;">to</span> know <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">there</span> 's <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">numpy-free</span> way <span style="background-color:yellow;">to</span> solve <span style="background-color:yellow;">the</span> problem . </p>
<p>I 'm concerned <span style="background-color:yellow;">about</span> performance since I <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">encountered</span> <span style="background-color:yellow;">this</span> while <span style="background-color:yellow;">implemented</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Sieve</span> <span style="background-color:yellow;">of</span> Eratosthenes <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> Project Euler problem , but <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">more</span> general question <span style="background-color:yellow;">that</span> I have <span style="background-color:yellow;">encountered</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">other</span> situations . </p>
<p>EDIT : I 've gotten <span style="background-color:yellow;">a</span> lot <span style="background-color:yellow;">of</span> great <span style="background-color:yellow;">answers</span> , so I decided <span style="background-color:yellow;">to</span> do some performance <span style="background-color:yellow;">tests.</span> Below <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">timeit</span> <span style="background-color:yellow;">execution</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">in</span> seconds <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">lists</span> with len <span style="background-color:yellow;">nelements</span> searching <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> 4000'th/1000'th True. The <span style="background-color:yellow;">lists</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">random</span> True/False. <span style="background-color:yellow;">Source</span> code linked below ; <span style="background-color:yellow;">it</span> 's <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">touch</span> <span style="background-color:yellow;">messy.</span> I <span style="background-color:yellow;">used</span> short / <span style="background-color:yellow;">modified</span> versions <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> posters ' <span style="background-color:yellow;">names</span> <span style="background-color:yellow;">to</span> describe <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">functions</span> <span style="background-color:yellow;">except</span> <span style="background-color:yellow;">listcomp</span> , which <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> simple <span style="background-color:yellow;">list</span> comprehension <span style="background-color:yellow;">above</span> . </p>
<pre><code>True Test (100'th True in a list containing True/False)
         nelements      eyquem_occur eyquem_occurrence            graddy            taymon          listcomp       hettinger26         hettinger
             3000:          0.007824          0.031117          0.002144          0.007694          0.026908          0.003563          0.003563
            10000:          0.018424          0.103049          0.002233          0.018063          0.088245          0.003610          0.003769
            50000:          0.078383          0.515265          0.002140          0.078074          0.442630          0.003719          0.003608
           100000:          0.152804          1.054196          0.002129          0.152691          0.903827          0.003741          0.003769
           200000:          0.303084          2.123534          0.002212          0.301918          1.837870          0.003522          0.003601
True Test (1000'th True in a list containing True/False)
         nelements      eyquem_occur eyquem_occurrence            graddy            taymon          listcomp       hettinger26         hettinger
             3000:          0.038461          0.031358          0.024167          0.039277          0.026640          0.035283          0.034482
            10000:          0.049063          0.103241          0.024120          0.049383          0.088688          0.035515          0.034700
            50000:          0.108860          0.516037          0.023956          0.109546          0.442078          0.035269          0.035373
           100000:          0.183568          1.049817          0.024228          0.184406          0.906709          0.035135          0.036027
           200000:          0.333501          2.141629          0.024239          0.333908          1.826397          0.034879          0.036551
True Test (20000'th True in a list containing True/False)
         nelements      eyquem_occur eyquem_occurrence            graddy            taymon          listcomp       hettinger26         hettinger
             3000:          0.004520          0.004439          0.036853          0.004458          0.026900          0.053460          0.053734
            10000:          0.014925          0.014715          0.126084          0.014864          0.088470          0.177792          0.177716
            50000:          0.766154          0.515107          0.499068          0.781289          0.443654          0.707134          0.711072
           100000:          0.837363          1.051426          0.501842          0.862350          0.903189          0.707552          0.706808
           200000:          0.991740          2.124445          0.498408          1.008187          1.839797          0.715844          0.709063
Number Test (750'th 0 in a list containing 0-9)
         nelements      eyquem_occur eyquem_occurrence            graddy            taymon          listcomp       hettinger26         hettinger
             3000:          0.026996          0.026887          0.015494          0.030343          0.022417          0.026557          0.026236
            10000:          0.037887          0.089267          0.015839          0.040519          0.074941          0.026525          0.027057
            50000:          0.097777          0.445236          0.015396          0.101242          0.371496          0.025945          0.026156
           100000:          0.173794          0.905993          0.015409          0.176317          0.762155          0.026215          0.026871
           200000:          0.324930          1.847375          0.015506          0.327957          1.536012          0.027390          0.026657
</code></pre>
<p>Hettinger 's <span style="background-color:yellow;">itertools</span> solution <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">almost</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">the</span> best. <span style="background-color:yellow;">taymon</span> 's <span style="background-color:yellow;">and</span> graddy 's solutions <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">next</span> best <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">most</span> situations , <span style="background-color:yellow;">though</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> comprehension <span style="background-color:yellow;">approach</span> can be better <span style="background-color:yellow;">for</span> short <span style="background-color:yellow;">arrays</span> when <span style="background-color:yellow;">you</span> want <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">n'th</span> <span style="background-color:yellow;">instance</span> such <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">is</span> high <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">lists</span> <span style="background-color:yellow;">in</span> which <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">fewer</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">occurrences.</span> If <span style="background-color:yellow;">there</span> 's <span style="background-color:yellow;">a</span> chance <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">fewer</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">occurrences</span> , <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">initial</span> count check saves <span style="background-color:yellow;">time.</span> Also , graddy 's <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">efficient</span> when searching <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> True/False... <span style="background-color:yellow;">not</span> clear why <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is.</span> <span style="background-color:yellow;">eyquem</span> 's solutions <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">essentially</span> <span style="background-color:yellow;">equivalent</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">others</span> with slightly <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">or</span> less <span style="background-color:yellow;">overhead</span> ; <span style="background-color:yellow;">eyquem_occur</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">approximately</span> <span style="background-color:yellow;">the</span> same <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">taymon</span> 's solution , while <span style="background-color:yellow;">eyquem_occurrence</span> <span style="background-color:yellow;">is</span> similar <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">listcomp</span> . </p>
<br /><h3>Answers ( Total-7 ) : </h3><b># 0 </b><br /><p>The <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">from</span> @ Taymon <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">list.index</span> was great . </p>
<p>FWIW , here 's <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">functional</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">itertools</span> <span style="background-color:yellow;">module</span> . It works with <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">input</span> , <span style="background-color:yellow;">not</span> just <span style="background-color:yellow;">lists</span> : </p>
<pre><code>>>> from itertools import compress, count, imap, islice
>>> from functools import partial
>>> from operator import eq

>>> def nth_item(n, item, iterable):
        indicies = compress(count(), imap(partial(eq, item), iterable))
        return next(islice(indicies, n, None), -1)
</code></pre>
<p>The <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">nice</span> because <span style="background-color:yellow;">it</span> shows <span style="background-color:yellow;">off</span> how <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">effectively</span> combine Python 's <span style="background-color:yellow;">functional</span> <span style="background-color:yellow;">toolset.</span> Note , <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">the</span> pipeline <span style="background-color:yellow;">is</span> set-up , <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">trips</span> <span style="background-color:yellow;">around</span> Python 's <span style="background-color:yellow;">eval</span> loop -- <span style="background-color:yellow;">everything</span> gets done <span style="background-color:yellow;">at</span> C speed , with <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">tiny</span> <span style="background-color:yellow;">memory</span> <span style="background-color:yellow;">footprint</span> , with lazy <span style="background-color:yellow;">evaluation</span> , with <span style="background-color:yellow;">no</span> variable <span style="background-color:yellow;">assignments</span> , <span style="background-color:yellow;">and</span> with separately <span style="background-color:yellow;">testable</span> components. IOW , <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">everything</span> <span style="background-color:yellow;">functional</span> programmers dream <span style="background-color:yellow;">about</span> : - ) </p>
<p><span style="background-color:yellow;">Sample</span> <span style="background-color:yellow;">run</span> : </p>
<pre><code>>>> x = [False,True,True,False,True,False,True,False,False,False,True,False,True]
>>> nth_item(50, True, x)
-1
>>> nth_item(0, True, x)
1
>>> nth_item(1, True, x)
2
>>> nth_item(2, True, x)
4
>>> nth_item(3, True, x)
6
</code></pre>
<br /><b># <span style="background-color:yellow;">1</span> </b><br /><p>I ca <span style="background-color:yellow;">n't</span> say <span style="background-color:yellow;">for</span> certain <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">fastest</span> way , but I <span style="background-color:yellow;">imagine</span> <span style="background-color:yellow;">it</span> 'd be pretty good : </p>
<pre><code>i = -1
for j in xrange(n):
    i = x.index(True, i + 1)
</code></pre>
<p>The <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">i</span> . </p>
<br /><b># 2 </b><br /><p><span style="background-color:yellow;">if</span> <span style="background-color:yellow;">efficiency</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> concern <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">its</span> better <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">iterate</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">normally</span> ( O ( N ) ) <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">list</span> comprehension which <span style="background-color:yellow;">takes</span> O ( <span style="background-color:yellow;">L</span> ) where <span style="background-color:yellow;">L</span> <span style="background-color:yellow;">is</span> length <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">list</span> </p>
<p>Example : Consider <span style="background-color:yellow;">a</span> very huge <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">you</span> want <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">occurence</span> N = <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">obviously</span> better <span style="background-color:yellow;">to</span> stop <span style="background-color:yellow;">as</span> soon <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">occurence</span> </p>
<pre><code>count = 0

for index,i in enumerate(L):

    if i:

     count = count + 1

     if count==N:
       return index
</code></pre>
<br /><b># 3 </b><br /><pre><code>[y for y in enumerate(x) if y[1]==True][z][0]
</code></pre>
<p>Note : Here Z <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">n'th</span> <span style="background-color:yellow;">occurance,</span> </p>
<br /><b># 4 </b><br /><p>A solution <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">first</span> creates <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">nth-1</span> <span style="background-color:yellow;">element</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">list</span> : <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">occurence</span> ( ) </p>
<p>And <span style="background-color:yellow;">a</span> solution <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">fulfill</span> <span style="background-color:yellow;">functional</span> programmers'dreams <span style="background-color:yellow;">too</span> , I <span style="background-color:yellow;">think</span> , <span style="background-color:yellow;">using</span> generators , because I love <span style="background-color:yellow;">them</span> : <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">occur</span> ( ) </p>
<pre><code>S = 'stackoverflow.com is a fantastic amazing site'
print 'object S is string %r' % S
print "indexes of 'a' in S :",[indx for indx,elem in enumerate(S) if elem=='a']

def occurence(itrbl,x,nth):
    return [indx for indx,elem in enumerate(itrbl)
            if elem==x ][nth-1] if x in itrbl \
           else None

def occur(itrbl,x,nth):
    return (i for pos,i in enumerate(indx for indx,elem in enumerate(itrbl)
                                     if elem==x)
            if pos==nth-1).next() if x in itrbl\
            else   None

print "\noccurence(S,'a',4th) ==",occurence(S,'a',4)
print "\noccur(S,'a',4th) ==",occur(S,'a',4)
</code></pre>
<p><span style="background-color:yellow;">result</span> </p>
<pre><code>object S is string 'stackoverflow.com is a fantastic amazing site'
indexes of 'a' in S : [2, 21, 24, 27, 33, 35]

occur(S,'a',4th) == 27

occurence(S,'a',4th) == 27
</code></pre>
<p>The second solution seems complex but <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">really.</span> It does <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">run</span> completely <span style="background-color:yellow;">through</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">iterable</span> : <span style="background-color:yellow;">the</span> process stops <span style="background-color:yellow;">as</span> soon <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> wanted <span style="background-color:yellow;">occurence</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">found</span> . </p>
<br /><b># 5 </b><br /><p>Here <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">another</span> way <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">nth</span> <span style="background-color:yellow;">occurrence</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">x</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">itrbl</span> : </p>
<pre><code>def nthoccur(nth,x,itrbl):
    count,index = 0,0
    while count < nth:
        if index > len(itrbl) - 1:
            return None
        elif itrbl[index] == x:
            count += 1
            index += 1
        else:
            index += 1
    return index - 1
</code></pre>
<br /><b># 6 </b><br /><p>If <span style="background-color:yellow;">you</span> 're concerned with performance , <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> best <span style="background-color:yellow;">off</span> seeing <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">algorithmic</span> <span style="background-color:yellow;">optimizations</span> <span style="background-color:yellow;">you</span> can <span style="background-color:yellow;">make.</span> For <span style="background-color:yellow;">example</span> , <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> calling <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> same values , <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">may</span> wish <span style="background-color:yellow;">to</span> cache previous computations ( <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> 50th <span style="background-color:yellow;">occurrence</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">element</span> , <span style="background-color:yellow;">you</span> can <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">any</span> previous <span style="background-color:yellow;">occurrence</span> <span style="background-color:yellow;">in</span> O ( <span style="background-color:yellow;">1</span> ) <span style="background-color:yellow;">time</span> ) . </p>
<p>Otherwise , <span style="background-color:yellow;">you</span> want <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> sure <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">technique</span> works <span style="background-color:yellow;">on</span> ( lazy ) <span style="background-color:yellow;">iterators</span> . </p>
<p>The <span style="background-color:yellow;">most</span> * <span style="background-color:yellow;">in</span> * <span style="background-color:yellow;">elegant</span> <span style="background-color:yellow;">and</span> performance-happy way I can <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">implementing</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">as</span> : </p>
<pre><code>def indexOfNthOccurrence(N, element, stream):
    """for N>0, returns index or None"""
    seen = 0
    for i,x in enumerate(stream):
        if x==element:
            seen += 1
            if seen==N:
                return i
</code></pre>
<p>( <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">really</span> care <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">the</span> performance difference between <span style="background-color:yellow;">enumerate</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">techniques</span> , <span style="background-color:yellow;">you</span> will <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">resort</span> <span style="background-color:yellow;">to</span> profiling , <span style="background-color:yellow;">especially</span> with <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">numpy</span> <span style="background-color:yellow;">functions</span> , which <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">resort</span> <span style="background-color:yellow;">to</span> C ) </p>
<p>To preprocess <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">entire</span> <span style="background-color:yellow;">stream</span> <span style="background-color:yellow;">and</span> support O ( <span style="background-color:yellow;">1</span> ) queries : </p>
<pre><code>from collections import *
cache = defaultdict(list)
for i,elem in enumerate(YOUR_LIST):
    cache[elem] += [i]

# e.g. [3,2,3,2,5,5,1]
#       0 1 2 3 4 5 6
# cache: {3:[0,2], 1:[6], 2:[1,3], 5:[4,5]}
</code></pre>
<br />