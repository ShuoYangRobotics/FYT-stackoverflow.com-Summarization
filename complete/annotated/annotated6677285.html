<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-6677285</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">What</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">pythonic</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">merge</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">dictionaries</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">values</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">average</span> <span style="background-color:yellow;">values</span> ? </h2><pre><code>d1 = { 'apples': 2, 'oranges':5 }
d2 = { 'apples': 1, 'bananas': 3 }


result_dict = { 'apples': 1.5, 'oranges': 5, 'bananas': 3 }
</code></pre>
<p><span style="background-color:yellow;">What</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">best</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> ? </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-6</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>result = dict(d2)
for k in d1:
    if k in result:
        result[k] = (result[k] + d1[k]) / 2.0
    else:
        result[k] = d1[k]
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">dictionaries</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>dicts = ({"a": 5},{"b": 2, "a": 10}, {"a": 15, "b": 4})
keys = set()
averaged = {}
for d in dicts:
    keys.update(d.keys())
for key in keys:
    values = [d[key] for d in dicts if key in d]
    averaged[key] = float(sum(values)) / len(values)
print averaged
# {'a': 10.0, 'b': 3.0}
</code></pre>
<p><span style="background-color:yellow;">Update</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">@</span> <span style="background-color:yellow;">mhyfritz</span> <span style="background-color:yellow;">showed</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">reduce</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">!</span> </p>
<pre><code>dicts = ({"a": 5},{"b": 2, "a": 10}, {"a": 15, "b": 4})
averaged = {}
keys = set().union(*dicts)
for key in keys:
    values = [d[key] for d in dicts if key in d]
    averaged[key] = float(sum(values)) / len(values)
print averaged
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">Your</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">'Pythonic</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">way</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Pythonic</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">clear.</span> <span style="background-color:yellow;">There</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">!</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">dicts</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solutions</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">assume</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">great</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">they</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">simpler</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">easier</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">read</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">maintain</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">However</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">often</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">idea</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">means</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">wo</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">duplicate</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">bulk</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">logic</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">cases</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">dictionaries</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">example</span> . </p>
<p><span style="background-color:yellow;">As</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">addendum</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">phant0m</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">nice</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">features</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">readable.</span> <span style="background-color:yellow;">We</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">comprehension</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>[d[key] for d in dicts if key in d]
</code></pre>
<p><span style="background-color:yellow;">Use</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">useful</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">type</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>keys = set()
keys.update(d.keys())
</code></pre>
<p><span style="background-color:yellow;">And</span> <span style="background-color:yellow;">generally</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">type</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">globals</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>d.keys()
keys.update( ... )
keys.update
len(values)
</code></pre>
<p><span style="background-color:yellow;">Thinking</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">implementing</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">solve</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">thing</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">making</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">elegant</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">readable</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">utilising</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">power</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">people</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">deem</span> <span style="background-color:yellow;">'Pythonic'</span> . </p>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">phant0m</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Yet</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>result = dict(d1)
for (k,v) in d2.items():
    result[k] = (result.get(k,v) + v) / 2.0
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">Counter</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">Generators</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">useful</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">situation</span> </p>
<p><span style="background-color:yellow;">General</span> <span style="background-color:yellow;">Case</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> d1 = { 'apples': 2, 'oranges':5 }
>>> d2 = { 'apples': 1, 'bananas': 3 }
>>> all_d=[d1,d2]
>>> from collections import Counter
>>> counts=Counter(sum((d.keys() for d in all_d),[]))
>>> counts
Counter({'apples': 2, 'oranges': 1, 'bananas': 1})
>>> s=lambda k: sum((d.get(k,0) for d in all_d))
>>> result_set=dict(((k,1.0*s(k)/counts[k]) for k in counts.keys()))
>>> result_set
{'apples': 1.5, 'oranges': 5.0, 'bananas': 3.0}
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><pre><code>d1 = { 'apples': 2, 'oranges':5 }
d2 = { 'apples': 1, 'bananas': 3, 'oranges':0 }
dicts = [d1, d2]

result_dict = {}

for dict in dicts:
    for key, value in dict.iteritems():
        if key in result_dict:
            result_dict[key].append(value)
        else:
            result_dict[key] = [value]

for key, values in result_dict.iteritems():
    result_dict[key] = float(sum(result_dict[key])) / len(result_dict[key])

print result_dict
</code></pre>
<br />