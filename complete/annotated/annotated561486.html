<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-561486</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">shortest</span> <span style="background-color:yellow;">url-safe</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> ? </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">shortest</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">representing</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">URL.</span> <span style="background-color:yellow;">For</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">11234</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">shortened</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">'2be2</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">hexadecimal.</span> <span style="background-color:yellow;">Since</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">64</span> <span style="background-color:yellow;">character</span> <span style="background-color:yellow;">encoding</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">possible</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">represent</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">characters</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">hexadecimal.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">ca</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">figure</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">cleanest</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">back</span> <span style="background-color:yellow;">again</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">Python</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">dealing</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">bytestrings</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">maybe</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">binary</span> <span style="background-color:yellow;">representation</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">string...</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">either</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-11</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">spirit</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Douglas</span> <span style="background-color:yellow;">Leeder</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">changes</span> <span style="background-color:yellow;">:</span> </p>
<ul><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">actual</span> <span style="background-color:yellow;">Base64</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">padding</span> <span style="background-color:yellow;">characters</span> <span style="background-color:yellow;">Instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">converting</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">byte-string</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">256</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">converts</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">directly</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">64</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">advantage</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">letting</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">represent</span> <span style="background-color:yellow;">negative</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">sign</span> <span style="background-color:yellow;">character</span> . <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">ALPHABET</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">string.ascii_uppercase</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">string.ascii_lowercase</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">\</span> <span style="background-color:yellow;">string.digits</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">'-_</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">ALPHABET_REVERSE</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">c</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">c</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">enumerate</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ALPHABET</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">BASE</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">len</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ALPHABET</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">SIGN_CHARACTER</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">$</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">def</span> <span style="background-color:yellow;">num_encode</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">&lt</span> <span style="background-color:yellow;">;</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">SIGN_CHARACTER</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">num_encode</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">-n</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">True</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">r</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">divmod</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">BASE</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">s.append</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ALPHABET</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">r</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">break</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">''.join</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">reversed</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">def</span> <span style="background-color:yellow;">num_decode</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">SIGN_CHARACTER</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">-num_decode</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">0</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">c</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">BASE</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">ALPHABET_REVERSE</span> <span style="background-color:yellow;">[</span> <span style="background-color:yellow;">c</span> <span style="background-color:yellow;">]</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">n</span> </ul>
<hr />
<pre><code>    >>> num_encode(0)
    'A'
    >>> num_encode(64)
    'BA'
    >>> num_encode(-(64**5-1))
    '$_____'
</code></pre>
<hr />
<p><span style="background-color:yellow;">A</span> <span style="background-color:yellow;">few</span> <span style="background-color:yellow;">side</span> <span style="background-color:yellow;">notes</span> <span style="background-color:yellow;">:</span> </p>
<ul>
<li>You could (<em>marginally</em>) increase the human-readibility of the base-64 numbers by putting string.digits first in the alphabet (and making the sign character '-'); I chose the order that I did based on Python's urlsafe_b64encode.</li>
<li>If you're encoding a lot of negative numbers, you could increase the efficiency by using a sign bit or one's/two's complement instead of a sign character.</li>
<li>You should be able to easily adapt this code to different bases by changing the alphabet, either to restrict it to only alphanumeric characters or to add additional "URL-safe" characters.</li>
<li>I would recommend <em>against</em> using a representation other than base 10 in URIs in most cases—it adds complexity and makes debugging harder without significant savings compared to the overhead of HTTP—unless you're going for something TinyURL-esque.</li>
</ul>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">real</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">encoding</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">padding</span> <span style="background-color:yellow;">etc</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">potentially</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">resulting</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">larger</span> <span style="background-color:yellow;">strings</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">hex</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">small</span> <span style="background-color:yellow;">numbers.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">interoperate</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">anything</span> <span style="background-color:yellow;">else</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;">encoding.</span> <span style="background-color:yellow;">Eg.</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">note</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">digits</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">stored</span> <span style="background-color:yellow;">least-significant</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">avoid</span> <span style="background-color:yellow;">extra</span> <span style="background-color:yellow;">reverse</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">calls</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def make_encoder(baseString):
    size = len(baseString)
    d = dict((ch, i) for (i, ch) in enumerate(baseString)) # Map from char -> value
    if len(d) != size:
        raise Exception("Duplicate characters in encoding string")

    def encode(x):
        if x==0: return baseString[0]  # Only needed if don't want '' for 0
        l=[]
        while x>0:
            l.append(baseString[x % size])
            x //= size
        return ''.join(l)

    def decode(s):
        return sum(d[ch] * size**i for (i,ch) in enumerate(s))

    return encode, decode

# Base 64 version:
encode,decode = make_encoder("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/")

assert decode(encode(435346456456)) == 435346456456
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">advantage</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">whatever</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">adding</span> <span style="background-color:yellow;">appropriate</span> <span style="background-color:yellow;">characters</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">encoder</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">string</span> . </p>
<p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">gains</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">larger</span> <span style="background-color:yellow;">bases</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">going</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">big</span> <span style="background-color:yellow;">however.</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">64</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">reduce</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">size</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">2/3rds</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">16</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">6</span> <span style="background-color:yellow;">bits/char</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">Each</span> <span style="background-color:yellow;">doubling</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">adds</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">per</span> <span style="background-color:yellow;">character.</span> <span style="background-color:yellow;">Unless</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">real</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">compact</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">hex</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">simplest</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">fastest</span> <span style="background-color:yellow;">option</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">encoding</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">represent</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">numeral</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">numeral</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">X</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">numeral</span> <span style="background-color:yellow;">represented</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">26</span> <span style="background-color:yellow;">letters</span> <span style="background-color:yellow;">available</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//en.wikipedia.org/wiki/Hexavigesimal</span> . <span style="background-color:yellow;"></span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">extend</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">larger</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">legal</span> <span style="background-color:yellow;">url</span> <span style="background-color:yellow;">characters</span> <span style="background-color:yellow;"></span> </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">atleast</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">able</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">base</span> <span style="background-color:yellow;">38</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">26</span> <span style="background-color:yellow;">letters</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">+</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">_</span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">converting</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">byte</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">web-safe</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import base64
output = base64.urlsafe_b64encode(s)
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">tricky</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">step</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">byte</span> <span style="background-color:yellow;">string</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">integers</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">small</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">off</span> <span style="background-color:yellow;">hex</span> <span style="background-color:yellow;">encoding</span> <span style="background-color:yellow;">them</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">saua</span> </p>
<p><span style="background-color:yellow;">Otherwise</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">hacky</span> <span style="background-color:yellow;">recursive</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def convertIntToByteString(i):
    if i == 0:
        return ""
    else:
        return convertIntToByteString(i >> 8) + chr(i & 255)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>data = ''
while n > 0:
    data = chr(n & 255) + data
    n = n >> 8
encoded = base64.urlsafe_b64encode(data).rstrip('=')
</code></pre>
<p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">decode</span> <span style="background-color:yellow;">s</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>data = base64.urlsafe_b64decode(s + '===')
decoded = 0
while len(data) > 0:
    decoded = (decoded << 8) | ord(data[0])
    data = data[1:]
</code></pre>
<p>In the same spirit as other for some “optimal” encoding, you can use <strong>73</strong> characters according to RFC 1738 (actually 74 if you count “+” as usable):</p>
<pre><code>alphabet = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz_`\"!$'()*,-."
encoded = ''
while n > 0:
    n, r = divmod(n, len(alphabet))
    encoded = alphabet[r] + encoded
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">decoding</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>decoded = 0
while len(s) > 0:
    decoded = decoded * len(alphabet) + alphabet.find(s[0])
    s = s[1:]
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">hacky</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def b64num(num_to_encode):
  h = hex(num_to_encode)[2:]     # hex(n) returns 0xhh, strip off the 0x
  h = len(h) & 1 and '0'+h or h  # if odd number of digits, prepend '0' which hex codec requires
  return h.decode('hex').encode('base64')
</code></pre>
<p><span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">replace</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">.encode</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">'base64</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">urlsafe_b64encode</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">maintain</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">library</span> <span style="background-color:yellow;">named</span> <span style="background-color:yellow;">zbase62</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//pypi.python.org/pypi/zbase62</span> </p>
<p><span style="background-color:yellow;">With</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">str</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">base-62</span> <span style="background-color:yellow;">encoded</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">vice</span> <span style="background-color:yellow;">versa</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Python 2.7.1+ (r271:86832, Apr 11 2011, 18:13:53) 
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> d = os.urandom(32)
>>> d
'C$\x8f\xf9\x92NV\x97\x13H\xc7F\x0c\x0f\x8d9}\xf5.u\xeeOr\xc2V\x92f\x1b=:\xc3\xbc'
>>> from zbase62 import zbase62
>>> encoded = zbase62.b2a(d)
>>> encoded
'Fv8kTvGhIrJvqQ2oTojUGlaVIxFE1b6BCLpH8JfYNRs'
>>> zbase62.a2b(encoded)
'C$\x8f\xf9\x92NV\x97\x13H\xc7F\x0c\x0f\x8d9}\xf5.u\xeeOr\xc2V\x92f\x1b=:\xc3\xbc'
</code></pre>
<p><span style="background-color:yellow;">However</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">str.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">comes</span> <span style="background-color:yellow;">built-in</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Python 3.2 (r32:88445, Mar 25 2011, 19:56:22)
[GCC 4.5.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import os
>>> d = os.urandom(32)
>>> d
b'\xe4\x0b\x94|\xb6o\x08\xe9oR\x1f\xaa\xa8\xe8qS3\x86\x82\t\x15\xf2"\x1dL%?\xda\xcc3\xe3\xba'
>>> int.from_bytes(d, 'big')
103147789615402524662804907510279354159900773934860106838120923694590497907642
>>> x= _ 
>>> x.to_bytes(32, 'big')
b'\xe4\x0b\x94|\xb6o\x08\xe9oR\x1f\xaa\xa8\xe8qS3\x86\x82\t\x15\xf2"\x1dL%?\xda\xcc3\xe3\xba'
</code></pre>
<p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">convert</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">int</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">vice</span> <span style="background-color:yellow;">versa</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">convenient</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">standard</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">know.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">guess</span> <span style="background-color:yellow;">maybe</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">copy</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">https</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//github.com/warner/foolscap/blob/46e3a041167950fa93e48f65dcf106a576ed110e/foolscap/banana.py</span> <span style="background-color:yellow;">#</span> <span style="background-color:yellow;">L41</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">zbase62</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">convenience</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">Base64</span> <span style="background-color:yellow;">takes</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">bytes/characters</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">multiples</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">adds</span> <span style="background-color:yellow;">padding</span> <span style="background-color:yellow;">otherwise</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">So</span> <span style="background-color:yellow;">representing</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">average</span> <span style="background-color:yellow;">int</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Base64</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">8</span> <span style="background-color:yellow;">bytes.</span> <span style="background-color:yellow;">Encoding</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">hex</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">8</span> <span style="background-color:yellow;">bytes.</span> <span style="background-color:yellow;">So</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">gain</span> <span style="background-color:yellow;">anything</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;">int</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">'encode</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">binary</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">suggest</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">struct</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> import struct, base64
>>> base64.b64encode(struct.pack('l', 47))
'LwAAAA=='
>>> struct.unpack('l', base64.b64decode(_))
(47,)
</code></pre>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">again</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">To</span> <span style="background-color:yellow;">strip</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">extra</span> <span style="background-color:yellow;">0s</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">numbers</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">small</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">full</span> <span style="background-color:yellow;">32-bit</span> <span style="background-color:yellow;">precision</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def pad(str, l=4):
    while len(str) < l:
        str = '\x00' + str
    return str

>>> base64.b64encode(struct.pack('!l', 47).replace('\x00', ''))
'Lw=='
>>> struct.unpack('!l', pad(base64.b64decode('Lw==')))
(47,)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">9</span> </b><br /><p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">shorten</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">representation</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">elsewhere.</span> <span style="background-color:yellow;">When</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">encode</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">shorter</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">longer</span> . </p>
<p><span style="background-color:yellow;">E.g.</span> <span style="background-color:yellow;">11234</span> <span style="background-color:yellow;">encoded</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">yield</span> <span style="background-color:yellow;">MTEyMzQ</span> <span style="background-color:yellow;">=</span> </p>
<p><span style="background-color:yellow;">When</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">overlooked</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">converting</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">digits</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">0-9</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">64</span> <span style="background-color:yellow;">character</span> <span style="background-color:yellow;">encoding.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">converting</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">4</span> <span style="background-color:yellow;">bytes</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">guaranteed</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">base64</span> <span style="background-color:yellow;">encoded</span> <span style="background-color:yellow;">string</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">33.33</span> <span style="background-color:yellow;">%</span> <span style="background-color:yellow;">longer</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">10</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">needed</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">signed</span> <span style="background-color:yellow;">integer</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">ended</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">going</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import struct, base64

def b64encode_integer(i):
   return base64.urlsafe_b64encode(struct.pack('i', i)).rstrip('=\n')
</code></pre>
<p><span style="background-color:yellow;">Example</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> b64encode_integer(1)
'AQAAAA'
>>> b64encode_integer(-1)
'_____w'
>>> b64encode_integer(256)
'AAEAAA'
</code></pre>
<br />