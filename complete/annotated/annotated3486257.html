<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-3486257</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">idiomatic</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">taking</span> <span style="background-color:yellow;">action</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">attempt</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">empty</span> <span style="background-color:yellow;">iterable</span> </h2><p><span style="background-color:yellow;">Suppose</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">looping</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">action</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">iterator</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">empty.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">best</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">are</span> </p>
<pre><code>for i in iterable:
     # do_something
if not iterable:
    # do_something_else
</code></pre>
<p><span style="background-color:yellow;">and</span> </p>
<pre><code>empty = True
for i in iterable:
    empty = False
    # do_something
if empty:
    # do_something_else
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">depends</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">being</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">collection</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">useless</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">passed</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">function/method</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">sets</span> <span style="background-color:yellow;">empty</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">every</span> <span style="background-color:yellow;">pass</span> <span style="background-color:yellow;">through</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">ugly</span> . </p>
<p><span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">missing</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">alternative</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">best</span> ? <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">really</span> <span style="background-color:yellow;">cool</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">clause</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">statement</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">handle</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">else</span> <span style="background-color:yellow;">makes</span> <span style="background-color:yellow;">not_found</span> <span style="background-color:yellow;">flags</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">away</span> . </p>
<hr />
<p><span style="background-color:yellow;">[</span> <span style="background-color:yellow;">Deleted</span> <span style="background-color:yellow;">specific</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">confusing</span> <span style="background-color:yellow;">people</span> <span style="background-color:yellow;">]</span> </p>
<hr />
<h2><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">clever</span> <span style="background-color:yellow;">hacks</span> . </h2>
<h2><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">solutions</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">involve</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">lot</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">code</span> </h2>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">language</span> <span style="background-color:yellow;">feature</span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">clear</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">pythonic</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">iterate</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">action</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">iterable</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">empty</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">experienced</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">programmer</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">understand.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">setting</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">flag</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">every</span> <span style="background-color:yellow;">iteration</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">fantastic</span> . <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">idiom</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">forget</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">it</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-8</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">quite</span> <span style="background-color:yellow;">hackish</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">exists</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">never</span> <span style="background-color:yellow;">happened</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>try:
    del i
except NameException: pass

for i in iterable:
    do_something(i)

try:
    del i
except NameException:
    do_something_else()
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">uglier</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">flag</span> <span style="background-color:yellow;">though</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Update</span> <span style="background-color:yellow;">2</span> </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">liked</span> <span style="background-color:yellow;">Odomontois</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">answer</span> . <span style="background-color:yellow;">IMHO</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">suited</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">written</span> <span style="background-color:yellow;">below</span> . </p>
<p><span style="background-color:yellow;">Update</span> </p>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">After</span> <span style="background-color:yellow;">reading</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">OP</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">comment</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">edited</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">too.</span> <span style="background-color:yellow;">See</span> <span style="background-color:yellow;">below</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def with_divisible(n, a, b, f):
 it = (i for i in xrange(a, b) if not i % n)
 for i in wrapper(it):
  f(i)

>>> with_divisible(1, 1, 1, lambda x: x)
Traceback (most recent call last):
  File "<pyshell#55>", line 1, in <module>
    with_divisible(1, 1, 1, lambda x: x)
  File "<pyshell#54>", line 3, in with_divisible
    for i in wrapper(it):
  File "<pyshell#46>", line 4, in wrapper
    raise EmptyIterableException("Empty")
EmptyIterableException: Empty

>>> with_divisible(7, 1, 21, lambda x: x)
7
14
...Snipped...
    raise EmptyIterableException("Empty")
EmptyIterableException: Empty
</code></pre>
<p><span style="background-color:yellow;">Original</span> <span style="background-color:yellow;">Answer</span> </p>
<p><span style="background-color:yellow;">Interesting</span> <span style="background-color:yellow;">problem.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">did</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">experiments</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">came</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>class EmptyIterableException(Exception):
    pass

def wrapper(iterable):
    for each in iterable:
        yield each
    raise EmptyIterableException("Empty")

try:
    for each in wrapper(iterable):
        do_something(each)
except EmptyIterableException, e:
    do_something_else()
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><pre><code>if not map(do_something_callable,iterable) : 
    # do something else
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">cleanest</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code># first try with exceptions
def nonempty( iter ):
    """ returns `iter` if iter is not empty, else raises TypeError """
    try:
        first = next(iter)
    except StopIteration:
        raise TypeError("Emtpy Iterator")
    yield first
    for item in iter:
        yield item


# a version without exceptions. Seems nicer:
def isempty( iter ):
    """ returns `(True, ())` if `iter` if is empty else `(False, iter)`
         Don't use the original iterator! """
    try:
        first = next(iter)
    except StopIteration:
        return True, ()
    else:
        def iterator():
            yield first
            for item in iter:
                yield item
        return False, iterator()



for x in ([],[1]):
    # first version
    try:
        list(nonempty(iter(x))) # trying to consume a empty iterator raises
    except TypeError:
        print x, "is empty"
    else:
        print x, "is not empty"

    # with isempty
    empty, it = isempty(iter(x))
    print x,  "is", ("empty" if empty else "not empty")
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">general</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">forward</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">iterator</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">partially</span> <span style="background-color:yellow;">checked</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">being</span> <span style="background-color:yellow;">consumed</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">itertools.tee</span> . <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">copies</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">iterator</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">emptiness</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">consuming</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">copy</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">start</span> . </p>
<pre><code>from itertools import tee
it1, it2 = tee(iterable)
try:
    it1.next()
    for i in it2:
        do_some_action(i) #iterator is not empty
except StopIteration:
    do_empty_action() #iterator is empty
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">StopIteration</span> <span style="background-color:yellow;">exception</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">bound</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">it1.next</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">StopIteration</span> <span style="background-color:yellow;">exceptions</span> <span style="background-color:yellow;">raised</span> <span style="background-color:yellow;">froom</span> <span style="background-color:yellow;">inside</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">terminate</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">loop</span> . </p>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">those</span> <span style="background-color:yellow;">who</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">exceptions</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">islice</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">set</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;">step</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>from itertools import tee, islice
it1, it2 = tee(iterable)
for _ in islice(it1, 1):
    #loop entered if iterator is not empty
    for i in it2:
        do_some_action(i)
    break #if loop entered don't execute the else section
else:
    do_empty_action()
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">personally</span> <span style="background-color:yellow;">prefer</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">style.</span> <span style="background-color:yellow;">YMMV</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">What</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">reversing</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>if iterable:
    for i in iterable:
        do_something(i)
else:
    do_something_else()
</code></pre>
<p><span style="background-color:yellow;">OK</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">!</span> </p>
<p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//code.activestate.com/recipes/413614-testing-for-an-empty-iterator/</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">combination</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">Michael</span> <span style="background-color:yellow;">Mrozek</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">FM</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">answers</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def with_divisible(n, a, b, f):
    '''apply f to every integer x such that n divides x and a <= x < b'''
    it = (i for i in xrange(a, b) if not i % n)
    for i in it:
        f(i)
    try: i            # test if `it` was empty
    except NameError: print('do something else')

def g(i):
    print i,

with_divisible( 3, 1, 10, g)   # Prints 3 6 9.
with_divisible(33, 1, 10, g)   # Prints "do something else"
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">Generators</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">'gi_frame</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">property</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">None</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">generator</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">exhausted</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">StopIteration</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">been</span> <span style="background-color:yellow;">raised.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">acceptable</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import types

def do(x, f, f_empty):
    if type(x) == types.GeneratorType:
        # generators have a 'gi_frame' property,
        # which is None once the generator is exhausted
        if x.gi_frame:
            # not empty
            return f(x)
        return f_empty(x)
    if x:
        return f(x)
    return f_empty(x)

def nempty(lst):
    print lst, 'not empty'

def empty(lst):
    print 'Twas empty!'

# lists
do([2,3,4], nempty, empty)
do([], nempty, empty)

# generators
do((i for i in range(5)), nempty, empty)
gen = (i for i in range(1))
gen.next()
try:
    gen.next()
except StopIteration:
    pass
do(gen, nempty, empty)
</code></pre>
<br />