<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-1456617</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Return</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">word</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">word</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">retrieve</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">word</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">believe</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">best</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">efficient.</span> <span style="background-color:yellow;">Please</span> <span style="background-color:yellow;">assist</span> . </p>
<pre><code>import fileinput
import _random
file = [line for line in fileinput.input("/etc/dictionaries-common/words")]
rand = _random.Random()
print file[int(rand.random() * len(file))],
</code></pre>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-9</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">defines</span> <span style="background-color:yellow;">choice</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import random

words = [line.strip() for line in open('/etc/dictionaries-common/words')]
print random.choice(words)
</code></pre>
<p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">assumes</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">word</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">itself</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">big</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">perform</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">operation</span> <span style="background-color:yellow;">frequently</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">constantly</span> <span style="background-color:yellow;">rereading</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">impacts</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">application</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;">negatively</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">Another</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">getline</span> </p>
<pre><code>import linecache
import random
line_number = random.randint(0, total_num_lines)
linecache.getline('/etc/dictionaries-common/words', line_number)
</code></pre>
<p><span style="background-color:yellow;">From</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">documentation</span> <span style="background-color:yellow;">:</span> </p>
<blockquote><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">linecache</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">allows</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">attempting</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">optimize</span> <span style="background-color:yellow;">internally</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">cache</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">common</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">read</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;">file</span> </blockquote>
<p><span style="background-color:yellow;">EDIT</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">calculate</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">total</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">once</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">store</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">unlikely</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">change</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><pre><code>>>> import random
>>> random.choice(list(open('/etc/dictionaries-common/words')))
'jaundiced\n'
</code></pre>
<p><span style="background-color:yellow;">It</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">efficient</span> <span style="background-color:yellow;">human-time-wise</span> . </p>
<p><span style="background-color:yellow;">btw</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">implementation</span> <span style="background-color:yellow;">coincides</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">stdlib</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">random.py</span> <span style="background-color:yellow;">:</span> </p>
<pre><code> def choice(self, seq):
    """Choose a random element from a non-empty sequence."""
    return seq[int(self.random() * len(seq))]
</code></pre>
<h3><span style="background-color:yellow;">Measure</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">performance</span> </h3>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">wondering</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">relative</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">presented</span> <span style="background-color:yellow;">solutions.</span> <span style="background-color:yellow;">linecache</span> <span style="background-color:yellow;">-based</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">obvious</span> <span style="background-color:yellow;">favorite.</span> <span style="background-color:yellow;">How</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">slower</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">random.choice</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">one-liner</span> <span style="background-color:yellow;">compared</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">honest</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">implemented</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">select_random_line</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> ? </p>
<pre><code># nadia_known_num_lines   9.6e-06 seconds 1.00
# nadia                   0.056 seconds 5843.51
# jfs                     0.062 seconds 1.10
# dcrosta_no_strip        0.091 seconds 1.48
# dcrosta                 0.13 seconds 1.41
# mark_ransom_no_strip    0.66 seconds 5.10
# mark_ransom_choose_from 0.67 seconds 1.02
# mark_ransom             0.69 seconds 1.04
</code></pre>
<p><span style="background-color:yellow;"></span> <span style="background-color:yellow;">Each</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">called</span> <span style="background-color:yellow;">10</span> <span style="background-color:yellow;">times</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">cached</span> <span style="background-color:yellow;">performance</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">These</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">show</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">dcrosta</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">deliberate</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">mark_ransom</span> <span style="background-color:yellow;"></span> . </p>
<h3><span style="background-color:yellow;">Code</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">comparison</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">gist</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3>
<pre><code>import linecache
import random
from timeit import default_timer


WORDS_FILENAME = "/etc/dictionaries-common/words"


def measure(func):
    measure.func_to_measure.append(func)
    return func
measure.func_to_measure = []


@measure
def dcrosta():
    words = [line.strip() for line in open(WORDS_FILENAME)]
    return random.choice(words)


@measure
def dcrosta_no_strip():
    words = [line for line in open(WORDS_FILENAME)]
    return random.choice(words)


def select_random_line(filename):
    selection = None
    count = 0
    for line in file(filename, "r"):
        if random.randint(0, count) == 0:
            selection = line.strip()
            count = count + 1
    return selection


@measure
def mark_ransom():
    return select_random_line(WORDS_FILENAME)


def select_random_line_no_strip(filename):
    selection = None
    count = 0
    for line in file(filename, "r"):
        if random.randint(0, count) == 0:
            selection = line
            count = count + 1
    return selection


@measure
def mark_ransom_no_strip():
    return select_random_line_no_strip(WORDS_FILENAME)


def choose_from(iterable):
    """Choose a random element from a finite `iterable`.

    If `iterable` is a sequence then use `random.choice()` for efficiency.

    Return tuple (random element, total number of elements)
    """
    selection, i = None, None
    for i, item in enumerate(iterable):
        if random.randint(0, i) == 0:
            selection = item

    return selection, (i+1 if i is not None else 0)


@measure
def mark_ransom_choose_from():
    return choose_from(open(WORDS_FILENAME))


@measure
def nadia():
    global total_num_lines
    total_num_lines = sum(1 for _ in open(WORDS_FILENAME))

    line_number = random.randint(0, total_num_lines)
    return linecache.getline(WORDS_FILENAME, line_number)


@measure
def nadia_known_num_lines():
    line_number = random.randint(0, total_num_lines)
    return linecache.getline(WORDS_FILENAME, line_number)


@measure
def jfs():
    return random.choice(list(open(WORDS_FILENAME)))


def timef(func, number=1000, timer=default_timer):
    """Return number of seconds it takes to execute `func()`."""
    start = timer()
    for _ in range(number):
        func()
    return (timer() - start) / number


def main():
    # measure time
    times = dict((f.__name__, timef(f, number=10))
                 for f in measure.func_to_measure)

    # print from fastest to slowest
    maxname_len = max(map(len, times))
    last = None
    for name in sorted(times, key=times.__getitem__):
        print "%s %4.2g seconds %.2f" % (name.ljust(maxname_len), times[name],
                                         last and times[name] / last or 1)
        last = times[name]


if __name__ == "__main__":
    main()
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">article</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">help</span> </p>
<p><span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//www.bryceboe.com/2009/03/23/random-lines-from-a-file/</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p>Pythonizing my answer from <a href="http://stackoverflow.com/questions/232237/whats-the-best-way-to-return-a-random-line-in-a-text-file-using-c">Whatâ€™s the best way to return a random line in a text file using C?</a> :</p>
<pre><code>import random

def select_random_line(filename):
    selection = None
    count = 0
    for line in file(filename, "r"):
        if random.randint(0, count) == 0:
            selection = line.strip()
        count = count + 1
    return selection

print select_random_line("/etc/dictionaries-common/words")
</code></pre>
<p><span style="background-color:yellow;">Edit</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">original</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">readlines</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">did</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">work</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">thought</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">was</span> <span style="background-color:yellow;">totally</span> <span style="background-color:yellow;">unnecessary.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">version</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">iterate</span> <span style="background-color:yellow;">through</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">reading</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">memory</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;">pass</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">efficient</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">seen</span> <span style="background-color:yellow;">thus</span> <span style="background-color:yellow;">far</span> . </p>
<h3><span style="background-color:yellow;">Generalized</span> <span style="background-color:yellow;">version</span> </h3>
<pre><code>import random

def choose_from(iterable):
    """Choose a random element from a finite `iterable`.

    If `iterable` is a sequence then use `random.choice()` for efficiency.

    Return tuple (random element, total number of elements)
    """
    selection, i = None, None
    for i, item in enumerate(iterable):
        if random.randint(0, i) == 0:
            selection = item

    return selection, (i+1 if i is not None else 0)
</code></pre>
<h3><span style="background-color:yellow;">Examples</span> </h3>
<pre><code>print choose_from(open("/etc/dictionaries-common/words"))
print choose_from(dict(a=1, b=2))
print choose_from(i for i in range(10) if i % 3 == 0)
print choose_from(i for i in range(10) if i % 11 == 0 and i) # empty
print choose_from([0]) # one element
chunk, n = choose_from(urllib2.urlopen("http://google.com"))
print (chunk[:20], n)
</code></pre>
<h3><span style="background-color:yellow;">Output</span> </h3>
<pre>
('yeps\n', 98569)
('a', 2)
(6, 4)
(None, 0)
(0, 1)
('window._gjp && _gjp(', 10)
</pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">fileinput</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import random
data = open("/etc/dictionaries-common/words").readlines()
print random.choice(data)
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">data</span> <span style="background-color:yellow;">instead</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">predefined</span> <span style="background-color:yellow;">type</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">far</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">algorithm</span> <span style="background-color:yellow;">goes</span> <span style="background-color:yellow;">:</span> </p>
<ol><span style="background-color:yellow;">Find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">size</span> <span style="background-color:yellow;">Do</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">seek</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">seek</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">Find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">previous</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">whitespace</span> <span style="background-color:yellow;">character</span> <span style="background-color:yellow;">Return</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">word</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">starts</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">whitespace</span> <span style="background-color:yellow;">character</span> </ol>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">Efficiency</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">verbosity</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">thing</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">case.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">tempting</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">most</span> <span style="background-color:yellow;">beautiful</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">pythonic</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">everything</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">I/O</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">stick</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">classic</span> <span style="background-color:yellow;">fopen-style</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">low-level</span> <span style="background-color:yellow;">interaction</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">few</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">code</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">copy</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">paste</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">claim</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">own</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">others</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">they</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">look</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//mail.python.org/pipermail/tutor/2007-July/055635.html</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">There</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">few</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">optimize</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">problem.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">optimize</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">speed</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">space</span> . </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">quick</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">memory-hungry</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">read</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">entire</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">file.readlines</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">random.choice</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> </p>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">memory-efficient</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">calling</span> <span style="background-color:yellow;">somefile.readline</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">repeatedly</span> <span style="background-color:yellow;">until</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">generate</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">smaller</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">number</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">seek</span> <span style="background-color:yellow;">back</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">beginning</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">finally</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">somefile.readline</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">times.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">call</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">somefile.readline</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">desired</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">line.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">wastes</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">memory</span> <span style="background-color:yellow;">holding</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">unnecessary</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">lines.</span> <span style="background-color:yellow;">Of</span> <span style="background-color:yellow;">course</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">plan</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">getting</span> <span style="background-color:yellow;">lots</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">random</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">horribly</span> <span style="background-color:yellow;">inefficient</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">keep</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">entire</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">memory</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">approach</span> . </p>
<br />