<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-4139508</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">behavior</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">inheritance</span> ? </h2><p><span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">reasonable</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">behavior</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Ruby</span> <span style="background-color:yellow;">--</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">inheritance</span> ? </p>
<pre><code>class Mixin(object):
    def b(self): print "b()"
    def c(self): print "c()"

class Foo(object):
    # Somehow mix in the behavior of the Mixin class,
    # so that all of the methods below will run and
    # the issubclass() test will be False.

    def a(self): print "a()"

f = Foo()
f.a()
f.b()
f.c()
print issubclass(Foo, Mixin)
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">vague</span> <span style="background-color:yellow;">idea</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">decorator</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">attempts</span> <span style="background-color:yellow;">led</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">confusion.</span> <span style="background-color:yellow;">Most</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">searches</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">topic</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">led</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">direction</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">inheritance</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">complex</span> <span style="background-color:yellow;">scenarios</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">multiple</span> <span style="background-color:yellow;">inheritance</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">achieve</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">behavior</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-8</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">add</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">functions</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>Foo.b = Mixin.b.im_func
Foo.c = Mixin.c.im_func
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><pre><code>def mixer(*args):
    """Decorator for mixing mixins"""
    def inner(cls):
        for a,k in ((a,k) for a in args for k,v in vars(a).items() if callable(v)):
            setattr(cls, k, getattr(a, k).im_func)
        return cls
    return inner

class Mixin(object):
    def b(self): print "b()"
    def c(self): print "c()"

class Mixin2(object):
    def d(self): print "d()"
    def e(self): print "e()"


@mixer(Mixin, Mixin2)
class Foo(object):
    # Somehow mix in the behavior of the Mixin class,
    # so that all of the methods below will run and
    # the issubclass() test will be False.

    def a(self): print "a()"

f = Foo()
f.a()
f.b()
f.c()
f.d()
f.e()
print issubclass(Foo, Mixin)
</code></pre>
<p><span style="background-color:yellow;">output</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>a()
b()
c()
d()
e()
False
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">EDIT</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">Fixed</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">probably</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">construed</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bug.</span> <span style="background-color:yellow;">Now</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">builds</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">new</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">updates</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">dict.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">prevents</span> <span style="background-color:yellow;">mixins</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">overwriting</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">defined</span> <span style="background-color:yellow;">directly</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">class.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">still</span> <span style="background-color:yellow;">untested</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">work.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">busy</span> <span style="background-color:yellow;">ATM</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ll</span> <span style="background-color:yellow;">test</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">later.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">worked</span> <span style="background-color:yellow;">fine</span> <span style="background-color:yellow;">except</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">syntax</span> <span style="background-color:yellow;">error.</span> <span style="background-color:yellow;">In</span> <span style="background-color:yellow;">retrospect</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">decided</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">further</span> <span style="background-color:yellow;">improvements</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">prefer</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">even</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">complicated.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">test</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">applies</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wont</span> <span style="background-color:yellow;">duplicate</span> <span style="background-color:yellow;">it</span> . </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">metaclass</span> <span style="background-color:yellow;">factory</span> <span style="background-color:yellow;">:</span> </p>
<pre><code> import inspect

 def add_mixins(*mixins):
     Dummy = type('Dummy', mixins, {})
     d = {}

     for mixin in reversed(inspect.getmro(Dummy)):
         d.update(mixin.__dict__)

     class WithMixins(type):
         def __new__(meta, classname, bases, classdict):
             d.update(classdict)
             return super(WithMixins, meta).__new__(meta, classname, bases, d)
     return WithMixins 
</code></pre>
<p><span style="background-color:yellow;">then</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">:</span> </p>
<pre><code> class Foo(object):
     __metaclass__ = add_mixins(Mixin1, Mixin2)

     # rest of the stuff
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">familiar</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">metaprogramming</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">much</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">done</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Ruby</span> . </p>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">Ruby</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">basically</span> <span style="background-color:yellow;">consists</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">pointer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">pointer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">constant</span> <span style="background-color:yellow;">dictionary.</span> <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">consists</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">three</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">pointer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">pointer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">constant</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">pointer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">superclass</span> . </p>
<p><span style="background-color:yellow;">When</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">mix</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">M</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">C</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">happens</span> <span style="background-color:yellow;">:</span> </p>
<ol>
<li>an anonymous class <code>α</code> is created (this is called an <em>include class</em>)</li>
<li><code>α</code>'s method dictionary and constant dictionary pointers are set equal to <code>M</code>'s</li>
<li><code>α</code>'s superclass pointer is set equal to <code>C</code>'s</li>
<li><code>C</code>'s superclass pointer is set to <code>α</code></li>
</ol>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">words</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">fake</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">shares</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">behavior</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">injected</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">inheritance</span> <span style="background-color:yellow;">hierarchy.</span> <span style="background-color:yellow;">So</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">Ruby</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">inheritance</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">composition</span> . </p>
<p>I left out a couple of subleties above: first off, the module doesn't actually get inserted as <code>C</code>'s superclass, it gets inserted as <code>C</code>'s superclasses' (which is <code>C</code>'s singleton class) superclass. And secondly, if the mixin itself has mixed in other mixins, then <em>those</em> also get wrapped into fake classes which get inserted directly above <code>α</code>, and this process is applied recursively, in case the mixed in mixins in turn have mixins.</p>
<p><span style="background-color:yellow;">Basically</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">whole</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">hierarchy</span> <span style="background-color:yellow;">gets</span> <span style="background-color:yellow;">flattened</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">straight</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">spliced</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">inheritance</span> <span style="background-color:yellow;">chain</span> . </p>
<p><span style="background-color:yellow;">AFAIK</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">allows</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">superclass</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">es</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">Ruby</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">allow</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">access</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">dict</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">again</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">impossible</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Ruby</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">able</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">implement</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">yourself</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p>This one is based on the way it's done in ruby as <a href="http://stackoverflow.com/questions/4139508/in-python-can-one-implement-mixin-behavior-without-using-inheritance/4139785#4139785">explained by Jörg W Mittag</a>. All of the wall of code after <code>if __name__=='__main__'</code> is test/demo code. There's actually only 13 lines of real code to it.</p>
<pre><code>import inspect

def add_mixins(*mixins):
    Dummy = type('Dummy', mixins, {})
    d = {}

    # Now get all the class attributes. Use reversed so that conflicts
    # are resolved with the proper priority. This rules out the possibility
    # of the mixins calling methods from their base classes that get overridden
    # using super but is necessary for the subclass check to fail. If that wasn't a
    # requirement, we would just use Dummy above (or use MI directly and
    # forget all the metaclass stuff).

    for base in reversed(inspect.getmro(Dummy)):
        d.update(base.__dict__)

    # Create the mixin class. This should be equivalent to creating the
    # anonymous class in Ruby.
    Mixin = type('Mixin', (object,), d)

    class WithMixins(type):
        def __new__(meta, classname, bases, classdict):
            # The check below prevents an inheritance cycle from forming which
            # leads to a TypeError when trying to inherit from the resulting
            # class.
            if not any(issubclass(base, Mixin) for base in bases):
                # This should be the the equivalent of setting the superclass 
                # pointers in Ruby.
                bases = (Mixin,) + bases
            return super(WithMixins, meta).__new__(meta, classname, bases,
                                                   classdict)

    return WithMixins 


if __name__ == '__main__':

    class Mixin1(object):
        def b(self): print "b()"
        def c(self): print "c()"

    class Mixin2(object):
        def d(self): print "d()"
        def e(self): print "e()"

    class Mixin3Base(object):
        def f(self): print "f()"

    class Mixin3(Mixin3Base): pass

    class Foo(object):
        __metaclass__ = add_mixins(Mixin1, Mixin2, Mixin3)

        def a(self): print "a()"

    class Bar(Foo):
        def f(self): print "Bar.f()"

    def test_class(cls):
        print "Testing {0}".format(cls.__name__)
        f = cls()
        f.a()
        f.b()
        f.c()
        f.d()
        f.e()
        f.f()
        print (issubclass(cls, Mixin1) or 
               issubclass(cls, Mixin2) or
               issubclass(cls, Mixin3))

    test_class(Foo)
    test_class(Bar)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">decorate</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">classes</span> <span style="background-color:yellow;">__getattr__</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">mixin.</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">problem</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">require</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">type</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">mixin</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">their</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">parameter</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">decorate</span> <span style="background-color:yellow;">__init__</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">create</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">mixin-object.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">believe</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">achieve</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">decorator</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><pre><code>from functools import partial
class Mixin(object):
    @staticmethod
    def b(self): print "b()"
    @staticmethod
    def c(self): print "c()"

class Foo(object):
    def __init__(self, mixin_cls):
        self.delegate_cls = mixin_cls

    def __getattr__(self, attr):
        if hasattr(self.delegate_cls, attr):
            return partial(getattr(self.delegate_cls, attr), self)

    def a(self): print "a()"

f = Foo(Mixin)
f.a()
f.b()
f.c()
print issubclass(Foo, Mixin)
</code></pre>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">basically</span> <span style="background-color:yellow;">uses</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Mixin</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">container</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">hold</span> <span style="background-color:yellow;">ad-hoc</span> <span style="background-color:yellow;">functions</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">behave</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">taking</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">instance</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">self</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">first</span> <span style="background-color:yellow;">argument.</span> <span style="background-color:yellow;">__getattr__</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">redirect</span> <span style="background-color:yellow;">missing</span> <span style="background-color:yellow;">calls</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">methods-alike</span> <span style="background-color:yellow;">functions</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">passes</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">tests</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">shown</span> <span style="background-color:yellow;">below.</span> <span style="background-color:yellow;">But</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">guarantee</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">things</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want.</span> <span style="background-color:yellow;">Make</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">thorough</span> <span style="background-color:yellow;">test</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">sure</span> . </p>
<pre><code>$ python mixin.py 
a()
b()
c()
False
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">Composition</span> ? <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">simplest</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">handle</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">either</span> <span style="background-color:yellow;">wrap</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">decorator</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">into</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">definition</span> <span style="background-color:yellow;">itself.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">usually</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">put</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">share</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">classes</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">override</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">behavior</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">modified</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">names</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">name.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">sloppy</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">works</span> . </p>
<p><span style="background-color:yellow;">For</span> <span style="background-color:yellow;">example</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">init_covers</span> <span style="background-color:yellow;">behavior</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">bedg.py</span> <span style="background-color:yellow;"></span> </p>
<pre><code>import cove as cov


def init_covers(n):
    n.covers.append(cov.Cover((set([n.id]))))
    id_list = []
    for a in n.neighbors:
        id_list.append(a.id)
    n.covers.append(cov.Cover((set(id_list))))

def update_degree(n):
    for a in n.covers:
        a.degree = 0
        for b in n.covers:
            if  a != b:
                a.degree += len(a.node_list.intersection(b.node_list))    
</code></pre>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">bar</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">import</span> <span style="background-color:yellow;">bedg</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">foo</span> </p>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">change</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">foo</span> <span style="background-color:yellow;">behaviors</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">class</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">inherited</span> <span style="background-color:yellow;">bar</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">write</span> </p>
<p><span style="background-color:yellow;">import</span> <span style="background-color:yellow;">bild</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">foo</span> </p>
<p><span style="background-color:yellow;">Like</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">sloppy</span> . </p>
<br />