<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-977458</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">How</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">parsing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">log</span> ? </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">parse</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">log</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">format</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>===== Item 5483/14800  =====
This is the item title
Info: some note
===== Item 5483/14800 (Update 1/3) =====
This is the item title
Info: some other note
===== Item 5483/14800 (Update 2/3) =====
This is the item title
Info: some more notes
===== Item 5483/14800 (Update 3/3) =====
This is the item title
Info: some other note
Test finished. Result Foo. Time 12 secunds.
Stats: CPU 0.5 MEM 5.3
===== Item 5484/14800  =====
This is this items title
Info: some note
Test finished. Result Bar. Time 4 secunds.
Stats: CPU 0.9 MEM 4.7
===== Item 5485/14800  =====
This is the title of this item
Info: some note
Test finished. Result FooBar. Time 7 secunds.
Stats: CPU 2.5 MEM 2.8
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">extract</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">title</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">Item</span> <span style="background-color:yellow;">5484/14800</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> . <span style="background-color:yellow;">So</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">keep</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">line</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">title</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">title</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">discard</span> <span style="background-color:yellow;">everything</span> <span style="background-color:yellow;">else</span> . <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">issue</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">sometimes</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">notes</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">maxim</span> <span style="background-color:yellow;">3</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">sometimes</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">displayed</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">additional</span> <span style="background-color:yellow;">notes</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">makes</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">tricky</span> . <span style="background-color:yellow;">Any</span> <span style="background-color:yellow;">help</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">appreciated.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">parser</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">actual</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">pointing</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">achive</span> <span style="background-color:yellow;">this</span> ? </p>
<p><span style="background-color:yellow;">LE</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">discard</span> <span style="background-color:yellow;">everything</span> <span style="background-color:yellow;">else</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>('This is the item title','Foo')
then
('This is this items title','Bar')
</code></pre>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-9</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><pre><code>1) Loop through every line in the log

    a)If line matches appropriate Regex:

      Display/Store Next Line as the item title.
      Look for the next line containing "Result 
      XXXX." and parse out that result for 
      including in the result set.
</code></pre>
<p><span style="background-color:yellow;">EDIT</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">added</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">now</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">'re</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">did</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">ask</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">real</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">too</span> <span style="background-color:yellow;">great</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">opportunity</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">generator-based</span> <span style="background-color:yellow;">text</span> <span style="background-color:yellow;">muncher</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">pass</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">:</span> </p>
<pre><code># data is a multiline string containing your log, but this
# function could be easily rewritten to accept a file handle.
def get_stats(data):

   title = ""
   grab_title = False

   for line in data.split('\n'):
      if line.startswith("====="):
         grab_title = True
      elif grab_title:
         grab_title = False
         title = line
      elif line.startswith("Test finished."):
         start = line.index("Result") + 7
         end   = line.index("Time")   - 2
         yield (title, line[start:end])


for d in get_stats(data):
   print d


# Returns:
# ('This is the item title', 'Foo')
# ('This is this items title', 'Bar')
# ('This is the title of this item', 'FooBar')
</code></pre>
<p><span style="background-color:yellow;">Hopefully</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">straightforward</span> <span style="background-color:yellow;">enough.</span> <span style="background-color:yellow;">Do</span> <span style="background-color:yellow;">ask</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">questions</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">how</span> <span style="background-color:yellow;">exactly</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">above</span> <span style="background-color:yellow;">works</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">Maybe</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">log.log</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def doOutput(s): # process or store data
    print s

s=''
for line in open('log.log').readlines():
    if line.startswith('====='):
        if len(s):
            doOutput(s)
            s=''
    else:
        s+=line
if len(s):
    doOutput(s)
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">recommend</span> <span style="background-color:yellow;">starting</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">looks</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">line.</span> <span style="background-color:yellow;">Let</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">key</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">off</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Title</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">line.</span> <span style="background-color:yellow;">Set</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">flag</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">looks</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">hit</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">results.</span> <span style="background-color:yellow;">Else</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">log</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">title.</span> <span style="background-color:yellow;">Reset</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">flag</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">repeat.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">store</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Title</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dictionary</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">store</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">No</span> <span style="background-color:yellow;">Results</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">between</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">Title</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">line</span> . </p>
<p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">looks</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">based</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">output</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Regular</span> <span style="background-color:yellow;">expression</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">group</span> <span style="background-color:yellow;">matching</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">job</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import re

data = """===== Item 5483/14800  =====
This is the item title
Info: some note
===== Item 5483/14800 (Update 1/3) =====
This is the item title
Info: some other note
===== Item 5483/14800 (Update 2/3) =====
This is the item title
Info: some more notes
===== Item 5483/14800 (Update 3/3) =====
This is the item title
Info: some other note
Test finished. Result Foo. Time 12 secunds.
Stats: CPU 0.5 MEM 5.3
===== Item 5484/14800  =====
This is this items title
Info: some note
Test finished. Result Bar. Time 4 secunds.
Stats: CPU 0.9 MEM 4.7
===== Item 5485/14800  =====
This is the title of this item
Info: some note
Test finished. Result FooBar. Time 7 secunds.
Stats: CPU 2.5 MEM 2.8"""


p =  re.compile("^=====[^=]*=====\n(.*)$\nInfo: .*\n.*Result ([^\.]*)\.",
                re.MULTILINE)
for m in re.finditer(p, data):
     print "title:", m.group(1), "result:", m.group(2)er code here
</code></pre>
<p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">info</span> <span style="background-color:yellow;">about</span> <span style="background-color:yellow;">regular</span> <span style="background-color:yellow;">expressions</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;">docs</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">This</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">continuation</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">maciejka</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">comments</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">data</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">daniels.log</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">then</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">through</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">item</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">itertools.groupby</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">apply</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">multi-line</span> <span style="background-color:yellow;">regexp</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">item.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">scale</span> <span style="background-color:yellow;">fine</span> . </p>
<pre><code>import itertools, re

p = re.compile("Result ([^.]*)\.", re.MULTILINE)
for sep, item in itertools.groupby(file('daniels.log'),
                                   lambda x: x.startswith('===== Item ')):
    if not sep:
        title = item.next().strip()
        m = p.search(''.join(item))
        if m:
            print (title, m.group(1))
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">Parsing</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">done</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">regex.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">reasonably</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">structured</span> <span style="background-color:yellow;">text</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">looks</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">testing</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">e.g.</span> <span style="background-color:yellow;">line.startswith</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">dictionaries</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">suitable</span> <span style="background-color:yellow;">data</span> <span style="background-color:yellow;">type</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">key-value</span> <span style="background-color:yellow;">pairs.</span> <span style="background-color:yellow;">Not</span> <span style="background-color:yellow;">sure</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">else</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">you.</span> <span style="background-color:yellow;">This</span> <span style="background-color:yellow;">seems</span> <span style="background-color:yellow;">pretty</span> <span style="background-color:yellow;">trivial</span> . </p>
<p></p>
<p><span style="background-color:yellow;">OK</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">regexp</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">proved</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">suitable</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import re
re.findall("=\n(.*)\n", s)
</code></pre>
<p><span style="background-color:yellow;">is</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">comprehensions</span> </p>
<pre><code>[item.split('\n', 1)[0] for item in s.split('=\n')]
</code></pre>
<p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">got</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>>>> len(s)
337000000
>>> test(get1, s) #list comprehensions
0:00:04.923529
>>> test(get2, s) #re.findall()
0:00:02.737103
</code></pre>
<p><span style="background-color:yellow;">Lesson</span> <span style="background-color:yellow;">learned</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">7</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">something</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">c-like</span> <span style="background-color:yellow;">pseudocode</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">i</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">python</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>string line=getline();
regex boundary="^==== [^=]+ ====$";
regex info="^Info: (.*)$";
regex test_data="Test ([^.]*)\. Result ([^.]*)\. Time ([^.]*)\.$";
regex stats="Stats: (.*)$";
while(!eof())
{
  // sanity check
  test line against boundary, if they don't match, throw excetion

  string title=getline();

  while(1)
  {  
    // end the loop if we finished the data
    if(eof()) break;

    line=getline();
    test line against boundary, if they match, break
    test line against info, if they match, load the first matched group into "info"
    test line against test_data, if they match, load the first matched group into "test_result", load the 2nd matched group into "result", load the 3rd matched group into "time"
    test line against stats, if they match, load the first matched group into "statistics"
  }

  // at this point you can use the variables set above to do whatever with a line
  // for example, you want to use title and, if set, test_result/result/time.

}
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">8</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">perl</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">job.</span> <span style="background-color:yellow;">Perhaps</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">useful</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">way.</span> <span style="background-color:yellow;">Quick</span> <span style="background-color:yellow;">hack</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">ways</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">doing</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">feel</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">needs</span> <span style="background-color:yellow;">defending</span> <span style="background-color:yellow;"></span> . </p>
<pre><code>#!/usr/bin/perl -w
#
# $Id$
#

use strict;
use warnings;

my @ITEMS;
my $item;
my $state = 0;

open(FD, "< data.txt") or die "Failed to open file.";
while (my $line = <FD>) {
    $line =~ s/(\r|\n)//g;
    if ($line =~ /^===== Item (\d+)\/\d+/) {
        my $item_number = $1;
        if ($item) {
            # Just to make sure we don't have two lines that seems to be a headline in a row.
            # If we have an item but haven't set the title it means that there are two in a row that matches.
            die "Something seems to be wrong, better safe than sorry. Line $. : $line\n" if (not $item->{title});
            # If we have a new item number add previuos item and create a new.
            if ($item_number != $item->{item_number}) {
                push(@ITEMS, $item);
                $item = {};
                $item->{item_number} = $item_number;
            }
        } else {
            # First entry, don't have an item.
            $item = {}; # Create new item.
            $item->{item_number} = $item_number;
        }
        $state = 1;
    } elsif ($state == 1) {
        die "Data must start with a headline." if (not $item);
        # If we already have a title make sure it matches.
        if ($item->{title}) {
            if ($item->{title} ne $line) {
                die "Title doesn't match for item " . $item->{item_number} . ", line $. : $line\n";
            }
        } else {
            $item->{title} = $line;
        }
        $state++;
    } elsif (($state == 2) && ($line =~ /^Info:/)) {
        # Just make sure that for state 2 we have a line that match Info.
        $state++;
    } elsif (($state == 3) && ($line =~ /^Test finished\. Result ([^.]+)\. Time \d+ secunds{0,1}\.$/)) {
        $item->{status} = $1;
        $state++;
    } elsif (($state == 4) && ($line =~ /^Stats:/)) {
        $state++; # After Stats we must have a new item or we should fail.
    } else {
        die "Invalid data, line $.: $line\n";
    }
}
# Need to take care of the last item too.
push(@ITEMS, $item) if ($item);
close FD;

# Loop our items and print the info we stored.
for $item (@ITEMS) {
    print $item->{item_number} . " (" . $item->{status} . ") " . $item->{title} . "\n";
}
</code></pre>
<br />