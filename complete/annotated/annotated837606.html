<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-837606</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">recursively</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">directory</span> </h2><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">writing</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">backup</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">directory</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">sub-directories</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">filter</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">down</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">.avi</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">only</span> . </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">script</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">always</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">Linux</span> <span style="background-color:yellow;">machine.</span> <span style="background-color:yellow;">Is</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">shell</span> <span style="background-color:yellow;">commands</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">better</span> ? </p>
<p><span style="background-color:yellow;">At</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">moment</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'m</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;">df</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">particular</span> <span style="background-color:yellow;">partition</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">less</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">5</span> <span style="background-color:yellow;">gigabytes</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">deleting</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">.avi</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">until</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">condition</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">met</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-7</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">os.walk</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">path</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">iterate</span> <span style="background-color:yellow;">recursively</span> <span style="background-color:yellow;">over</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">st_size</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">st_mtime</span> <span style="background-color:yellow;">attributes</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">os.stat</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">filename</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">sizes</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">modification</span> <span style="background-color:yellow;">times</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">stat</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">fnmatch</span> <span style="background-color:yellow;">modules</span> <span style="background-color:yellow;">together</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">files</span> </p>
<p><span style="background-color:yellow;">ST_MTIME</span> <span style="background-color:yellow;">refere</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">last</span> <span style="background-color:yellow;">modification</span> <span style="background-color:yellow;">time.</span> <span style="background-color:yellow;">You</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">choose</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">value</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> </p>
<pre><code>import os, stat, fnmatch
file_list = []
for filename in os.listdir('.'):
    if fnmatch.fnmatch(filename, '*.avi'):
        file_list.append((os.stat(filename)[stat.ST_MTIME], filename))
</code></pre>
<p><span style="background-color:yellow;">Then</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">order</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">according</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">it</span> . </p>
<pre><code>file_list.sort(key=lambda a: a[0])
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">easiest</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">along</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">ls</span> <span style="background-color:yellow;">-t</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">something</span> <span style="background-color:yellow;">along</span> <span style="background-color:yellow;">these</span> <span style="background-color:yellow;">lines</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">trick</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">deletes</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">avi</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">under</span> <span style="background-color:yellow;">specified</span> <span style="background-color:yellow;">directory</span> <span style="background-color:yellow;"></span> </p>
<pre><code>find / -name "*.avi" | xargs ls -t | tail -n 1 | xargs rm
</code></pre>
<p><span style="background-color:yellow;">step</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">step...</span> . </p>
<p><span style="background-color:yellow;">find</span> <span style="background-color:yellow;">/</span> <span style="background-color:yellow;">-name</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">.avi</span> <span style="background-color:yellow;">"</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">avi</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">recursively</span> <span style="background-color:yellow;">starting</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">root</span> <span style="background-color:yellow;">directory</span> </p>
<p><span style="background-color:yellow;">xargs</span> <span style="background-color:yellow;">ls</span> <span style="background-color:yellow;">-t</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">sort</span> <span style="background-color:yellow;">all</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">modification</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">newest</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">oldest</span> . </p>
<p><span style="background-color:yellow;">tail</span> <span style="background-color:yellow;">-n</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">grab</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">last</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;"></span> </p>
<p><span style="background-color:yellow;">xargs</span> <span style="background-color:yellow;">rm</span> <span style="background-color:yellow;">-</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">remove</span> <span style="background-color:yellow;">it</span> </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">Hm.</span> <span style="background-color:yellow;">Nadia</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">closer</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">meant</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">ask</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">however</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">finding</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">single</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">tree</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import os
def oldest_file_in_tree(rootfolder, extension=".avi"):
    return min(
        (os.path.join(dirname, filename)
        for dirname, dirnames, filenames in os.walk(rootfolder)
        for filename in filenames
        if filename.endswith(extension)),
        key=lambda fn: os.stat(fn).st_mtime)
</code></pre>
<p><span style="background-color:yellow;">With</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">little</span> <span style="background-color:yellow;">modification</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">n</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">Nadia</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">answer</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import os, heapq
def oldest_files_in_tree(rootfolder, count=1, extension=".avi"):
    return heapq.nsmallest(count,
        (os.path.join(dirname, filename)
        for dirname, dirnames, filenames in os.walk(rootfolder)
        for filename in filenames
        if filename.endswith(extension)),
        key=lambda fn: os.stat(fn).st_mtime)
</code></pre>
<p><span style="background-color:yellow;">Note</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">.endswith</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">allows</span> <span style="background-color:yellow;">calls</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>oldest_files_in_tree("/home/user", 20, (".avi", ".mov"))
</code></pre>
<p><span style="background-color:yellow;">to</span> <span style="background-color:yellow;">select</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">extension</span> . </p>
<p><span style="background-color:yellow;">Finally</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">complete</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">ordered</span> <span style="background-color:yellow;">by</span> <span style="background-color:yellow;">modification</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">order</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">required</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import os
def files_to_delete(rootfolder, extension=".avi"):
    return sorted(
        (os.path.join(dirname, filename)
         for dirname, dirnames, filenames in os.walk(rootfolder)
         for filename in filenames
         if filename.endswith(extension)),
        key=lambda fn: os.stat(fn).st_mtime),
        reverse=True)
</code></pre>
<p><span style="background-color:yellow;">and</span> <span style="background-color:yellow;">note</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">reverse</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">True</span> <span style="background-color:yellow;">brings</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">at</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">list</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">next</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">file_list.pop</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> . </p>
<p><span style="background-color:yellow;">By</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">complete</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">your</span> <span style="background-color:yellow;">issue</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">since</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">running</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">Linux</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">os.statvfs</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">available</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>import os
def free_space_up_to(free_bytes_required, rootfolder, extension=".avi"):
    file_list= files_to_delete(rootfolder, extension)
    while file_list:
        statv= os.statvfs(rootfolder)
        if statv.f_bfree*statv.f_bsize >= free_bytes_required:
            break
        os.remove(file_list.pop())
</code></pre>
<p><span style="background-color:yellow;">statvfs.f_bfree</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">device</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">blocks</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">statvfs.f_bsize</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">block</span> <span style="background-color:yellow;">size.</span> <span style="background-color:yellow;">We</span> <span style="background-color:yellow;">take</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">rootfolder</span> <span style="background-color:yellow;">statvfs</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">so</span> <span style="background-color:yellow;">mind</span> <span style="background-color:yellow;">any</span> <span style="background-color:yellow;">symbolic</span> <span style="background-color:yellow;">links</span> <span style="background-color:yellow;">pointing</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">devices</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">we</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">many</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">actually</span> <span style="background-color:yellow;">freeing</span> <span style="background-color:yellow;">up</span> <span style="background-color:yellow;">space</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">device</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Check</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">linux</span> <span style="background-color:yellow;">command</span> <span style="background-color:yellow;">find</span> . </p>
<p><span style="background-color:yellow;">Alternatively</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">post</span> <span style="background-color:yellow;">pipes</span> <span style="background-color:yellow;">together</span> <span style="background-color:yellow;">ls</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">tail</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">delete</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">oldest</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">directory.</span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">done</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">loop</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">free</span> <span style="background-color:yellow;">space</span> . </p>
<p><span style="background-color:yellow;">For</span> <span style="background-color:yellow;">reference</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">shell</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">follow</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">link</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">alternatives</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">discussion</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>ls -t -r -1 /path/to/files | head --lines 1 | xargs rm
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">Here</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">formulation</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">bit</span> <span style="background-color:yellow;">old-school</span> <span style="background-color:yellow;">compared</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">some</span> <span style="background-color:yellow;">others</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">easy</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">modify</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">handles</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">case</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">no</span> <span style="background-color:yellow;">matching</span> <span style="background-color:yellow;">files</span> <span style="background-color:yellow;">without</span> <span style="background-color:yellow;">raising</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">exception</span> . </p>
<pre><code>import os

def find_oldest_file(dirname="..", extension=".avi"):
    oldest_file, oldest_time = None, None
    for dirpath, dirs, files in os.walk(dirname):
        for filename in files:
            file_path = os.path.join(dirpath, filename)
            file_time = os.stat(file_path).st_mtime
                if file_path.endswith(extension) and (file_time<oldest_time or oldest_time is None):
                oldest_file, oldest_time = file_path, file_time
    return oldest_file, oldest_time

print find_oldest_file()
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">6</span> </b><br /><p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">os</span> <span style="background-color:yellow;">module</span> <span style="background-color:yellow;">provides</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">functions</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">need</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">get</span> <span style="background-color:yellow;">directory</span> <span style="background-color:yellow;">listings</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">file</span> <span style="background-color:yellow;">info</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">'ve</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">os.walk</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">especially</span> <span style="background-color:yellow;">useful</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">walking</span> <span style="background-color:yellow;">directories</span> <span style="background-color:yellow;">recursively</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">os.stat</span> <span style="background-color:yellow;">will</span> <span style="background-color:yellow;">give</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">detailed</span> <span style="background-color:yellow;">info</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">including</span> <span style="background-color:yellow;">modification</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">entry</span> . </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">may</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">able</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">easier</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">simple</span> <span style="background-color:yellow;">shell</span> <span style="background-color:yellow;">command.</span> <span style="background-color:yellow;">Whether</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">works</span> <span style="background-color:yellow;">better</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">depends</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">results</span> . </p>
<br />