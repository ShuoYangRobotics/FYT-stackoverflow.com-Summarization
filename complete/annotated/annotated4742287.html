<h3><span style="background-color:yellow;">Question</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">ID-4742287</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><h2><span style="background-color:yellow;">Finding</span> <span style="background-color:yellow;">character</span> <span style="background-color:yellow;">position</span> <span style="background-color:yellow;">from</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">RegEx</span> <span style="background-color:yellow;">'d</span> <span style="background-color:yellow;">string</span> </h2><p><span style="background-color:yellow;">Say</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">'ABBACDA</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">want</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">each</span> <span style="background-color:yellow;">A</span> <span style="background-color:yellow;">is</span> . </p>
<p><span style="background-color:yellow;">Using</span> <span style="background-color:yellow;">Regex</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">Python</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">match</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">re.findall</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">'A</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">'ABBACDA</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">list</span> . </p>
<p><span style="background-color:yellow;">Any</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">tweak</span> <span style="background-color:yellow;">this</span> ? <span style="background-color:yellow;">Or</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">go</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">entirely</span> <span style="background-color:yellow;">different</span> <span style="background-color:yellow;">route</span> ? <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">wanted</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">avoid</span> <span style="background-color:yellow;">using</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">x</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">enumerate</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">str</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">would</span> <span style="background-color:yellow;">like</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">check</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">where</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">say</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">'BB</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">what</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">at</span> . </p>
<br /><h3><span style="background-color:yellow;">Answers</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">Total-6</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </h3><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">0</span> </b><br /><p><span style="background-color:yellow;">Use</span> <span style="background-color:yellow;">re.finditer</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> </p>
<p><span style="background-color:yellow;">example</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>match = re.finditer('A', 'ABBACDA')
for m in match:
    print m.start(), m.end(), m.group(0)
</code></pre>
<p><span style="background-color:yellow;">output</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>0 1 A
3 4 A
6 7 A
</code></pre>
<p><span style="background-color:yellow;">example</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>match = re.finditer('BB', 'ABBACDA')
for m in match:
    print m.start(), m.end(), m.group(0)
</code></pre>
<p><span style="background-color:yellow;">output</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>1 3 BB
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">1</span> </b><br /><p><span style="background-color:yellow;">To</span> <span style="background-color:yellow;">John</span> <span style="background-color:yellow;">Machin</span> </p>
<p>« (1) in your "find" code, tof is "A", in your regex code, tof is "BB" »</p>
<p><span style="background-color:yellow;">No</span> . <span style="background-color:yellow;">There</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">tof</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">'A</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">comparing</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">'regex</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">tof</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">'BB'.</span> <span style="background-color:yellow;">There</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">alone</span> <span style="background-color:yellow;">'regex</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">tof</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">'BB'</span> </p>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">presents</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">isolated</span> <span style="background-color:yellow;">manner</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">clearer</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">lisibility</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">obfsucated</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">put</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">definition</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">pat</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">re.compile</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">tof</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">loops</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">order</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">count</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">time</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">creation</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">measured</span> <span style="background-color:yellow;">time.</span> <span style="background-color:yellow;">As</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">beginning</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">second</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">believed</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">entirely</span> <span style="background-color:yellow;">'regex</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">code.</span> <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">so.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">comparison</span> <span style="background-color:yellow;">code</span> . </p>
<p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">should</span> <span style="background-color:yellow;">read</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">thoroughly</span> . </p>
<p>« (2) ch[prec:].find(tof) instead of ch.find(tof, prec) »</p>
<p><span style="background-color:yellow;">Yes</span> . </p>
<p><span style="background-color:yellow;">In</span> <span style="background-color:yellow;">fact</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">knew</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">index</span> <span style="background-color:yellow;">must</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">put</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">string.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">found</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">already</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">past</span> <span style="background-color:yellow;">codes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">just</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">blank</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">my</span> <span style="background-color:yellow;">brain</span> . </p>
<p><span style="background-color:yellow;">By</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">way</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">hence</span> <span style="background-color:yellow;">simpler.</span> <span style="background-color:yellow;">And</span> <span style="background-color:yellow;">secondly</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">pointed</span> <span style="background-color:yellow;">out</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">corrected</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">now</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">faster.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">T</span> <span style="background-color:yellow;">seconds</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">regex</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">0.77</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">T</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">0.65</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">T</span> <span style="background-color:yellow;">before</span> <span style="background-color:yellow;">correction</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">:</span> </p>
<pre><code>ch = 'jggBBjgjBBBjhgBBBBjjgBBBBBjjggBBBBBBjjjgjBBBBBBB'
tof = 'BB'
L = len(tof)

X,Y = [],[]
pat = re.compile(tof)

for essay in xrange(5):

    te = clock()
    for i in xrange(1000):
        li = []
        x = ch.find(tof)
        while x+1:
            li.append(x)
            x = ch.find(tof,x+L)
    X.append( clock()-te )


    te = clock()
    for i in xrange(1000):
        ly = [ m.start() for m in pat.finditer(ch) ]
    Y.append( clock()-te )

print li,'\n',ly,'\n'
print min(X),'\n',min(Y)
</code></pre>
<p><span style="background-color:yellow;">But</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">not</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dramatic</span> <span style="background-color:yellow;">acceleration</span> <span style="background-color:yellow;">though</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">18</span> <span style="background-color:yellow;">%</span> <span style="background-color:yellow;">faster</span> . </p>
<p>« (3) your find code considers overlapping matches, the regex code doesn't  »</p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">so.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">precisely</span> <span style="background-color:yellow;">tried</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">'ABBACDABBmmrteyBBgfrewBBBBBioBByt</span> <span style="background-color:yellow;">BBB</span> <span style="background-color:yellow;">ggddbBB</span> <span style="background-color:yellow;">BBbGtBBBGtbBbGT</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">containing</span> <span style="background-color:yellow;">'BBBBB</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">verify</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">gives</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">same</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">as</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">'regex</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">know</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">regex</span> <span style="background-color:yellow;">does</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">return</span> <span style="background-color:yellow;">overlapping</span> <span style="background-color:yellow;">matches.</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">used</span> <span style="background-color:yellow;">L</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">len</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">tof</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">precisely</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">avoid</span> <span style="background-color:yellow;">detection</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">overlapping</span> <span style="background-color:yellow;">slices</span> . </p>
<p><span style="background-color:yellow;">result</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">above</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>[3, 8, 14, 16, 21, 23, 30, 32, 34, 41, 43, 45]
[3, 8, 14, 16, 21, 23, 30, 32, 34, 41, 43, 45]
</code></pre>
<p>So what does «Your find code considers overlapping matches» mean, please ?</p>
<p>« (4) etc etc  »</p>
<p><span style="background-color:yellow;">That</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">unfair.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">there</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">etceterae</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">tell</span> <span style="background-color:yellow;">which</span> <span style="background-color:yellow;">ones.</span> <span style="background-color:yellow;">If</span> <span style="background-color:yellow;">none...</span> <span style="background-color:yellow;">well</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">know..</span> . </p>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">think</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">ratio</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">right</span> <span style="background-color:yellow;">comment</span> <span style="background-color:yellow;">versus</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">false</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">dubious</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">unfair</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">enough</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">downvote</span> . </p>
<p><span style="background-color:yellow;">Moreover</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">appears</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">me</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">on</span> <span style="background-color:yellow;">SO</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">imperfect</span> <span style="background-color:yellow;">answers</span> <span style="background-color:yellow;">written</span> <span style="background-color:yellow;">1</span> <span style="background-color:yellow;">or</span> <span style="background-color:yellow;">2</span> <span style="background-color:yellow;">hours</span> <span style="background-color:yellow;">after</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">question</span> <span style="background-color:yellow;">do</span> <span style="background-color:yellow;">n't</span> <span style="background-color:yellow;">escape</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">downvotes</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">good</span> <span style="background-color:yellow;">similar</span> <span style="background-color:yellow;">ones</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">rarely</span> <span style="background-color:yellow;">upvoted</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">questionner</span> <span style="background-color:yellow;">have</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">his</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">long</span> <span style="background-color:yellow;">time</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">2</span> </b><br /><p><span style="background-color:yellow;">If</span> <span style="background-color:yellow;">you</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">looking</span> <span style="background-color:yellow;">for</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">one</span> <span style="background-color:yellow;">result</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">re.search</span> <span style="background-color:yellow;">function</span> <span style="background-color:yellow;">instead</span> . <span style="background-color:yellow;">That</span> <span style="background-color:yellow;">returns</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">MatchObject</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">http</span> <span style="background-color:yellow;">:</span> <span style="background-color:yellow;">//docs.python.org/library/re.html</span> <span style="background-color:yellow;">#</span> <span style="background-color:yellow;">re.MatchObject</span> <span style="background-color:yellow;"></span> . <span style="background-color:yellow;">The</span> <span style="background-color:yellow;">object</span> <span style="background-color:yellow;">has</span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">functions</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">3</span> </b><br /><p><span style="background-color:yellow;">You</span> <span style="background-color:yellow;">could</span> <span style="background-color:yellow;">try</span> <span style="background-color:yellow;">timing</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">following</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">see</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">than</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">regex</span> <span style="background-color:yellow;">approach</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>def multifind(needle, haystack, overlap=False):
    delta = 1 if overlap else max(1, len(needle))
    pos = 0
    find = haystack.find
    while 1:
        pos = find(needle, pos)
        if pos < 0: return
        yield pos
        pos += delta

>>> data = 'ABBACDABBmmrteyBBgfrewBBBBBioBBytA BBB ggdAdbBB BBbGtBBABGtbBbGT'
>>> list(multifind('A', data))
[0, 3, 6, 33, 42, 55]
>>> list(multifind('BB', data))
[1, 7, 15, 22, 24, 29, 35, 45, 48, 53]
>>> list(multifind('BB', data, overlap=True))
[1, 7, 15, 22, 23, 24, 25, 29, 35, 36, 45, 48, 53]
>>> list(multifind('', 'qwerty'))
[0, 1, 2, 3, 4, 5, 6]
>>>
</code></pre>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">4</span> </b><br /><p><span style="background-color:yellow;">Oh</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">also</span> <span style="background-color:yellow;">knew</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">generator</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">had</span> <span style="background-color:yellow;">forgotten</span> <span style="background-color:yellow;">its</span> <span style="background-color:yellow;">advantage</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">such</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">research.</span> <span style="background-color:yellow;">It</span> <span style="background-color:yellow;">'s</span> <span style="background-color:yellow;">a</span> <span style="background-color:yellow;">fine</span> <span style="background-color:yellow;">remark</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">this</span> <span style="background-color:yellow;">one</span> . </p>
<p><span style="background-color:yellow;">And</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">use</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">an</span> <span style="background-color:yellow;">alias</span> <span style="background-color:yellow;">hayfind</span> <span style="background-color:yellow;">=</span> <span style="background-color:yellow;">haystack.find</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">make</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">code</span> <span style="background-color:yellow;">faster</span> <span style="background-color:yellow;">is</span> <span style="background-color:yellow;">very</span> <span style="background-color:yellow;">tricky</span> <span style="background-color:yellow;">too</span> . </p>
<p><span style="background-color:yellow;">Now</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">generator</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">T</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">'regex</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">method</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">0.96</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">T</span> </p>
<pre><code>ch = 'jggBBjgjBBBjhgBBBBjjgBBBBBjjggBBBBBBjjjgjBBBBBBB'
tof = 'BB'
L = len(tof)

X,Y = [],[]
pat = re.compile(tof)

def multifind(needle, haystack):
    delta = len(needle)
    pos = 0
    hayfind = haystack.find
    while 1:
        pos = hayfind(needle, pos)
        if pos < 0:  return
        yield pos
        pos += delta

for essay in xrange(20):

    te = clock()
    for i in xrange(10000):
        li = list(multifind(tof,ch))
    X.append( clock()-te )


    te = clock()
    for i in xrange(10000):
        ly = [ m.start() for m in pat.finditer(ch) ]
    Y.append( clock()-te )

print li,'\n',ly,'\n'
print min(X),'\n',min(Y)
</code></pre>
<p><span style="background-color:yellow;">The</span> <span style="background-color:yellow;">two</span> <span style="background-color:yellow;">methods</span> <span style="background-color:yellow;">are</span> <span style="background-color:yellow;">of</span> <span style="background-color:yellow;">equivalent</span> <span style="background-color:yellow;">speeds.</span> <span style="background-color:yellow;">But</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">finaly</span> <span style="background-color:yellow;">prefer</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">'regex</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">because</span> <span style="background-color:yellow;">it</span> <span style="background-color:yellow;">can</span> <span style="background-color:yellow;">be</span> <span style="background-color:yellow;">modified</span> <span style="background-color:yellow;">to</span> <span style="background-color:yellow;">obtain</span> <span style="background-color:yellow;">more</span> <span style="background-color:yellow;">results</span> <span style="background-color:yellow;">if</span> <span style="background-color:yellow;">needed</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">start</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">end</span> <span style="background-color:yellow;">,</span> <span style="background-color:yellow;">other</span> <span style="background-color:yellow;">conditions...</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">while</span> <span style="background-color:yellow;">'find</span> <span style="background-color:yellow;">'</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">only</span> <span style="background-color:yellow;">give</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">positions</span> . </p>
<br /><b><span style="background-color:yellow;">#</span> <span style="background-color:yellow;">5</span> </b><br /><p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">likes</span> <span style="background-color:yellow;">regexes</span> <span style="background-color:yellow;">but</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">searched</span> <span style="background-color:yellow;">another</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>ch = 'ABBACDABBmmrteyBBgfrewBBBBBioBBytA BBB ggdAdbBB BBbGtBBABGtbBbGT'
tof = 'A'

li, prec = [], 0
x = ch[prec:].find(tof)

while x+1:
    li.append(prec+x)
    prec += x+1
    x = ch[prec:].find(tof)

print li
</code></pre>
<p><span style="background-color:yellow;">result</span> </p>
<pre><code>[0, 3, 6, 33, 42, 55]
</code></pre>
<p><span style="background-color:yellow;">I</span> <span style="background-color:yellow;">measured</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">speeds</span> <span style="background-color:yellow;">and</span> <span style="background-color:yellow;">I</span> <span style="background-color:yellow;">am</span> <span style="background-color:yellow;">astonished</span> <span style="background-color:yellow;">that</span> <span style="background-color:yellow;">the</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">regex</span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">0,65</span> <span style="background-color:yellow;">*</span> <span style="background-color:yellow;">T</span> <span style="background-color:yellow;">when</span> <span style="background-color:yellow;">solution</span> <span style="background-color:yellow;">with</span> <span style="background-color:yellow;">find</span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;"></span> <span style="background-color:yellow;">runs</span> <span style="background-color:yellow;">in</span> <span style="background-color:yellow;">T</span> <span style="background-color:yellow;">seconds</span> <span style="background-color:yellow;">:</span> </p>
<pre><code>ch = 'ABBACDABBmmrteyBBgfrewBBBBBioBByt BBB ggddbBB BBbGtBBBGtbBbGT'

tof = 'BB'

X,Y = [],[]
pat = re.compile(tof)

for essay in xrange(50):

    te = clock()
    for i in xrange(1000):
        li, prec, L = [], 0, len(tof)
        x = ch[prec:].find(tof)
        while x+1:
            li.append(prec+x)
            prec += x+L
            x = ch[prec:].find(tof)
    X.append( clock()-te )

    te = clock()
    for i in xrange(1000):
        ly = [ m.start() for m in pat.finditer(ch) ]
    Y.append( clock()-te )

print li
print ly
print
print min(X)
print min(Y)
</code></pre>
<br />