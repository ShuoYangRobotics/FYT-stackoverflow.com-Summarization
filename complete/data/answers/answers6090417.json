[[{"text": ["There is an ugly way to do this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n for i, (k, v) in enumerate(your_dict.iteritems()):\n    if i == len(your_dict)-1:\n        # do special stuff here\n</code>\n</pre>\n", "senID": 1}, {"text": ["But you should really consider if you need this.", "I am almost certain that there is another way."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"code": "<pre>\n<code>\n it = spam_dict.iteritems()\ntry:\n    eggs1 = it.next()\n    while True:\n        eggs2 = it.next()\n        do_something(eggs1)\n        eggs1 = eggs2\nexcept StopIteration:\n    do_final(eggs1)\n</code>\n</pre>\n", "senID": 0}, {"text": ["Quick and quite dirty.", "Does it solve your issue?"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["as others have stated, dictionaries have no defined order, so it's hard to imagine why you would need this, but here it is"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n last = None\nfor current in your_dict.iteritems():\n  if last is not None:\n    # process last\n  last = current\n\n# now last contains the last thing in dict.iteritems()\nif last is not None: # this could happen if the dict was empty\n  # process the last item\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I recently had this issue, I thought this was the most elegant solution because it allowed you to write for i,value,isLast in lastEnumerate(...)::"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "for i,value,isLast in lastEnumerate(...):", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n def lastEnumerate(iterator):\n    x = list(iterator)\n    for i,value in enumerate(x):\n        yield i,value,i==len(x)-1\n</code>\n</pre>\n", "senID": 1}, {"text": ["For example:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n for i,value,isLast in lastEnumerate(range(5)):\n    print(value)\n    if not isLast:\n        print(',')\n</code>\n</pre>\n", "senID": 3}], [{"text": ["This is a special case of this broader question.", "My suggestion was to create an enumerate-like generator that returns -1 on the last item:"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "this broader question", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/q/5983265/577088"}, {"text": "enumerate-like generator", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/5983265/pythonic-way-of-determining-if-the-current-element-is-the-first-or-last-element-o/5983613#5983613"}]}, {"code": "<pre>\n<code>\n def annotate(gen):\n    prev_i, prev_val = 0, gen.next()\n    for i, val in enumerate(gen, start=1):\n        yield prev_i, prev_val\n        prev_i, prev_val = i, val\n    yield '-1', prev_val\n</code>\n</pre>\n", "senID": 1}, {"text": ["Add gen = iter(gen) if you want it to handle sequences as well as generators."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "gen = iter(gen)", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}], [{"text": ["The approach that makes the most sense is to wrap the loop in some call which contains a hook to call your post-iteration funtionality afterwards."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["This could be implemented as context manager and called through a 'with' statement or, for older versions of Python, you could use the old 'try:' ... 'finally:' construct.", "It could also be wrapped in a class where the dictionary iteration is self dispatched (a \"private\" method) and the appendix code follows that in the public method.", "(Understanding that the distention between public vs private is a matter of intention and documentation, not enforced by Python)."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["The last item in a for loop hangs around after the for loop anyway:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n for current_item in my_dict:\n    do_something(current_item)\n\ntry:\n    do_last(current_item)\nexcept NameError:\n    print \"my_dict was empty\"\n</code>\n</pre>\n", "senID": 1}, {"text": ["Even if the name \"current_item\" is in use before the for loop, attempting to loop over an empty dict seems to have the effect of deleting current_item, hence the NameError"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["You stated in an above comment that you need this to construct the WHERE clause of an SQL SELECT statement.", "Perhaps this will help:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def make_filter(colname, value):\n    if isinstance(value, str):\n        if '%' in value:\n            return \"%s LIKE '%s'\" % (colname, value)\n        else:\n            return \"%s = '%s'\" % (colname, value)\n    return \"%s = %s\" % (colname, value)\n\nfilters = {'USER_ID':'123456', 'CHECK_NUM':23459, 'CHECK_STATUS':'C%'}\nwhereclause = 'WHERE '+'\\nAND '.join(make_filter(*x) for x in filters.iteritems())\nprint whereclause\n</code>\n</pre>\n", "senID": 1}, {"text": ["which prints"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n WHERE CHECK_NUM = 23459\nAND CHECK_STATUS LIKE 'C%'\nAND USER_ID = '123456'\n</code>\n</pre>\n", "senID": 3}], [{"text": ["No.", "When using an iterator you do not know anything about the position - actually, the iterator could be infinite."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Besides that, a dictionary is not ordered.", "So if you need it e.g.", "to insert commas between the elements you should take the items, sort them and them iterate over the list of (key, value) tuples.", "And when iterating over this list you can easily count the number of iterations and thus know when you have the last element."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "not ordered", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}, {"text": "(key, value)", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}]]