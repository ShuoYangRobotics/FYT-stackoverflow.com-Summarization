[[{"code": "<pre>\n<code>\n def try_except(success, failure):\n    try:\n        return success()\n    except:\n        return failure()\n\nvariable = try_except(do_some_file_loading_stuff, lambda: '')\n</code>\n</pre>\n", "senID": 0}, {"text": ["I think the code is self explanatory.", "It returns the value returned by success unless there is an error, then it returns the value returned by failure.", "If do_some_file_loading_stuff is an expression rather than just a function call, wrap it in a lambda as well."], "childNum": 4, "tag": "p", "senID": 1, "childList": [{"text": "success", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "failure", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "do_some_file_loading_stuff", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "lambda", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Edit: @kindall and I slapped his version around a bit so it's just as fast as mine, can be called exactly the same if you want, has more features, and is the same number of lines.", "Use it!"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "Edit:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n def try_except(success, failure, *exceptions):\n    try:\n        return success()\n    except exceptions or Exception:\n        return failure() if callable(failure) else failure\n</code>\n</pre>\n", "senID": 3}], [{"text": ["Since agf already provided the approach I'd recommend, here's a version of his routine with a couple of minor enhancements:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def try_except(success, failure, *exceptions):\n    try:\n        return success()\n    except exceptions or Exception:\n        return failure() if callable(failure) else failure\n</code>\n</pre>\n", "senID": 1}, {"text": ["This version:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Here's a context manager that provides a little bit of a shortcut:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n from contextlib import contextmanager\n\n@contextmanager\ndef catch(*exceptions, **kwargs):\n    try:\n        yield kwargs.get(\"default\", None)\n    except exceptions or Exception:\n        pass\n</code>\n</pre>\n", "senID": 1}, {"text": ["Usage:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n with catch(ZeroDivisionError, default=0) as x:\n    x = 3 / 0              # error\n\nprint x                    # prints 0, the default\n</code>\n</pre>\n", "senID": 3}, {"text": ["The basic idea here is that the context manager returns whatever default value you pass it, which is then assigned to the variable you specified in the with statement's as clause.", "Then, inside the context, you execute a statement that tries to assign to that same variable.", "If it raises an exception, the context manager catches and silently ignores it, but since the assignment didn't happen, the default value remains."], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "with", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "as", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Might be particularly useful for multi-line calculations that nevertheless result in a single value."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["Unfortunately, no, there is no language construct for it and I do not know any really legible and concise idiom either.", "I always wanted something like that.", "Some time ago someone gave me reasons to Python does not have something like variable = function_cal() except \"\" but they were not very convincing and I still miss this language construct :)"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "variable = function_cal() except \"\"", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}], [{"text": ["Obviously, the latter way of doing it is more succinct and is preferred by many programmers like you. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["While the language itself doesn't provide a \"one-line try-except-catch\" for whatever the reasons, all good and necessary, I presume, you can generally accomplish this, by changing the program, a little; like for example:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n try:\n    a_var = a_dict.get('abcd')\nexcept a_dict.KeyError:\n    a_var = ''\n</code>\n</pre>\n", "senID": 2}, {"text": ["into:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n a_var = a_dict.get('abcd',default='')\n</code>\n</pre>\n", "senID": 4}, {"text": ["and similarly for the DB queries;"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n try:\n    a_qs = Model.objects.get(id=42)\nexcept Model.DoesNotExist:\n    a_qs = Model.objects.create(id=42)\n</code>\n</pre>\n", "senID": 6}, {"text": ["with"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n a_qs = Model.objects.get_or_create(id=42,**kwargs)\n</code>\n</pre>\n", "senID": 8}, {"text": ["and add similar API's to your own programs where possible.", "try-except is rather \"cheap\" in Python and is exception based programming is preferred over the \"check-first\" approach generally suggested in Java like languages because of the expensive nature of the exception handling.", "So, you should rather wrap this \"catching thing\" in a method/function and call that every where, like for example the dict and other constructs do."], "childNum": 0, "tag": "p", "senID": 9, "childList": []}], [{"text": ["There is no easy way to simplify a try/catch statement like the if/else example, but I want to point out that python's \"with\" statement introduced in python2.5 made a lot of interfaces to file/db io try catch statements simpler and exception safe.", "IO operations tend to be where a lot of try/catch statements are used."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n with open(\"myfile.txt\", \"r\") as f:\n   # Do stuff with f\n</code>\n</pre>\n", "senID": 1}, {"text": ["instead of"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n try:\n   f = open(\"myfile.txt\", \"r\")\n   # Do stuff with f\nexcept:\n   pass\nfinally:\n   if f: f.close\n</code>\n</pre>\n", "senID": 3}]]