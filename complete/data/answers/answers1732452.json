[[{"text": ["This is probably pretty easy to do."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["URL mappings are easy to construct, for example:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n urlpatterns = patterns('books.views',\n  (r'^books/$', 'index'),\n  (r'^books/(\\d+)/$', 'get'))\n</code>\n</pre>\n", "senID": 2}, {"text": ["Django supports model serialization, so it's easy to turn models into XML:"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "model serialization", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/topics/serialization/"}]}, {"code": "<pre>\n<code>\n from django.core import serializers\nfrom models import Book\n\ndata = serializers.serialize(\"xml\", Book.objects.all())\n</code>\n</pre>\n", "senID": 4}, {"text": ["Combine the two with decorators and you can build fast, quick handlers:"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "decorators", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.ibm.com/developerworks/linux/library/l-cpdecor.html"}]}, {"code": "<pre>\n<code>\n from django.http import HttpResponse\nfrom django.shortcuts import get_object_or_404\n\ndef xml_view(func):\n  def wrapper(*args, **kwargs):\n    result = func(*args, **kwargs)\n    return HttpResponse(serializers.serialize(\"xml\", result),\n        mimetype=\"text/xml\")\n  return wrapper\n\n@xml_view\ndef index(request):\n  return Books.objects.all()\n\n@xml_view\ndef get(request, id):\n  return get_object_or_404(Book, pk=id)\n</code>\n</pre>\n", "senID": 6}], [{"text": ["(I had to edit out the most obvious links."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["+1 for piston - (link above).", "I had used apibuilder (Washington Times open source) in the past, but Piston works easier for me.", "The most difficult thing for me is in figuring out my URL structures for the API, and to help with the regular expressions.", "I've also used surlex which makes that chore much easier."], "childNum": 4, "tag": "p", "senID": 1, "childList": [{"text": "piston", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "apibuilder", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "Piston", "tag": "a", "pos": -1, "childList": [], "childNum": 0, "href": "http://bitbucket.org/jespern/django-piston/wiki/Home"}, {"text": "surlex", "tag": "a", "pos": 3, "childList": [], "childNum": 0, "href": "http://codysoyland.com/blog/2009/sep/6/introduction-surlex/"}]}, {"text": ["Example, using this model for Group (from a timetable system we're working on):"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "Group", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n class Group(models.Model):\n    \"\"\"\n    Tree-like structure that holds groups that may have other groups as leaves. \n    For example ``st01gp01`` is part of ``stage1``.\n    This allows subgroups to work. The name is ``parents``, i.e.::\n\n        &gt;&gt;&gt; stage1group01 = Group.objects.get(unique_name = 'St 1 Gp01')\n        &gt;&gt;&gt; stage1group01\n        &gt;&gt;&gt; &lt;Group: St 1 Gp01&gt;\n        # get the parents...\n        &gt;&gt;&gt; stage1group01.parents.all()\n        &gt;&gt;&gt; [&lt;Group: Stage 1&gt;]\n\n    ``symmetrical`` on ``subgroup`` is needed to allow the 'parents' attribute to be 'visible'.\n    \"\"\"\n    subgroup = models.ManyToManyField(\"Group\", related_name = \"parents\", symmetrical= False, blank=True)\n    unique_name = models.CharField(max_length=255)\n    name = models.CharField(max_length=255)\n    academic_year = models.CharField(max_length=255)\n    dept_id = models.CharField(max_length=255)\n    class Meta:\n        db_table = u'timetable_group'\n    def __unicode__(self):\n        return \"%s\" % self.name\n</code>\n</pre>\n", "senID": 3}, {"text": ["And this urls.py fragment (note that surlex allows regular expression macros to be set up easily):"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n from surlex.dj import surl\nfrom surlex import register_macro\nfrom piston.resource import Resource\nfrom api.handlers import GroupHandler\ngroup_handler = Resource(GroupHandler)\n\n# add another macro to our 'surl' function\n# this picks up our module definitions\nregister_macro('t', r'[\\w\\W ,-]+')\n\nurlpatterns = patterns('',\n# group handler\n# all groups\nurl(r'^groups/$', group_handler),\nsurl(r'^group/&lt;id:#&gt;/$', group_handler),\nsurl(r'^group/&lt;name:t&gt;/$', group_handler),)\n</code>\n</pre>\n", "senID": 5}, {"text": ["Then this handler will look after JSON output (by default) and can also do XML and YAML."], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "YAML", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/YAML"}]}, {"code": "<pre>\n<code>\n class GroupHandler(BaseHandler):\n    \"\"\"\n    Entry point for Group model\n    \"\"\"\n\n    allowed_methods = ('GET', )\n    model = Group\n    fields = ('id', 'unique_name', 'name', 'dept_id', 'academic_year', 'subgroup')\n\n    def read(self, request, id=None, name=None):\n        base = Group.objects\n        if id:\n            print self.__class__, 'ID'\n            try:\n                return base.get(id=id)\n            except ObjectDoesNotExist:\n                return rc.NOT_FOUND\n            except MultipleObjectsReturned: # Should never happen, since we're using a primary key.\n                return rc.BAD_REQUEST\n        else:\n            if name:\n                print self.__class__, 'Name'\n                return base.filter(unique_name = name).all()\n            else:\n                print self.__class__, 'NO ID'\n                return base.all()\n</code>\n</pre>\n", "senID": 7}, {"text": ["As you can see, most of the handler code is in figuring out what parameters are being passed in urlpatterns."], "childNum": 1, "tag": "p", "senID": 8, "childList": [{"text": "urlpatterns", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Some example URLs are api/groups/, api/group/3301/ and api/group/st1gp01/ - all of which will output JSON."], "childNum": 4, "tag": "p", "senID": 9, "childList": [{"text": "api/groups/", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "api/group/3301/", "childNum": 0, "tag": "code", "childList": []}, {"text": "api/group/st1gp01/", "childNum": 0, "tag": "code", "childList": []}, {"href": "http://en.wikipedia.org/wiki/JSON", "text": "JSON", "childNum": 0, "tag": "a", "childList": []}]}], [{"text": ["It can respond with any kind of data.", "JSON/XML/PDF/pictures/CSV... "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Django itself comes with a set of serializers."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "set of serializers", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/topics/serialization/"}]}, {"text": ["Edit"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "Edit", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["I just had a look at at Piston \u2014 looks promising.", "Best feature: "], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "Piston", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://bitbucket.org/jespern/django-piston/wiki/Home"}]}, {"text": [":)"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["Take a look at Piston, it's a mini-framework for Django for creating RESTful APIs."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["A recent blog post by Eric Holscher provides some more insight on the PROs of using Piston: Large Problems in Django, Mostly Solved: APIs"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "Large Problems in Django, Mostly Solved: APIs", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://ericholscher.com/blog/2009/nov/11/large-problems-django-mostly-solved-rest-api/"}]}], [{"text": ["Regarding your comment about not liking 3rd party code - that's too bad because the pluggable apps are one of django's greatest features.", "Like others answered, piston will do most of the work for you. "], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "pluggable apps are one of django's greatest features", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}], [{"text": ["A little over a year ago, I wrote a REST web service in Django for a large Seattle company that does streaming media on the Internet."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Django was excellent for the purpose.", "As \"a paid nerd\" observed, the Django URL config is wonderful: you can set up your URLs just the way you want them, and have it serve up the appropriate objects."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["The one thing I didn't like: the Django ORM has absolutely no support for binary BLOBs.", "If you want to serve up photos or something, you will need to keep them in a file system, and not in a database.", "Because we were using multiple servers, I had to choose between writing my own BLOB support or finding some replication framework that would keep all the servers up to date with the latest binary data.", "(I chose to write my own BLOB support.", "It wasn't very hard, so I was actually annoyed that the Django guys didn't do that work.", "There should be one, and preferably only one, obvious way to do something."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["I really like the Django ORM.", "It makes the database part really easy; you don't need to know any SQL.", "(I don't like SQL and I do like Python, so it's a double win.", ")  The \"admin interface\", which you get for free, gives you a great way to look through your data, and to poke data in during testing and development."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "any", "childNum": 0, "tag": "em", "pos": 1, "childList": []}]}, {"text": ["I recommend Django without reservation."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}]]