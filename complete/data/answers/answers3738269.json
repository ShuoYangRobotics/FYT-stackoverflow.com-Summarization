[[{"text": ["You'll probably want to start out with a dogs table containing all the flat (non array) data for each dog, things which each dog has one of, like a name, a sex, and an age:"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "dogs", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "one", "childNum": 0, "tag": "em", "childList": []}]}, {"code": "<pre>\n<code>\n CREATE TABLE `dogs` (\n  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  `name` VARCHAR(64),\n  `age` INT UNSIGNED,\n  `sex` ENUM('Male','Female')\n);\n</code>\n</pre>\n", "senID": 1}, {"text": ["From there, each dog \"has many\" measurements, so you need a dog_mesaurements table to store the 24 measurements:"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "dog_mesaurements", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n CREATE TABLE `dog_measurements` (\n  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  `dog_id` INT UNSIGNED NOT NULL,\n  `paw` ENUM ('Front Left','Front Right','Rear Left','Rear Right'),\n  `taken_at` DATETIME NOT NULL\n);\n</code>\n</pre>\n", "senID": 3}, {"text": ["Then whenever you take a measurement, you INSERT INTO dog_measurements (dog_id,taken_at) VALUES (*?", "*, NOW()); where * ?", "* is the dog's ID from the dogs table."], "childNum": 3, "tag": "p", "senID": 4, "childList": [{"text": "INSERT INTO dog_measurements (dog_id,taken_at) VALUES (*?*, NOW());", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "?", "childNum": 0, "tag": "em", "pos": 0, "childList": []}, {"text": "dogs", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}, {"text": ["You'll then want tables to store the actual frames for each measurement, something like:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n CREATE TABLE `dog_measurement_data` (\n  `id` INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,\n  `dog_measurement_id` INT UNSIGNED NOT NULL,\n  `frame` INT UNSIGNED,\n  `sensor_row` INT UNSIGNED,\n  `sensor_col` INT UNSIGNED,\n  `value` NUMBER\n);\n</code>\n</pre>\n", "senID": 6}, {"text": ["That way, for each of the 250 frames, you loop through each of the 63 sensors, and store the value for that sensor with the frame number into the database:"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n INSERT INTO `dog_measurement_data` (`dog_measurement_id`,`frame`,`sensor_row`,`sensor_col`,`value`) VALUES\n(*measurement_id?*, *frame_number?*, *sensor_row?*, *sensor_col?*, *value?*)\n</code>\n</pre>\n", "senID": 8}, {"text": ["Obviously replace *measurement_id?", "*, *frame_number?", "*, *sensor_number?", "*, value?", "with real values :-)"], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "value?", "childNum": 0, "tag": "em", "pos": 3, "childList": []}]}, {"text": ["So basically, each dog_measurement_data is a single sensor value for a given frame.", "That way, to get all the sensor values for all a given frame, you would:"], "childNum": 2, "tag": "p", "senID": 10, "childList": [{"text": "dog_measurement_data", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "single sensor value for a given frame", "childNum": 0, "tag": "em", "pos": -1, "childList": []}]}, {"code": "<pre>\n<code>\n SELECT `sensor_row`,sensor_col`,`value` FROM `dog_measurement_data`\nWHERE `dog_measurement_id`=*some measurement id* AND `frame`=*some frame number*\nORDER BY `sensor_row`,`sensor_col`\n</code>\n</pre>\n", "senID": 11}, {"text": ["And this will give you all the rows and cols for that frame."], "childNum": 0, "tag": "p", "senID": 12, "childList": []}], [{"text": ["I think you are not able to figure out how to put 2D data in database."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["If you think of relation between 2 columns, you can think of it as 2D data with 1st column as X axis data and 2nd column as Y axis data.", "Similarly for 3D data."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Finally your db should look like this:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n Table: Dogs\n    Columns: DogId, DogName -- contains data for each dog\n\nTable: Measurements\n    Columns: DogId, MeasurementId, 3D_DataId, 2D_DataId -- contains measurements of each dog\n\nTable: 3D_data\n    Columns: 3D_DataId, 3D_X, 3D_Y, 3D_Z -- contains all 3D data of a measurement\n\nTable: 2D_data\n    Columns: 2D_DataId, 2D_X, 2D_Y -- contains all 2D data of a measurement\n</code>\n</pre>\n", "senID": 3}, {"text": ["Also you may want to store your 3D data and 2D data in an order.", "In that case, you will have to add a column to store that order in table of 3D data and 2D data"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["Django has a library for encapsulating all the database work into Python classes, so you don't have to mess with raw SQL until you have to do something really clever.", "Even though Django is a framework for web applications, you can use the database ORM by itself."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Django", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.djangoproject.com/"}, {"text": "use the database ORM by itself", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/302651/use-only-some-parts-of-django"}]}, {"text": ["Josh's models would look like this in Python using Django:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n from django.db import models\n\nclass Dog(models.Model):\n    # Might want to look at storing birthday instead of age.\n    # If you track age, you probably need another field telling\n    # you when in the year age goes up by 1... and at that point,\n    # you're really storing a birthday.\n    name = models.CharField(max_length=64)\n    age = models.IntegerField()\n    genders = [\n        ('M', 'Male'),\n        ('F', 'Female'),\n    ]\n    gender = models.CharField(max_length=1, choices=genders)\n\nclass Measurement(models.Model):\n    dog = models.ForeignKey(Dog, related_name=\"measurements\")\n    paws = [\n        ('FL', 'Front Left'),\n        ('FR', 'Front Right'),\n        ('RL', 'Rear Left'),\n        ('RR', 'Rear Right'),\n    ]\n    paw = models.CharField(max_length=2, choices=paws)\n    taken_at = models.DateTimeField(default=date, auto_now_add=True)\n\nclass Measurement_Point(models.Model):\n    measurement = models.ForeignKey(Measurement, related_name=\"data_points\")\n    frame = models.IntegerField()\n    sensor_row = models.PositiveIntegerField()\n    sensor_col = models.PositiveIntegerField()\n    value = models.FloatField()\n\n    class Meta:\n        ordering = ['frame', 'sensor_row', 'sensor_col']\n</code>\n</pre>\n", "senID": 2}, {"text": ["The id fields are created automatically."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "id", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Then you can do things like:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n dog = Dog()\ndog.name = \"Pochi\"\ndog.age = 3\ndog.gender = 'M'\n# dog.gender will return 'M', and dog.get_gender_display() will return 'Male'\ndog.save()\n\n# Or, written another way:\ndog = Dog.objects.create(name=\"Fido\", age=3, sex='M')\n</code>\n</pre>\n", "senID": 5}, {"text": ["To take a measurement:"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n measurement = dog.measurements.create(paw='FL')\nfor frame in range(248):\n    for row in range(255):\n        for col in range(63):\n            measurement.data_points.create(frame=frame, sensor_row=row, \n                sensor_col=col, value=myData[frame][row][col])\n</code>\n</pre>\n", "senID": 7}, {"text": ["Finally, to get a frame:"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"code": "<pre>\n<code>\n # For the sake of argument, assuming the dogs have unique names.\n# If not, you'll need some more fields in the Dog model to disambiguate.\ndog = Dog.objects.get(name=\"Pochi\", sex='M')\n# For example, grab the latest measurement...\nmeasurement = dog.measurements.all().order_by('-taken_at')[0]\n# `theFrameNumber` has to be set somewhere...\ntheFrame = measurement.filter(frame=theFrameNumber).values_list('value')\n</code>\n</pre>\n", "senID": 9}, {"text": ["Note: this will return a list of tuples (e.g.", "[(1.5,), (1.8,), ... ]), since values_list() can retrieve multiple fields at once.", "I'm not familiar with NumPy, but I'd imagine it's got a function similar to Matlab's reshape function for remapping vectors to matrices."], "childNum": 3, "tag": "p", "senID": 10, "childList": [{"text": "[(1.5,), (1.8,), ... ]", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "values_list()", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "reshape", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}], [{"text": ["The only thing I would add to Josh's answer is that if you don't need to query individual frames or sensors, just store the arrays as BLOBs in the dog_measurement_data table.", "I have done this before with large binary set of sensor data and it worked out well.", "You basically query the 2d and 3d arrays with each measurement and manipulate them in code instead of the database."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["I've benefited a lot from the sqlalchemypackage; it is an Object Relational Mapper.", "What this means is that you can create a very clear and distinct separation between your objects and your data:"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "sqlalchemypackage", "tag": "a", "pos": 0, "childList": [{"text": "sqlalchemy", "tag": "code"}], "childNum": 1, "href": "http://sqlalchemy.org"}, {"text": "sqlalchemy", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"text": ["You can create a objects representing your different nouns (Dog, Measurement, Plate, etc).", "Then you create a table via sqlalchemy constructs which will contain all the data that you want to associate with, say, a Dog object.", "Finally you create a mapper between the Dog object and the dog_table."], "childNum": 5, "tag": "p", "senID": 1, "childList": [{"text": "sqlalchemy", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "Dog", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "mapper", "childNum": 0, "tag": "code", "childList": []}, {"text": "Dog", "childNum": 0, "tag": "code", "childList": []}, {"text": "dog_table", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["This is difficult to understand without an example, and I will not reproduce one here.", "Instead, please start by reading this case study and then study this tutorial."], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "this case study", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://www.rmunn.com/sqlalchemy-tutorial/tutorial.html"}, {"href": "http://www.sqlalchemy.org/docs/orm/tutorial.html", "text": "this tutorial", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["Once you can think of your Dogs and Measurements as you do in the real world (that is, the objects themselves) you can start factoring out the data that makes them up."], "childNum": 2, "tag": "p", "senID": 3, "childList": [{"text": "Dogs", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "Measurements", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Finally, try not to marry your data with an specific format (as you do currently by using numpy arrays).", "Instead, you can think of the simple numbers and then transform them on demand to the specific format your current application demands (along the lines of a Model-View-Controller paradigm)."], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "numpy", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Good luck!"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["From your description, I would highly recommend looking into PyTables.", "It's not a relational database in the traditional sense, it has most of the features you're likely to be using (e.g.", "querying) while allowing easy storage of large, multidimensional datasets and their attributes.", "As an added bonus, it's tightly integrated with numpy."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "PyTables", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.pytables.org/moin"}]}]]