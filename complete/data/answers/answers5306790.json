[[{"text": ["Here's a Perl solution:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n while (&lt;DATA&gt;) {\n    s/^(.+ (\\d+))$/(\"$1\" \"#$2\")/;\n    print;\n}\n\n__DATA__\nChapter 3 Convex Functions 97\n3.1 Definitions 98\n3.2 Basic Properties 103\n</code>\n</pre>\n", "senID": 1}, {"text": ["prints:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n (\"Chapter 3 Convex Functions 97\" \"#97\")\n(\"3.1 Definitions 98\" \"#98\")\n(\"3.2 Basic Properties 103\" \"#103\")\n</code>\n</pre>\n", "senID": 3}, {"text": ["or as a one liner:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n perl -pe 's/^(.+ (\\d+))$/(\"$1\" \"#$2\")/'\n</code>\n</pre>\n", "senID": 5}], [{"text": ["In Python,"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n \"Chapter 3 Convex Functions 97\".rsplit(None,1)\n</code>\n</pre>\n", "senID": 1}, {"text": ["gives"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n ['Chapter 3 Convex Functions', '97']\n</code>\n</pre>\n", "senID": 3}, {"text": ["Working with a block of text,"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n txt = \"\"\"Chapter 3 Convex Functions 97\n    3.1 Definitions 98\n    3.2 Basic Properties 103\"\"\"\n\nfor line in txt.split('\\n'):\n    line = line.strip().rsplit(None,1)\n    print('(\"{0} {1}\" \"#{1}\")'.format(*line))\n</code>\n</pre>\n", "senID": 5}, {"text": ["gives"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n (\"Chapter 3 Convex Functions 97\" \"#97\")\n(\"3.1 Definitions 98\" \"#98\")\n(\"3.2 Basic Properties 103\" \"#103\")\n</code>\n</pre>\n", "senID": 7}, {"text": ["Edit: I have updated it per your Note such that the page numbers are duplicated."], "childNum": 1, "tag": "p", "senID": 8, "childList": [{"text": "Edit:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}], [{"text": ["Works with pretty much every version of python"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n infile = open(\"input.txt\")\noutfile = open(\"output.txt\", \"w\")\n\nfor line in infile:\n    line, last = line.rstrip().rsplit(\" \", 1)\n    outfile.write('(\"%s %s\" \"#%s\")\\n' % (line, last, last))\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Here's a couple of ways to do it using sed:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "sed", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n sed 's/\\(.* \\)\\(.*\\)/(\"\\1\\2\" \"#\\2\")/' inputfile\n</code>\n</pre>\n", "senID": 1}, {"text": ["or"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n sed 's/\\(.* \\)\\([0-9]*\\)/(\"\\1\\2\" \"#\\2\")/' inputfile\n</code>\n</pre>\n", "senID": 3}, {"text": ["Here's a couple using AWK:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n awk '{n = $NF; print \"(\\\"\" $0 \"\\\" \\\"#\" n \"\\\")\"}' inputfile\n</code>\n</pre>\n", "senID": 5}, {"text": ["or"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n awk 'BEGIN {q=\"\\x22\"} {n = $NF; print \"(\" q $0 q \" \" q \"#\" n q \")\"}' inputfile\n</code>\n</pre>\n", "senID": 7}], [{"code": "<pre>\n<code>\n import re\ndef format(str):\n  m = re.search('(.*)\\s(\\d+)$', str)\n  return \"(\\\"\" + m.group(1) + \"\\\" \\\"#\" +  m.group(2) + \"\\\")\"\n\nprint format('Chapter 3 Convex Functions 97')\n\nprint format('3.1 Definitions 98')\n\nprint format('3.2 Basic Properties 103')\n</code>\n</pre>\n", "senID": 0}, {"text": ["returns"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n (\"Chapter 3 Convex Functions\" \"#97\")\n(\"3.1 Definitions\" \"#98\")\n(\"3.2 Basic Properties\" \"#103\")\n</code>\n</pre>\n", "senID": 2}], [{"code": "<pre>\n<code>\n def munge(line):\n    number = line.rsplit(None,1)[1]\n    return '''(\"{0}\" \"#{1}\")'''.format(line, number)\n</code>\n</pre>\n", "senID": 0}], [{"code": "<pre>\n<code>\n import re\npat = re.compile('^(.+?(\\d+)) *$',re.M)\n\nch = '''Chapter 3 Convex Functions 97 \n3.1 Definitions 98  \n3.2 Basic Properties 103'''\n\nprint ch\nprint\nprint pat.sub('\"\\\\1\" \"#\\\\2\"',ch)\n</code>\n</pre>\n", "senID": 0}, {"text": ["result"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n Chapter 3 Convex Functions 97 \n3.1 Definitions 98  \n3.2 Basic Properties 103\n\n\"Chapter 3 Convex Functions 97\" \"#97\"\n\"3.1 Definitions 98\" \"#98\"\n\"3.2 Basic Properties 103\" \"#103\"\n</code>\n</pre>\n", "senID": 2}]]