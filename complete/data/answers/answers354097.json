[[{"text": ["I found an answer here http://vim.wikia.com/wiki/Restoring_indent_after_typing_hash"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://vim.wikia.com/wiki/Restoring_indent_after_typing_hash", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://vim.wikia.com/wiki/Restoring_indent_after_typing_hash"}]}, {"text": ["It seems that the vim smartindent option is the cause of the problem.", "The referenced page above describes work-a-rounds but after reading the help in smartindent in vim itself (:help smartindent), I decided to try cindent instead of smartindent."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["I replaced "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n set smartindent\n</code>\n</pre>\n", "senID": 3}, {"text": ["with "], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n set cindent\n</code>\n</pre>\n", "senID": 5}, {"text": ["in my .vimrc file"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["and so far it is working perfectly."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["This changed also fixed the behavior of '&lt;&lt;' and '>>' for indenting visual blocks that include python comments."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["There are more configuration options for and information on indentation in the vim help for smartindent and cindent (:help smartindent and :help cindent)."], "childNum": 0, "tag": "p", "senID": 9, "childList": []}], [{"text": ["I have the following lines in my .vimrc, seems to be installed by default with my Ubuntu 8.10"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n set smartindent\ninoremap # X^H#\nset autoindent\n</code>\n</pre>\n", "senID": 1}, {"text": ["And I don't observe the problem.", "Maybe you can try this.", "(Note that ^H should be entered by Ctrl-V Ctrl-H)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["PolyThinker: Though I see that response a lot to this question, it's not a good solution.", "The editor still thinks it should be indented all the way to left - check this by pushing == on a line that starts with a hash, or pushing = while a block of code with comments in it is highlighted to reindent."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The real solution is 'filetype indent on', and remove the smartindent and autoindent (or cindent) lines in your vimrc.", "Someone else (appparently David Bustos) was kind enough to write a full indentation parser for us; it's located at $VIMDIRECTORY/indent/python.vim."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["(Paul's cindent solution probably works for python, but 'filetype indent on' is much more generally useful)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["My Vim configuration doesn't do that.", "You might try the python.vim script available from this link:  http://www.vim.org/scripts/script.php?script_id=790"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://www.vim.org/scripts/script.php?script_id=790", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://www.vim.org/scripts/script.php?script_id=790"}]}], [{"text": ["It's caused by the 'smartindent' feature.", "If you have :set smartindent in your .vimrc you need to remove it."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": ":set smartindent", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["@nevinera: I was having the same problem as the others (Python comments appearing at the first column when entered as the first character of a new line), but only your method fixed the problem in my case (I'm running version 7.2 on OS X 10.4)."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}]]