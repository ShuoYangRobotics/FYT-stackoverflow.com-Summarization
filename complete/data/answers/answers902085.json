[[{"text": ["Why implement it yourself?", "An existing utility like daemon or Debian's start-stop-daemon is more likely to get the other difficult stuff right about running long-living server processes."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "daemon", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://libslack.org/daemon/"}, {"text": "start-stop-daemon", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Anyway, when you start the service, put its pid in /var/run/&lt;name&gt;.pid and then make your ps command just look for that process ID, and check that it is the right process.", "On Linux you can simply look at /proc/&lt;pid&gt;/exe to check that it points to the right executable."], "childNum": 3, "tag": "p", "senID": 1, "childList": [{"text": "/var/run/&lt;name&gt;.pid", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "ps", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "/proc/&lt;pid&gt;/exe", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["Please don't reinvent init.", "Your OS has capabilities to do this that require nearly no system resources and will definitely do it better and more reliably than anything you can reproduce."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Classic Linux has /etc/inittab"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Ubuntu has /etc/event.d (upstart)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["OS X has launchd"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Solaris has smf"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["The following code checks a given process in a given interval, and restarts it."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n #Restarts a given process if it is finished.\n#Compatible with Python 2.5, tested on Windows XP.\nimport threading\nimport time\nimport subprocess\n\nclass ProcessChecker(threading.Thread):\n    def __init__(self, process_path, check_interval):\n        threading.Thread.__init__(self)\n        self.process_path = process_path\n        self.check_interval = check_interval\n\n    def run (self):\n        while(1):\n            time.sleep(self.check_interval)\n            if self.is_ok():\n                self.make_sure_process_is_running()\n\n    def is_ok(self):\n        ok = True\n        #do the database locks, client data corruption check here,\n        #and return true/false\n        return ok\n\n    def make_sure_process_is_running(self):\n        #This call is blocking, it will wait for the\n        #other sub process to be finished.\n        retval = subprocess.call(self.process_path)\n\ndef main():\n    process_path = \"notepad.exe\"\n    check_interval = 1 #In seconds\n    pm = ProcessChecker(process_path, check_interval)\n    pm.start()\n    print \"Checker started...\"\n\nif __name__ == \"__main__\":\n    main()\n</code>\n</pre>\n", "senID": 1}], [{"text": ["maybe you need http://supervisord.org"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://supervisord.org", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://supervisord.org"}]}], [{"text": ["I haven't tried it myself, but there is a Python System Information module that can be used to find processes and get information about them.", "AFAIR there is a ProcessTable class that can be used to inspect the running processes, but it doesn't seem to be very well documented..."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Python System Information", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://pypi.python.org/pypi/PSI"}, {"text": "ProcessTable", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["I'd go the command-line route (it's just easier imho) as long as you only check every second or two the resource usage should be infintesimal compared to the available processing on any system less than 10 years old."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}]]