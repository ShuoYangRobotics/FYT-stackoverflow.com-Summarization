[[{"text": ["lxml isn't going to help you at all.", "It isn't concerned about front-end rendering at all."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["To accurately work out how something renders, you need to render it.", "For that you need to hook into a browser, spawn the page and run some JS on the page to find the DOM element and get its attributes."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["It's totally possible but I think you should start by looking at how website screenshot factories work (as they'll share 90% of the code you need to get a browser launching and showing the right page). "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["You may want to still use lxml to inject your javascript into the page."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["I agree with Oli, rendering the page in question and inspecting DOM via JavaScript is the most practical way IMHO."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Oli", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/users/12870/oli"}]}, {"text": ["You might find jQuery very useful here:"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "jQuery", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://jquery.com"}]}, {"code": "<pre>\n<code>\n $(document).ready(function() {\n    var elem = $(\"div#some_container_id h1\")\n    var elem_offset = elem.offset();\n    /* elem_offset is an object literal:\n       elem_offset = { x: 25, y: 140 }\n    */\n    var elem_height = elem.height();\n    var elem_width = elem.width();\n    /* bottom_right is then\n       { x: elem_offset.x + elem_width,\n         y: elem_offset.y + elem_height }\n});\n</code>\n</pre>\n", "senID": 2}, {"text": ["Related documentation is here."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "here", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.jquery.com/CSS"}]}], [{"text": ["Yes, Javascript is the way to go:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["var allElements=document.getElementsByTagName(\"*\"); will select all the elements in the page."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Then you can loop through this a extract the information you need from each element.", "Good documentation about getting the dimensions and positions of an element is here."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "is here.", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://www.quirksmode.org/dom/tests/elementdimensions.html"}]}, {"text": ["getElementsByTagName returns a nodelist not an array (so if your JS changes your HTML those changes will be reflected in the nodelist), so I'd be tempted to build the data into an AJAX post and send it to a server when it's done."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["I was not able to find any easy solution (ie.", "Java/Perl/Python :) to hook onto Webkit/Gecko to solve the above rendering problem.", "The best I could find was the Lobo rendering engine written in Java which has a very clear API that does exactly what I want - access to both DOM and the rendering attributes of HTML elements."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Lobo rendering engine", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://lobobrowser.org/"}]}, {"text": ["JRex is a Java wrapper to Gecko rendering engine."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "JRex", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://jrex.mozdev.org/docs.html"}]}], [{"text": ["you have three main options:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["1) http://www.gnu.org/software/pythonwebkit is webkit-based;"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://www.gnu.org/software/pythonwebkit", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.gnu.org/software/pythonwebkit"}]}, {"text": ["2) python-comtypes for accessing MSHTML (windows only)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["3) hulahop (python-xpcom) which is xulrunner-based"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["you should get the pyjamas-desktop source code and look in the pyjd/ directory for \"startup\" code which will allow you to create a web browser application and begin, once the \"page loaded\" callback has been called by the engine, to manipulate the DOM."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["you can perform node-walking, and can access the properties of the DOM elements that you require.", "you can look at the pyjamas/library/pyjamas/DOM.py module to see many of the things that you will need to be using in order to do what you want."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["but if the three options above are not enough then you should read the page http://wiki.python.org/moin/WebBrowserProgramming for further options, many of which have been mentioned here by other people."], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "http://wiki.python.org/moin/WebBrowserProgramming", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/WebBrowserProgramming"}]}, {"text": ["l."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["The problem is that current browsers don't render things quite the same.", "If you're looking for the standards compliant way of doing things, you could probably write something in Python to render the page, but that's going to be a hell of a lot of work."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["You could use the wxHTML control from wxWidgets to render each part of a page individually to get an idea of it's size."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "wxHTML control from wxWidgets", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.wxwidgets.org/2.6/wx_wxhtml.html"}]}, {"text": ["If you have a Mac you could try WebKit.", "That same article has some suggestions for solutions on other platforms too."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "WebKit", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.paulhammond.org/webkit2png/"}]}], [{"text": ["You might consider looking at WWW::Selenium.", "With it (and selenium rc) you can puppet string IE, Firefox, or Safari from inside of Perl."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "WWW::Selenium", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://search.cpan.org/dist/Test-WWW-Selenium/lib/WWW/Selenium.pm"}, {"text": "selenium rc", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://seleniumhq.org/projects/remote-control/"}]}]]