[[{"text": ["I was missing "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n l.set_option(ldap.OPT_REFERRALS, 0)\n</code>\n</pre>\n", "senID": 1}, {"text": ["From the init."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["If you are open to using pywin32, you can use Win32 calls from Python.", "This is what we do in our CherryPy web server:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import win32security\ntoken = win32security.LogonUser(\n    username,\n    domain,\n    password,\n    win32security.LOGON32_LOGON_NETWORK,\n    win32security.LOGON32_PROVIDER_DEFAULT)\nauthenticated = bool(token)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I see your comment to @Johan Buret about the DN not fixing your problem, but I also believe that is what you should look into."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Given your example, the DN for the default administrator account in AD will be:\ncn=Administrator,cn=Users,dc=mydomain,dc=co,dc=uk - please try that."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["That worked for me, l.set_option(ldap.OPT_REFERRALS, 0) was the key to access the ActiveDirectory.", "Moreover, I think that you should add an \"con.unbind()\" in order to close the connection before finishing the script."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "l.set_option(ldap.OPT_REFERRALS, 0)", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}], [{"text": ["I tried to add"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["but instead of an error python just hangs and wont respond to anything anymore.", "Maybe im building the search querry wrong, what is the Base part of the search?", "Im using the same as the DN for the simple bind (oh and i had  to do l.simple_bind, instead of l.simple_bind_s):"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n import ldap\nlocal = ldap.initialize(\"ldap://127.0.0.1\")\nlocal.simple_bind(\"CN=staff,DC=mydomain,DC=com\")\n#my pc is not actually connected to this domain \nresult_id = local.search(\"CN=staff,DC=mydomain,DC=com\", ldap.SCOPE_SUBTREE, \"cn=foobar\", None)\nlocal.set_option(ldap.OPT_REFERRALS, 0)\nresult_type, result_data = local.result(result_id, 0)\n</code>\n</pre>\n", "senID": 2}, {"text": ["im using AD LDS and the instance is registered for the current account"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["if you have Kerberos installed and talking to AD, as would be the case with, say, Centrify Express installed and running, you might just use python-kerberos.", "E.g."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import kerberos\nkerberos.checkPassword('joe','pizza','krbtgt/x.pizza.com','X.PIZZA.COM')`\n</code>\n</pre>\n", "senID": 1}, {"text": ["would return True a user 'joe' has password 'pizza' in the Kerberos realm X.PIZZA.COM.", "(typically, I think, the latter would be the same as the name of the AD Domain)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Use a Distinguished Name to log on your system.", "\"CN=Your user,CN=Users,DC=b2t,DC=local\"\nIt should work on any LDAP system, including AD"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "\"CN=Your user,CN=Users,DC=b2t,DC=local\"", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["If this is part of a webapp intended for authenticated ad-users, this so question might be of interest."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "this so question", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/922805/spnego-kerberos-token-generation-validation-for-sso-using-python"}]}]]