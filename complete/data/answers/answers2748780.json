[[{"text": ["But does that /media/ global directory exist?", "And have you placed in there a scripts subdirectories with the scripts you want to serve from there?", "What about the /scripts/... url from which you want to serve JQuery.js -- that doesn't seem to be served anywhere from your urls.py.", "If you (for whatever reason) want to serve scripts (or any other statically served file) from several different URL paths, all of those URL paths need to be matched in urls.py with the static-serving -- or else, do the normal things and serve them all from the /media/... root URL, and map that media root to the dir where you actually keep these files (in their respective subdirs, typically)."], "childNum": 7, "tag": "p", "senID": 0, "childList": [{"text": "/media/", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "scripts", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "/scripts/...", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "JQuery.js", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "urls.py", "childNum": 0, "tag": "code", "pos": 3, "childList": []}, {"text": "urls.py", "childNum": 0, "tag": "code", "childList": []}, {"text": "/media/...", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Django's docs about static serving (for development only, since it's documented as "], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "Django's docs", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/howto/static-files/"}, {"text": "only", "childNum": 0, "tag": "em", "childList": []}]}, {"text": ["so beware!-) seems pretty clear to me."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["You may want to use absolute path for 'document_root' in urls.py if you want to use the development server to serve static files.", "MEDIA_ROOT and MEDIA_URL don't play any role here."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Here are my settings for your reference.", "I put all static media files under site_media/"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n mysite/\n    site_media/\n        css/\n        js/\n        images/\n    ...\n</code>\n</pre>\n", "senID": 2}, {"text": ["in settings.py:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n ROOT_PATH = os.path.normpath(os.path.dirname(__file__))\n</code>\n</pre>\n", "senID": 4}, {"text": ["in urls.py:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n url(r'^media/(?P&lt;path&gt;.*)$', \"django.views.static.serve\", {'document_root':\n                                      os.path.join(settings.ROOT_PATH, 'site_media')})\n</code>\n</pre>\n", "senID": 6}, {"text": ["You can move static files else where, just need to point 'document_root' to the correct path.", "Make sure comment out this url line for production deployment."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["Actually, you can put your Javascript files (and all your static content) anywhere you want.", "I mean, Django does not impose a standard on where to place them, after all they won't be handled by Django, they'll be served by the webserver."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Said that, It's a good idea to keep them somewhere close to the project's files.", "I'd recommend to keep them in a sibling folder to your Django code.", "Same with MEDIA_ROOT."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["It is a good idea to decouple your static files from python files because now you can put them in totally separate folders in a production environment and easily give different access to static files and python code (say FTP access, or permissions)."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Something to keep in mind is that the settings' MEDIA_ROOT is the place where user's media files (that is uploaded content) will be placed, these are not your static project files, these are whatever files your Django app uploads (avatars, attachments, etc)."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "uploaded", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["Proposed folder structure:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n mysite.com/\n  media/       - User media, this goes in settings.MEDIA_ROOT\n  static/      - This is your static content folder\n    css/\n    js/\n    images/\n  templates/\n  project/     - This is your Django project folder\n    __init__.py\n    manage.py\n    settings.py\n    myapp/\n      __init__.py\n      ...files..py\n</code>\n</pre>\n", "senID": 5}, {"text": ["See the other responses recommendation on using Django's serve() function for development enviroment.", "Just make sure you add that url() to your urlpatterns under a settings.DEBUG is True conditional."], "childNum": 4, "tag": "p", "senID": 6, "childList": [{"text": "serve()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "url()", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "urlpatterns", "childNum": 0, "tag": "code", "childList": []}, {"text": "settings.DEBUG is True", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["As for your templates, it's a good idea to use a context processor to send your static file's path to all your templates."], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "context processor", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors"}]}], [{"text": ["The error 404 occurs because MEDIA_ROOT requires absolute path, not relative.", "The server is trying to access /media in your filesystem, which is obviously not what you want."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "MEDIA_ROOT", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "/media", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Try this instead:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n import os\nPROJECT_PATH = os.path.realpath(os.path.dirname(__file__))\nMEDIA_ROOT = os.path.join(PROJECT_PATH, 'site_media')\nMEDIA_URL = '/media/'\n</code>\n</pre>\n", "senID": 2}], [{"text": ["I serve javascript via static.", "So I have something in my urls.py like"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n (r'^static/(?P&lt;path&gt;.*)$', 'django.views.static.serve', {'document_root': os.getenv('STATIC_DIR')})\n</code>\n</pre>\n", "senID": 1}, {"text": ["So JS urls look like /static/js/blah.js, CSS urls look like /static/css/blah.css, etc.", "I have Apache handle the static directory when running in production to avoid any issues with Django's static serving mechanism."], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "/static/js/blah.js", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "/static/css/blah.css", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}], [{"text": ["For my development work, I use Django's built-in server, but I read the media files from the same directory as they would be in production (/srv/nginx/sitename/media/).", "So I clone the exact directory structure of my production server on my computer at home, letting me seamlessly push changes to production without having to change anything. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I keep two different settings.py files, though.", "My home settings.py file has my local database settings, a different MEDIA_URL setting, and DEBUG set to True.", "I use this in my URLs file to enable the server view for local media (since I don't run nginx on my home computer)."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["In urls.py:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n if settings.DEBUG:\n    urlpatterns += patterns('',\n        (r'^media/(?P&lt;path&gt;.*)$', 'django.views.static.serve',\n            {'document_root': settings.MEDIA_ROOT}),\n    )\n</code>\n</pre>\n", "senID": 3}, {"text": ["From settings.py (note, MEDIA_ROOT must be an absolute path):"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "must", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n # Absolute path to the directory that holds media.\n# Example: \"/home/media/media.lawrence.com/\"\nMEDIA_ROOT = '/srv/nginx/&lt;sitename&gt;/media/'\n\n# URL that handles the media served from MEDIA_ROOT. Make sure to use a\n# trailing slash if there is a path component (optional in other cases).\n# Examples: \"http://media.lawrence.com\", \"http://example.com/media/\"\nMEDIA_URL = 'http://127.0.0.1:8000/media/'\n\nTEMPLATE_CONTEXT_PROCESSORS = (\n    # I've taken out my other processors for this example\n    \"django.core.context_processors.media\",\n)\n</code>\n</pre>\n", "senID": 5}, {"text": ["In a template:"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n &lt;link rel=\"stylesheet\" href=\"{{ MEDIA_URL }}css/form.css\" /&gt;{% endblock %}\n</code>\n</pre>\n", "senID": 7}, {"text": ["Filesystems:"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"code": "<pre>\n<code>\n /srv/nginx/&lt;sitename&gt;\n    /media  &lt;-- MEDIA_ROOT/MEDIA_URL points to here\n        /css\n            base.css\n            form.css\n        /img\n        /js\n</code>\n</pre>\n", "senID": 9}, {"text": ["Oh, also: if that's a direct copy from your urls.py file, you forgot a comma after your serve view, that's causing your TypeError ;)"], "childNum": 0, "tag": "p", "senID": 10, "childList": []}], [{"text": ["This is a structure I use in a project separated into multiple apps.", "It's a good practice to adapt this structure right at the start -- you don't want global rearrangement when you need to add another app to your project."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n /media\n  favicon.ico\n  robots.txt\n  /upload # user uploaded files\n  /js  # global js files like juery\n  /main_app\n    /js\n    /css\n    /img\n  /other_app\n    /js\n    /css\n    /img\n</code>\n</pre>\n", "senID": 1}, {"text": ["Then I use excellent StaticMiddleware from django-annoying to serve files.", "settings.py:"], "childNum": 4, "tag": "p", "senID": 2, "childList": [{"text": "StaticMiddleware", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "django-annoying", "tag": "a", "pos": -1, "childList": [{"text": "django-annoying", "tag": "code"}], "childNum": 1, "href": "http://bitbucket.org/offline/django-annoying"}, {"text": "django-annoying", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "settings.py", "childNum": 0, "tag": "strong", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n import os\nimport annoying\n\nMEDIA_ROOT = os.path.join(os.path.dirname(__file__), \"media\")\nMIDDLEWARE_CLASSES = (\n    'annoying.middlewares.StaticServe',\n    #...\n)\n</code>\n</pre>\n", "senID": 3}]]