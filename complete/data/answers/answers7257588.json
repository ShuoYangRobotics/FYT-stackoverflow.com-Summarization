[[{"text": ["There's a good article on the topic in the Python wiki: Why Lists Can't Be Dictionary Keys.", "As explained there:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Why Lists Can't Be Dictionary Keys", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/DictionaryKeys"}]}, {"text": ["It can be done without really breaking any of the requirements, but it leads to unexpected behavior.", "Lists are generally treated as if their value was derived from their content's values, for instance when checking (in-)equality.", "Many would - understandably - expect that you can use any list [1, 2] to get the same key, where you'd have to keep around exactly the same list object.", "But lookup by value breaks as soon as a list used as key is modified, and for lookup by identity requires you to keep around exactly the same list - which isn't requires for any other common list operation (at least none I can think of)."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "[1, 2]", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}, {"text": ["Other objects such as modules and object make a much bigger deal out of their object identity anyway (when was the last time you had two distinct module objects called sys?", "), and are compared by that anyway.", "Therefore, it's less surprising - or even expected - that they, when used as dict keys, compare by identity in that case as well."], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "object", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "sys", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}], [{"text": ["Here's an answer http://wiki.python.org/moin/DictionaryKeys"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://wiki.python.org/moin/DictionaryKeys", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/DictionaryKeys"}]}, {"text": ["Looking up different lists with the same contents would produce different results, even though comparing lists with the same contents would indicate them as equivalent."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["What about Using a list literal in a dictionary lookup?"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["The issue is that tuples are immutable, and lists are not.", "Consider the following"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n d = {}\nli = [1,2,3]\nd[li] = 5\nli.append(4)\n</code>\n</pre>\n", "senID": 1}, {"text": ["What should d[li] return?", "Is it the same list?", "How about d[[1,2,3]]?", "It has the same values, but is a different list?"], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "d[li]", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "d[[1,2,3]]", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}, {"text": ["Ultimately, there is no satisfactory answer.", "For example, if the only key that works is the original key, then if you have no reference to that key, you can never again access the value.", "With every other allowed key, you can construct a key without a reference to the original."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["If both of my suggestions work, then you have very different keys that return the same value, which is more than a little surprising.", "If only the original contents work, then your key will quickly go bad, since lists are made to be modified."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["Your awnser can be found here:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Source &amp; more info: http://wiki.python.org/moin/DictionaryKeys"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://wiki.python.org/moin/DictionaryKeys", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/DictionaryKeys"}]}], [{"text": ["According to the Python 2.7.2 documentation:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["A tuple is immutable in the sense that you cannot add, remove or replace its elements, but the elements themselves may be mutable.", "List's hash value depends on the hash values of its elements, and so it changes when you change the elements."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Using id's for list hashes would imply that all lists compare differently, which would be surprising and inconvenient."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["The simple answer to your question is that the class list does not implement the method hash which is required for any object which wishes to be used in as a key in a dictionary.", "However the reason why hash is not implemented the same way it is in say the tuple class (based on the content of the container) is because a list is mutable so editing the list would require the hash to be recalculated which may mean the list in now located in the wrong bucket within the underling hash table.", "Note that since you cannot modify a tuple (immutable) it doesn't run into this problem. "], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "hash", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}, {"text": "hash", "childNum": 0, "tag": "strong", "pos": 1, "childList": []}]}, {"text": ["As a side note the actual implementation of the dictobjects lookup is based on Algorithm D from Knuth Vol.", "3, Sec.", "6.4.", "If you have that book available to you it might be a worthwhile read, in addition if your really really interested you may like to take a peek at the developer comments on the actual implementation of dictobject here.", "It goes into great detail as to exactly how it works.", "There is also a python lecture on the implementation of dictionaries which you may be interested in.", "They go through the definition of a key and what a hash is in the first few minutes."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "implementation of dictobject here.", "tag": "a", "pos": 3, "childList": [], "childNum": 0, "href": "http://svn.python.org/view/python/trunk/Objects/dictobject.c?view=markup"}, {"text": "python lecture", "tag": "a", "pos": 5, "childList": [], "childNum": 0, "href": "http://vodpod.com/watch/4072099-pycon-2010the-mighty-dictionary-55"}]}], [{"text": ["Why can't I use a list as a dict key in python?"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Why can't I use a list as a dict key in python?", "childNum": 0, "tag": "b", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n &gt;&gt;&gt; d = {repr([1,2,3]): 'value'}\n{'[1, 2, 3]': 'value'}\n</code>\n</pre>\n", "senID": 1}, {"text": ["(for anybody who stumbles on this question looking for a way around it)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["as explained by others here, indeed you cannot.", "You can however use its string representation instead if you really want to use your list."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}]]