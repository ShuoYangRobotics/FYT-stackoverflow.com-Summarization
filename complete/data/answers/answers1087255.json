[[{"text": ["eval and exec are handy quick-and-dirty way to get some source code dynamically, maybe munge it a bit, and then execute it -- but they're hardly ever the best way, especially in production code as opposed to \"quick-and-dirty\" prototypes &amp;c."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "eval", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "exec", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["For example, if I had to deal with such dynamic Python sources, I'd reach for the ast module -- ast.literal_eval is MUCH safer than eval (you can call it directly on a string form of the expression, if it's a one-off and relies on simple constants only, or do node = ast.parse(source) first, then keep the node around, perhaps munge it with suitable visitors e.g.", "for variable lookup, then literal_eval the node) -- or, once having put the node in proper shape and vetted it for security issues, I could compile it (yielding a code object) and build a new function object out of that.", "Far less simple (except that ast.literal_eval is just as simple as eval for the simplest cases!", ") but safer and preferable in production-quality code."], "childNum": 9, "tag": "p", "senID": 1, "childList": [{"text": "ast", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/library/ast.html#module-ast"}, {"text": "ast.literal_eval", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "eval", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "node = ast.parse(source)", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "node", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "literal_eval", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "compile", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "ast.literal_eval", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "eval", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"text": ["For many tasks I've seen people (ab-)use exec and eval for, Python's powerful built-ins, such as getattr and setattr, indexing into globals(), &amp;c, provide preferable and in fact often simpler solutions.", "For specific uses such as parsing JSON, library modules such as json are better (e.g.", "see SilentGhost's comment on tinnitus' answer to this very question).", "Etc, etc..."], "childNum": 6, "tag": "p", "senID": 2, "childList": [{"text": "exec", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "eval", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "getattr", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "setattr", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "globals()", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "json", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["The Wikipedia article oneval is pretty informative, and details various uses."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Wikipedia article oneval", "tag": "a", "pos": 0, "childList": [{"text": "eval", "tag": "code"}], "childNum": 1, "href": "http://en.wikipedia.org/wiki/Eval#Uses"}, {"text": "eval", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Some of the uses it suggests are:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"tag": "ul", "num": 4, "lis": [{"text": "Evaluating mathematical expressions", "tag": "none", "senID": 2}, {"text": ["Compiler bootstrapping"], "childNum": 0, "tag": "a", "senID": 3, "childList": []}, {"text": "Scripting (dynamic languages in general are very suitable to this)", "tag": "none", "senID": 4}, {"text": "Language tutors", "tag": "none", "senID": 5}]}], [{"text": ["You may want to use it to allow users to enter their own \"scriptlets\": small expressions (or even small functions), that can be used to customize the behavior of a complex system.", "In that context, and if you do not have to care too much for the security implications (e.g.", "you have an educated userbase), then eval() may be a good choice."], "childNum": 3, "tag": "p", "senID": 0, "childList": [{"text": "small", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}, {"text": "complex", "childNum": 0, "tag": "strong", "pos": -1, "childList": []}, {"text": "", "childNum": 0, "tag": "br", "pos": 1, "childList": []}]}], [{"text": ["In a program I once wrote, you had an input file where you could specify geometric parameters both as values and as python expressions of the previous values, eg:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n a=10.0\nb=5.0\nc=math.log10(a/b)\n</code>\n</pre>\n", "senID": 1}, {"text": ["A python parser read this input file and obtained the final data evaluating the values and the expressions using eval()."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["I don't claim it to be good programming, but I did not have to drive a nuclear reactor."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["In the past I have used eval() to add a debugging interface to my application.", "I created a telnet service which dropped you into the environment of the running application.", "Inputs were run through eval() so you can interactively run Python commands in the application."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["eval() is not normally very useful.", "One of the few things I have used it for (well, it was exec() actually, but it's pretty similar) was allowing the user to script an application that I wrote in Python.", "If it were written in something like C++, I would have to embed a Python interpreter in the application."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "eval()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "exec()", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["Eval is a way to interact with the Python interpreter from within a program.", "You can pass literals to eval and it evaluates them as python expressions."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["For example - "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n print eval(\"__import__('os').getcwd()\")\n</code>\n</pre>\n", "senID": 2}, {"text": ["would return the current working directory."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["cheers"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["I use it as a quick JSON parser ..."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n r='''\n{\n    \"glossary\": {\n        \"title\": \"example glossary\"\n        }\n}\n'''\n\nprint eval(r)['glossary']['title']\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I use exec to create a system of plugins in Python."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "exec", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\ntry:\n        exec (\"from \" + plugin_name + \" import Plugin\")\n        myplugin = Plugin(module_options, config=config)\n    except ImportError, message:\n        fatal (\"No such module \" + plugin_name + \\\n               \" (or no Plugin constructor) in my Python path: \" + str(message))\n    except Exception:\n        fatal (\"Module \" + plugin_name + \" cannot be loaded: \" + \\\n               str(sys.exc_type) + \": \" + str(sys.exc_value) + \\\n               \".\\n    May be a missing or erroneous option?\")\n</pre>\n", "senID": 1}, {"text": ["With a plugin like:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\nclass Plugin:\n\n    def __init__ (self):\n        pass\n\n    def query(self, arg):\n         ...\n</pre>\n", "senID": 3}, {"text": ["You will be able to call it like:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\nresult = myplugin.query(\"something\")\n</pre>\n", "senID": 5}, {"text": ["I do not think you can have plugins in Python without exec/eval."], "childNum": 2, "tag": "p", "senID": 6, "childList": [{"text": "exec", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "eval", "childNum": 0, "tag": "code", "childList": []}]}]]