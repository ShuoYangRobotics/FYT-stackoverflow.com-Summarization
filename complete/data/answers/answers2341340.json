[[{"text": ["If you want to iterate once, you can write your sum function:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def mysum(l):\n    s2 = 0\n    s = 0\n    for e in l:\n        s += e\n        s2 += e * e\n    return (s, s2)\n</code>\n</pre>\n", "senID": 1}, {"text": ["and use the result in your sigma function."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "sigma", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Edit: now you can calculate the variance like this: (s2 - (s*s) / N) / N"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "Edit", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["By taking account of @Adam Bowen's comment,\nkeep in mind that if we use mathematical tricks and transform the original formulas\nwe may degrade the results."], "childNum": 3, "tag": "p", "senID": 4, "childList": [{"text": "", "childNum": 0, "tag": "br", "pos": 0, "childList": []}, {"text": "tricks", "childNum": 0, "tag": "em", "childList": []}, {"text": "", "childNum": 0, "tag": "br", "childList": []}]}], [{"text": ["I think Nick D has the correct answer."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Assming you want to compute both mean and variance in one sweep of the file (and you don't really want two functions that have to be called one after the other), you can collect the sum of the values and of their squares and them use such sums (toghether with the number of read elements) to compute at the same time mean and variance."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["There are some numerical stability issues, but the idea in "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["http://en.wikipedia.org/wiki/Computational_formula_for_the_variance"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "http://en.wikipedia.org/wiki/Computational_formula_for_the_variance", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Computational_formula_for_the_variance"}]}, {"text": ["is the basic ingredient you need.", "Some more details are at"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Algorithms_for_calculating_variance"}]}, {"text": ["where I suggest you to read the \"Na\u00efve algorithm\"."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["Hope this helps,"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["Massimo"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}], [{"text": ["Make a list from the iterable, or use itertools.tee()."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "itertools.tee()", "tag": "a", "pos": 0, "childList": [{"text": "itertools.tee()", "tag": "code"}], "childNum": 1, "href": "http://docs.python.org/library/itertools.html#itertools.tee"}, {"text": "itertools.tee()", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["I am not sure there is much choice."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["You will have to iterate your numbers twice in any case as the standard deviation will require the mean information on each value."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If you have enough memory, you can gain on the I/O access by loading your file in memory during the first iteration but that is about it IMO."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["As I feel that there are good elements scattered in multiple answers, I would like to summarize:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": ["If your file is too big to conveniently fit in memory, and if you want a good precision in the variance, you do need to read the file twice (with one pass, the variance is the difference between two large numbers, which is not precise because of floating point limitations).", "Note that your operating system is likely to provide some automatic speed-up for the second file reading, as it may still be in RAM during the second pass."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If you do not care for the precision of the variance, you can simply iterate once over the file and calculate the quantities suggested by Nick D, with the details provided in the comment by Adam Bowen."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}]}], [{"text": ["You can compute both in one pass.", "See:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["http://www.johndcook.com/standard_deviation.html"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://www.johndcook.com/standard_deviation.html", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.johndcook.com/standard_deviation.html"}]}], [{"text": ["You have two solutions"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}]]