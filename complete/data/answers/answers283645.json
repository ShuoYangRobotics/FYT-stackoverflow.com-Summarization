[[{"text": ["Answers so far have been templating the values into a plain SQL string.", "That's absolutely fine for integers, but if we wanted to do it for strings we get the escaping issue."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Here's a variant using a parameterised query that would work for both:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n placeholder= '?' # For SQLite. See DBAPI paramstyle.\nplaceholders= ', '.join(placeholder for unused in l)\nquery= 'SELECT name FROM students WHERE id IN (%s)' % placeholders\ncursor.execute(query, l)\n</code>\n</pre>\n", "senID": 2}], [{"text": ["string.join the list values separated by commas, and use the format operator to form a query string."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "string.join", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/library/stdtypes.html#str.join"}, {"href": "http://docs.python.org/library/stdtypes.html#string-formatting", "text": "format operator", "childNum": 0, "tag": "a", "childList": []}]}, {"code": "<pre>\n<code>\n myquery = \"select name from studens where id in (%s)\" % \",\".join(map(str,mylist))\n</code>\n</pre>\n", "senID": 1}, {"text": ["(Thanks, blair-conrad)"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "blair-conrad", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/users/1199/blair-conrad"}]}], [{"text": ["The SQL you want is"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n select name from studens where id in (1, 5, 8)\n</code>\n</pre>\n", "senID": 1}, {"text": ["If you want to construct this from the python you could use"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n l = [1, 5, 8]\nsql_query = 'select name from studens where id in (' + ','.join(map(str, l)) + ')'\n</code>\n</pre>\n", "senID": 3}, {"text": ["The map function will transform the list into a list of strings that can be glued together by commas using the str.join method."], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "map", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/library/functions.html#map"}, {"href": "http://docs.python.org/library/stdtypes.html#str.join", "text": "str.join", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["Alternatively:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n l = [1, 5, 8]\nsql_query = 'select name from studens where id in (' + ','.join((str(n) for n in l)) + ')'\n</code>\n</pre>\n", "senID": 6}, {"text": ["if you prefer generator expressions to the map function."], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "generator expressions", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/glossary.html#term-generator-expression"}]}, {"text": ["UPDATE: S. Lott mentions in the comments that the Python SQLite bindings doing support sequences.", "In that case, you might want"], "childNum": 1, "tag": "p", "senID": 8, "childList": [{"text": "S. Lott", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/users/10661/slott"}]}, {"code": "<pre>\n<code>\n select name from studens where id = 1 or id = 5 or id = 8\n</code>\n</pre>\n", "senID": 9}, {"text": ["Generated by "], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"code": "<pre>\n<code>\n sql_query = 'select name from studens where ' + ' or '.join(('id = ' + str(n) for n in l))\n</code>\n</pre>\n", "senID": 11}], [{"text": ["Here is one way, where cursor is your usual cursor object:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "cursor", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n &gt;&gt;&gt; random_ids = [1234,123,54,56,57,58,78,91]\n&gt;&gt;&gt; cursor.execute(\"create table test (id)\")\n&gt;&gt;&gt; for item in random_ids:\n    cursor.execute(\"insert into test values (%d)\" % item)\n&gt;&gt;&gt; sublist = [56,57,58]\n&gt;&gt;&gt; cursor.execute(\"select id from test where id in %s\" % str(tuple(sublist)))\n&gt;&gt;&gt; a = cursor.fetchall()\n&gt;&gt;&gt; a\n[(56,), (57,), (58,)]\n</code>\n</pre>\n", "senID": 1}], [{"text": ["But what if list is too long and kinterbasdb raises this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n ProgrammingError: (0L, 'SQL statement of 80316 bytes is too long (max 65535 allowed). Consider using bound parameters to shorten the SQL code, rather than passing large values as part of the SQL string.')\n</code>\n</pre>\n", "senID": 1}, {"text": ["Any ideas except that optimizing code?"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["I like bobince's answer:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n placeholder= '?' # For SQLite. See DBAPI paramstyle.\nplaceholders= ', '.join(placeholder for unused in l)\nquery= 'SELECT name FROM students WHERE id IN (%s)' % placeholders\ncursor.execute(query, l)\n</code>\n</pre>\n", "senID": 1}, {"text": ["But I noticed this:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n placeholders= ', '.join(placeholder for unused in l)\n</code>\n</pre>\n", "senID": 3}, {"text": ["Can be replaced with:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n placeholders= ', '.join(placeholder*len(l))\n</code>\n</pre>\n", "senID": 5}, {"text": ["I find this more direct if less clever and less general.", "Here l is required to have a length (i.e.", "refer to an object that defines a __len__ method), which shouldn't be a problem.", "But placeholder must also be a single character.", "To support a multi-character placeholder use:"], "childNum": 2, "tag": "p", "senID": 6, "childList": [{"text": "l", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "__len__", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}, {"code": "<pre>\n<code>\n placeholders= ', '.join([placeholder]*len(l))\n</code>\n</pre>\n", "senID": 7}]]