[[{"text": ["Python isn't compiled in the same sense as C or C++ or even Java, python files are compiled \"on the fly\", you can think of it as being similar to a interpreted language like Basic or Perl.1"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "1", "childNum": 0, "tag": "sub", "pos": 0, "childList": []}]}, {"text": ["You can do something equivalent to conditional compile by just using an if statement.", "For example:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n if FLAG:\n    def f():\n        print \"Flag is set\"\nelse:\n    def f():\n        print \"Flag is not set\"\n</code>\n</pre>\n", "senID": 2}, {"text": ["You can do the same for the creation classes, setting of variables and pretty much everything."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["The closest way to mimic IFDEF would be to use the hasattr function.", "E.g."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n if hasattr(aModule, 'FLAG'):\n    # do stuff if FLAG is defined in the current module.\n</code>\n</pre>\n", "senID": 5}, {"text": ["You could also use a try/except clause to catch name errors, but the idiomatic way would be to set a variable to None at the top of your script."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}], [{"text": ["There is actually a way to get conditional compilation, but it's very limited."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n if __debug__:\n    doSomething()\n</code>\n</pre>\n", "senID": 1}, {"text": ["The __debug__ flag is a special case.", "When calling python with the -O or -OO options, __debug__ will be false, and the compiler will ignore that statement.", "This is used primarily with asserts, which is why assertions go away if you 'really compile' your scripts with optimization."], "childNum": 4, "tag": "p", "senID": 2, "childList": [{"text": "__debug__", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "-O", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "-OO", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "__debug__", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"text": ["So if your goal is to add debugging code, but prevent it from slowing down or otherwise affecting a 'release' build, this does what you want.", "But you cannot assign a value to __debug__, so that's about all you can use it for."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "__debug__", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["Doesn't make much sense in a dynamic environment.", "If you are looking for conditional definition of functions, you can use if:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "if", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n if happy:\n    def makemehappy():\n        return \"I'm good\"\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Python compiles a module automatically when you import it, so the only way to avoid compiling it is to not import it.", "You can write something like:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n if some_condition:\n  import some_module\n</code>\n</pre>\n", "senID": 1}, {"text": ["But that would only work for complete modules.", "In C and C++ you typically use a preprocessor for conditional compilation.", "There is nothing stopping you from using a preprocessor on your Python code, so you could write something like:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n #ifdef SOME_CONDITION\ndef some_function():\n  pass\n#endif\n</code>\n</pre>\n", "senID": 3}, {"text": ["Run that through a C preprocessor and you'd have real conditional compilation and some_function will only be defined if SOME_CONDITION is defined."], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "some_function", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "SOME_CONDITION", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["BUT (and this is important): Conditional compilation is probably not what you want.", "Remember that when you import a module, Python simply executes the code in it.", "The def and class statements in the module are actually executed when you import the module.", "So the typical way of implementing what other languages would use conditional compilation for is just a normal if statement, like:"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "executed", "childNum": 0, "tag": "em", "pos": 2, "childList": []}]}, {"code": "<pre>\n<code>\n if some_condition:\n  def some_function():\n    pass\n</code>\n</pre>\n", "senID": 6}, {"text": ["This will only define some_function if some_condition is true."], "childNum": 2, "tag": "p", "senID": 7, "childList": [{"text": "some_function", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "some_condition", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["It's stuff like this that makes dynamic languages so powerful while remaining conceptually simple."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}], [{"text": ["Use pypreprocessor"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "pypreprocessor", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.google.com/p/pypreprocessor/"}]}, {"text": ["Which can also be found on PYPI (Python Package Index) and can be fetched using pip."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "PYPI (Python Package Index)", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://pypi.python.org/pypi/pypreprocessor"}]}, {"text": ["The basic example of usage is:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n from pypreprocessor import pypreprocessor\n\npypreprocessor.parse()\n\n#define debug\n\n#ifdef debug\nprint('The source is in debug mode')\n#else\nprint('The source is not in debug mode')\n#endif\n</code>\n</pre>\n", "senID": 3}, {"text": ["You can also output the postprocessed code to a file by specifying..."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n pypreprocessor.output = 'output_file_name.py'\n</code>\n</pre>\n", "senID": 5}, {"text": ["anywhere between the pypreprocessor import and the call to parse()."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["The module is essentially the python implementation of C preprocessor conditional compilation."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["SideNote: This is compatible with both python2x and python 3k"], "childNum": 1, "tag": "p", "senID": 8, "childList": [{"text": "SideNote: This is compatible with both python2x and python 3k", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}, {"text": ["Disclaimer: I'm the author of pypreprocessor"], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "Disclaimer: I'm the author of pypreprocessor", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}], [{"text": ["You could use the method discussed here: Determine if variable is defined in Python as a substitute for #ifdef "], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Determine if variable is defined in Python", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/1592565/determine-if-variable-is-defined-in-python"}, {"text": "#ifdef", "childNum": 0, "tag": "code", "childList": []}]}]]