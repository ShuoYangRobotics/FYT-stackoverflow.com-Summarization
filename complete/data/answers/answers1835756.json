[[{"text": ["You often hear that Python encourages EAFP style (\"it's easier to ask for forgiveness than permission\") over LBYL style (\"look before you leap\").", "To me, it's a matter of efficiency and readability."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["In your example (say that instead of returning a list or an empty string, the function were to return a list or None), if you expect that 99 % of the time result will actually contain something iterable, I'd use the try/except approach.", "It will be faster if exceptions really are exceptional.", "If result is None more than 50 % of the time, then using if is probably better."], "childNum": 6, "tag": "p", "senID": 1, "childList": [{"text": "None", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "result", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "try/except", "childNum": 0, "tag": "code", "childList": []}, {"text": "result", "childNum": 0, "tag": "code", "childList": []}, {"text": "None", "childNum": 0, "tag": "code", "childList": []}, {"text": "if", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["From the Python docs:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Your function should not return mixed types (i.e.", "list or empty string).", "It should return a list of values or just an empty list.", "Then you wouldn't need to test for anything, i.e.", "your code collapses to:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n for r in function():\n    # process items\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Generally, the impression I've gotten is that exceptions should be reserved for exceptional circumstances.", "If the result is expected never to be empty (but might be, if, for instance, a disk crashed, etc), the second approach makes sense.", "If, on the other hand, an empty result is perfectly reasonable under normal conditions, testing for it with an if statement makes more sense."], "childNum": 3, "tag": "p", "senID": 0, "childList": [{"text": "result", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "result", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "if", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["I had in mind the (more common) scenario:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n # keep access counts for different files\nfile_counts={}\n...\n# got a filename somehow\nif filename not in file_counts:\n    file_counts[filename]=0\nfile_counts[filename]+=1\n</code>\n</pre>\n", "senID": 2}, {"text": ["instead of the equivalent:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n ...\ntry:\n    file_counts[filename]+=1\nexcept KeyError:\n    file_counts[filename]=1\n</code>\n</pre>\n", "senID": 4}], [{"text": ["Look Before You Leap is preferable in this case.", "With the exception approach, a TypeError could occur anywhere in your loop body and it'd get caught and thrown away, which is not what you want and will make debugging tricky."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["(I agree with Brandon Corfman though: returning None for \u2018no items\u2019 instead of an empty list is broken.", "It's an unpleasant habit of Java coders that should not be seen in Python.", "Or Java."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Your second example is broken - the code will never throw a TypeError exception since you can iterate through both strings and lists.", "Iterating through an empty string or list is also valid - it will execute the body of the loop zero times."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Please ignore my solution if the code I provide is not obvious at first glance and you have to read the explanation after the code sample."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Can I assume that the \"no value returned\" means the return value is None?", "If yes, or if the \"no value\" is False boolean-wise, you can do the following, since your code essentially treats \"no value\" as \"do not iterate\":"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n for r in function() or ():\n    # process items\n</code>\n</pre>\n", "senID": 2}, {"text": ["If function() returns something that's not True, you iterate over the empty tuple, i.e.", "you don't run any iterations.", "This is essentially LBYL."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "function()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}], [{"text": ["bobince wisely points out that wrapping the second case can also catch TypeErrors in the loop, which is not what you want.", "If you do really want to use a try though, you can test if it's iterable before the loop"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "bobince", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/1835756/using-try-vs-if-in-python/1836371#1836371"}]}, {"code": "<pre>\n<code>\n result = function();\ntry:\n    it = iter(result)\nexcept TypeError:\n    pass\nelse:\n    for r in it:\n        #process items\n</code>\n</pre>\n", "senID": 1}, {"text": ["As you can see, it's rather ugly.", "I don't suggest it, but it should be mentioned for completeness."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["As far as the performance is concerned, using try block for code that normally\ndoesn\u2019t raise exceptions is faster than using if statement everytime.", "So, the decision depends on the probability of excetional cases."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["As a general rule of thumb, you should never use try/catch or any exception handling stuff to control flow.", "Even though behind the scenes iteration is controlled via the raising of StopIteration exceptions, you still should prefer your first code snippet to the second."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "never", "childNum": 0, "tag": "em", "pos": 0, "childList": []}, {"text": "StopIteration", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}]]