[[{"text": ["You do not need to make an extra view for this, the functionality is already built in."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["First each page with a login link needs to know the current path, and the easiest way is to add the request context preprosessor to settings.py (the 4 first are default), then the request object will be available in each request:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["settings.py:"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "settings.py:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n TEMPLATE_CONTEXT_PROCESSORS = (\n    \"django.core.context_processors.auth\",\n    \"django.core.context_processors.debug\",\n    \"django.core.context_processors.i18n\",\n    \"django.core.context_processors.media\",\n    \"django.core.context_processors.request\",\n)\n</code>\n</pre>\n", "senID": 3}, {"text": ["Then add in the template you want the Login link:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["base.html:"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "base.html:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n &lt;a href=\"{% url django.contrib.auth.views.login %}?next={{request.path}}\"&gt;Login&lt;/a&gt;\n</code>\n</pre>\n", "senID": 6}, {"text": ["This will add a GET argument to the login page that points back to the current page."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["The login template can then be as simple as this:"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["registration/login.html:"], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "registration/login.html:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n {% block content %}\n&lt;form method=\"post\" action=\"\"&gt;\n  {{form.as_p}}\n&lt;input type=\"submit\" value=\"Login\"&gt;\n&lt;/form&gt;\n{% endblock %}\n</code>\n</pre>\n", "senID": 10}], [{"text": ["Django's built-in authentication works the way you want."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Their login pages include a next query string which is the page to return to after login."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "next", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Look at http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required "], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.login_required"}]}], [{"text": ["This may not be a \"best practice\", but I've successfully used this before:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n return HttpResponseRedirect(request.META.get('HTTP_REFERER','/'))\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I encountered the same problem.", "This solution allows me to keep using the generic login view:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n urlpatterns += patterns('django.views.generic.simple',\n    (r'^accounts/profile/$', 'redirect_to', {'url': 'generic_account_url'}),\n)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["See django docs for views.login(), you supply a 'next' value (as a hidden field) on the input form to redirect to after a successful login."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "views.login()", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.views.login"}]}], [{"text": ["I linked to the login form by passing the current page as a GET parameter and then used 'next' to redirect to that page.", "Thanks!"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["In registration/login.html (nested within templates folder) if you insert the following line, the page will render like Django's original admin login page:"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "registration/login.html", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "templates", "childNum": 0, "tag": "code", "childList": []}]}, {"code": "<pre>\n<code>\n {% include \"admin/login.html\" %}\n</code>\n</pre>\n", "senID": 1}, {"text": ["Note: The file should contain above lines only."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "Note: The file should contain above lines only.", "childNum": 0, "tag": "b", "pos": 0, "childList": []}]}]]