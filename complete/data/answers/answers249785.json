[[{"text": ["Alternatively, if you're on OS X 10.5, you could use Scripting Bridge to delete files via the Finder.", "I've done this in Ruby code here via RubyCocoa.", "The the gist of it is:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "here", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://osx-trash.rubyforge.org/git?p=osx-trash.git;a=blob;f=bin/trash;h=26911131eacafd659b4d760bda1bd4c99dc2f918;hb=HEAD"}]}, {"code": "<pre>\n<code>\n url = NSURL.fileURLWithPath(path)\nfinder = SBApplication.applicationWithBundleIdentifier(\"com.apple.Finder\")\nitem = finder.items.objectAtLocation(url)\nitem.delete\n</code>\n</pre>\n", "senID": 1}, {"text": ["You could easily do something similar with PyObjC."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Based upon code from http://www.cocoadev.com/index.pl?MoveToTrash I have came up with the following:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://www.cocoadev.com/index.pl?MoveToTrash", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.cocoadev.com/index.pl?MoveToTrash"}]}, {"code": "<pre>\n<code>\n def get_trash_path(input_file):\n    path, file = os.path.split(input_file)\n    if path.startswith(\"/Volumes/\"):\n        # /Volumes/driveName/.Trashes/&lt;uid&gt;\n        s = path.split(os.path.sep)\n        # s[2] is drive name ([0] is empty, [1] is Volumes)\n        trash_path = os.path.join(\"/Volumes\", s[2], \".Trashes\", str(os.getuid()))\n        if not os.path.isdir(trash_path):\n            raise IOError(\"Volume appears to be a network drive (%s could not be found)\" % (trash_path))\n    else:\n        trash_path = os.path.join(os.getenv(\"HOME\"), \".Trash\")\n    return trash_path\n</code>\n</pre>\n", "senID": 1}, {"text": ["Fairly basic, and there's a few things that have to be done seperatly, particularly checking if the filename already exist in trash (to avoid overwriting) and the actual moving to trash, but it seems to cover most things (internal, external and network drives)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Update: I wanted to trash a file in a Python script, so I re-implemented Dave Dribin's solution in Python:"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "Update:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n from AppKit import NSURL\nfrom ScriptingBridge import SBApplication\n\ndef trashPath(path):\n    \"\"\"Trashes a path using the Finder, via OS X's Scripting Bridge.\n    \"\"\"\n    targetfile = NSURL.fileURLWithPath_(path)\n    finder = SBApplication.applicationWithBundleIdentifier_(\"com.apple.Finder\")\n    items = finder.items().objectAtLocation_(targetfile)\n    items.delete()\n</code>\n</pre>\n", "senID": 4}, {"text": ["Usage is simple:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n trashPath(\"/tmp/examplefile\")\n</code>\n</pre>\n", "senID": 6}], [{"text": ["The File Manager API has a pair of functions called FSMoveObjectToTrashAsync and FSPathMoveObjectToTrashSync."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Not sure if that is exposed to Python or not."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["A better way is NSWorkspaceRecycleOperation, which is one of the operations you can use with -[NSWorkspace performFileOperation:source:destination:files:tag:].", "The constant's name is another artifact of Cocoa's NeXT heritage; its function is to move the item to the Trash."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "NSWorkspaceRecycleOperation", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace%5FClass/Reference/Reference.html#//apple%5Fref/doc/c%5Fref/NSWorkspaceRecycleOperation"}, {"text": "-[NSWorkspace performFileOperation:source:destination:files:tag:]", "tag": "a", "pos": -1, "childList": [], "childNum": 0, "href": "http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWorkspace%5FClass/Reference/Reference.html#//apple%5Fref/occ/instm/NSWorkspace/performFileOperation:source:destination:files:tag:"}]}, {"text": ["Since it's part of Cocoa, it should be available to both Python and Ruby."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Another one in ruby:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n Appscript.app('Finder').items[MacTypes::Alias.path(path)].delete\n</code>\n</pre>\n", "senID": 1}, {"text": ["You will need rb-appscript gem, you can read about it here"], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "rb-appscript", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://rubygems.org/gems/rb-appscript"}, {"href": "http://appscript.sourceforge.net/rb-appscript/index.html", "text": "here", "childNum": 0, "tag": "a", "childList": []}]}], [{"text": ["In Python, without using the scripting bridge, you can do this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n from AppKit import NSWorkspace, NSWorkspaceRecycleOperation\n\nsource = \"path holding files\"\nfiles = [\"file1\", \"file2\"]\n\nws = NSWorkspace.sharedWorkspace()\nws.performFileOperation_source_destination_files_tag_(NSWorkspaceRecycleOperation, source, \"\", files, None)\n</code>\n</pre>\n", "senID": 1}]]