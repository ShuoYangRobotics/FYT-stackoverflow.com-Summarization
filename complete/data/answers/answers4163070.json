[[{"text": ["Definitely, the PHP is going into an infinite loop.", "There's no way it could be taking that long if there wasn't something wrong..."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I don't think counting the digits of these numbers with strlen is going to work in PHP.", "PHP is dealing with the numbers in scientific notation, in lower precision than Python."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "strlen", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["I added debugging echo statements to PHP, to print out $fibonacci and $i for each step."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "echo", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["A typical Python line looks like "], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n fib is 7540113804746346429\ni is 92\n</code>\n</pre>\n", "senID": 4}, {"text": ["In PHP, that's"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n fib is 7.54011380475E+18\ni is 92\n</code>\n</pre>\n", "senID": 6}, {"text": ["To accomplish this in PHP, you'll probably need to use a higher precision math library."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["Check out http://www.php.net/manual/en/book.bc.php - you can use the bcadd function to accomplish the addition, and it will work as it does in Python."], "childNum": 2, "tag": "p", "senID": 8, "childList": [{"text": "http://www.php.net/manual/en/book.bc.php", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.php.net/manual/en/book.bc.php"}, {"text": "bcadd", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["It isn't a speed issue, it's a logic problem in the while condition for termination."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["It's probably not going to finish.", "When you convert the current value of $fibonacci to a string in your while test, it will be converted to scientific format and truncated to a limited set of decimal places (dependent on your precision setting) when you cast it to string.", "That number of digits will be a lot less than 1000, so the while termination condition won't ever be met."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Since the problem seems to be with converting to strings, here's a much faster way to do it that doesn't require it.", "This is essentially the same algorithm as you have posted (so I don't feel bad showing it to you) but demonstrates how to use division to test the length of an integer instead of converting it to a string."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def fibonacci_digits(limit):\n    limit = 10**limit\n    fib = 1\n    old1 = 0\n    old2 = 1\n\n    i = 1\n    size = 1\n    while size &lt; limit:\n        fib = old1 + old2\n        if not size//fib:  # // is pythons integer division operator, not a comment\n            size *= 10\n        old1 = old2\n        old2 = fib\n        i += 1\n\n    return i\n\nprint fibonacci_digits(1000)\n</code>\n</pre>\n", "senID": 1}, {"text": ["Converting to a string is slow and is almost never the right thing to do.", "Here's the timeit results:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n $ python -mtimeit -s'import fib' 'fib.fibonacci_digits(1000)'\n10 loops, best of 3: 30.2 msec per loop\n\n$ python -mtimeit -s'import fib' 'fib.fibonacci_digits2(1000)'\n10 loops, best of 3: 1.41 sec per loop\n</code>\n</pre>\n", "senID": 3}], [{"text": ["The problem is, that you are working with big numbers.", "You should use BC Math Functions (php.net/bc).", "So your code can be:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "php.net/bc", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://php.net/bc"}]}, {"code": "<pre>\n<code>\n $fibonacci = \"1\";\n$old1 = \"0\";\n$old2 = \"1\";\n$limit = 1000;\n\n$i = 1;\n\nwhile (strlen($fibonacci) &lt; $limit){\n    $fibonacci = bcadd($old1, $old2);\n    $old1 = $old2;\n    $old2 = $fibonacci;\n    $i = $i + 1;\n}\nprint($i);\n</code>\n</pre>\n", "senID": 1}, {"text": ["I have tried it and it takes about 0.095s."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Many of project Euler problems will have to handle big numbers.", "PHP will make your big numbers look like 2.579234678963E+12 which is the Exponential representation of the number...", "It's obviously hard to work with.", "So, for most of problems, it's best to go with BCMath Functions.", "This will keep your number as it is, even if it is a giant number."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "2.579234678963E+12", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "BCMath Functions", "tag": "a", "pos": 3, "childList": [], "childNum": 0, "href": "http://php.net/bc"}]}, {"text": ["Note that using echo bcmul(500,500); will never be as fast as echo 500*500.", "And, BCMath function return values are always strings."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "echo bcmul(500,500);", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "echo 500*500", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"text": ["To fix your problem replace all arithmetic operations with the corresponding BCMath function. "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["I optimized a bit the Python code.", "Using len(str()) to check the number of digits is very slow.", "Replaced by math.log10 run your program much faster"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The first term in the Fibonacci sequence to contain 1000 digits is : 4782\nCalculated in 0.008573 seconds"], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "The first term in the Fibonacci sequence to contain 1000 digits is : 4782\nCalculated in 0.008573 seconds", "childNum": 1, "tag": "em", "pos": 0, "childList": [{"text": "The first term in the Fibonacci sequence to contain 1000 digits is : 4782\nCalculated in 0.008573 seconds", "tag": "strong"}]}, {"text": "The first term in the Fibonacci sequence to contain 1000 digits is : 4782\nCalculated in 0.008573 seconds", "childNum": 0, "tag": "strong", "childList": []}]}, {"code": "<pre>\n<code>\n import time\nfrom math import log10\n\n\ndef digits(n): # Return the number of digits for n&gt;=1\n    return int(log10(n))+1\n\nfibonacci = 1L # Thanks to Python to handle very big numbers\nold1 = 0\nold2 = 1\nlimit = 1000\n\ni = 1\n\n\nstart = time.time() #Start timer for bench\nwhile digits(fibonacci) &lt; limit:\n    fibonacci = old1 + old2\n    old1 = old2\n    old2 = fibonacci\n    i +=  1\n\n\n\nprint \"The first term in the Fibonacci sequence to contain %s digits is : %s\" % (str(limit), str(i))\n\nprint \"Calculated in %3.6f seconds\" %  (time.time() - start)\n</code>\n</pre>\n", "senID": 2}]]