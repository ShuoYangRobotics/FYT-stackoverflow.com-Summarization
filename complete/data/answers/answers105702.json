[[{"text": ["Start with this Django snippet, but modify it to check request.session['has_beta_access'].", "If they don't have it, then have it return a redirect to a \"enter beta code\" page that, when posted to with the right code, sets that session variable to True."], "childNum": 3, "tag": "p", "senID": 0, "childList": [{"text": "this Django snippet", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.djangosnippets.org/snippets/136/"}, {"text": "request.session['has_beta_access']", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "True", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Making it a public beta then just consists of removing that middleware from your MIDDLEWARE_CLASSES setting."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "MIDDLEWARE_CLASSES", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}], [{"text": ["You can probably restrict access to the entire site via apache with htaccess, taking the problem out of the django's project space entirely."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["You should be able to add @login_required decorators across the board and be done with it.", "Unless you have a boat-load of view functions, it shouldn't be too horrible."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "@login_required", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}], [{"text": ["Do what StackOverflow did."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["They had a simple email/password form.", "It had a single hard-coded password (falkensmaze).", "When the user gets the password right set a cookie.", "eg.", "auth=1"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Don't worry about it being unsecure.", "Who care's if someone hacks into the beta?"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Apache/htaccess is also a nice and simple solution."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["I'm not sure what version of the Pinax code you're using, but they've built in the ability to close the site off for a private beta so you don't need to do much work yourself."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The link to the specific project template for a private beta site is here: http://github.com/pinax/pinax/tree/3ad73d1ba44f37365333bae17b507668b0eb7e16/pinax/projects/private_beta_project although I think they might have since added that functionality to all the project templates."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://github.com/pinax/pinax/tree/3ad73d1ba44f37365333bae17b507668b0eb7e16/pinax/projects/private_beta_project", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://github.com/pinax/pinax/tree/3ad73d1ba44f37365333bae17b507668b0eb7e16/pinax/projects/private_beta_project"}]}], [{"text": ["Great snippet but it resulted lots of problems for me related OpenId sessions.", "So I end up relying on Cookies instead of the Session:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n class BetaMiddleware(object):\n    \"\"\"\n    Require beta code cookie key in order to view any page.\n    \"\"\"\n    set_beta = False\n    def process_request(self, request):\n        referer = request.META.get('HTTP_REFERER', '')\n\n        if request.method == 'GET' and not 'is_in_beta' in request.COOKIES:\n            return HttpResponseRedirect('%s?next=%s' % ('/beta/', request.path))\n\n        if request.method == 'POST' and 'pass' in request.POST:\n            code = request.POST['pass']\n\n            if code=='beta':\n                self.set_beta = True\n                return HttpResponseRedirect('%s' % '/')\n\n    def process_response(self, request, response):        \n\n        if self.set_beta is True:\n            response.set_cookie('is_in_beta', '1')\n        return response\n</code>\n</pre>\n", "senID": 1}, {"text": ["It's not secure but that's enough for me.", "This also works with just a beta html page."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}]]