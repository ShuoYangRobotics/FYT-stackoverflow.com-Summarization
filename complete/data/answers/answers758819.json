[[{"text": ["Make sure that the mysql server is listening for tcp connections, which you can do with netstat -nlp (in *nix).", "This is the type of connection you are attempting to make, and db's normally don't listen on the network by default for security reasons.", "Also, try specifying --host=localhost when using the mysql command, this also try to connect via unix sockets unless you specify otherwise.", "If mysql is not configured to listen for tcp connections, the command will also fail. "], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "not", "childNum": 0, "tag": "strong", "pos": 3, "childList": []}]}, {"text": ["Here's a relevant section from the mysql 5.1 manual on unix sockets and troubleshooting connections.", "Note that the error described (2002) is the same one that you are getting."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "mysql 5.1 manual", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://dev.mysql.com/doc/refman/5.1/en/can-not-connect-to-server.html"}]}, {"text": ["Alternatively, check to see if the module you are using has an option to connect via unix sockets (as David Suggests)."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["add unix_socket='path_to_socket' where path_to_socket should be the path of the mysql socket, e.g.", "/var/run/mysqld/mysqld2.sock"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Maybe try adding the keyword parameter unix_socket = None to connect()?"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "unix_socket = None", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "connect()", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["As far as I can tell, the python connector can ONLY connect to mysql through a internet socket: unix sockets (the default for the command line client) is not supported."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["In the CLI client, when you say \"-h localhost\", it actually interprets localhost as \"Oh, localhost?", "I'll just connect to the unix socket instead\", rather than the internet localhost socket."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Ie, the mysql CLI client is doing something magical, and the Python connector is doing something \"consistent, but restrictive\"."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Choose your poison.", "(Pun not intended ;) )"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["i had this issue where the unix socket file was some place else, python was trying to connect to a non-existing socket.", "once this was corrected using the unix_socket option, it worked."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Mysql uses sockets when the host is 'localhost' and tcp/ip when the host is anything else.", "By default Mysql will listen to both - you can disable either sockets or networking in you my.cnf file (see mysql.com for details)."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["In your case forget about the port=3000 the mysql client lib is not paying any attention to it since you are using localhost and specify the socket as in unix_socket='path_to_socket'."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If you decided to move this script to another machine you will need to change this connect string to use the actual host name or ip address and then you can loose the unix_socket and bring back the port.", "The default port for mysql is 3306 - you don't need to specify that port but you will need to specify 3000 if that is the port you are using."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Not sure why yet but changing localhost to 127.0.0.1 solved my problem using MySQLdb:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["db = MySQLdb.connect(\n    host = '127.0.0.1', \n    user = 'root', \n    passwd = '', \n    db = 'testdb', \n    port = 3000)"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}]]