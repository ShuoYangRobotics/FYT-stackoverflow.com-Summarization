[[{"text": ["I've just done this for a project I'm working on, for us the process is like this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["First, I have a POTFILES.in file which contains a list of source files needing translation.", "We actually have two files (e.g.", "admin.in and user.in), as the admin interface doesn't always need translating.", "So we can send translators only the file containing strings the users see."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Running the following command will create a .pot template from the POTFILES.in:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n xgettext --files-from=POTFILES.in --directory=.. --output=messages.pot\n</code>\n</pre>\n", "senID": 3}, {"text": ["Run the above command from the po/ directory, which should be a subdirectory of your project and contain the POTFILES.in file.", "The .pot file has the exact same format as a .po file, but it is a template containing no translations.", "You create a new template whenever new translatable strings have been added to your source files."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["To update the already translated .po files and add new strings to them, run:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n msgmerge --update --no-fuzzy-matching --backup=off da.po messages.pot\n</code>\n</pre>\n", "senID": 6}, {"text": ["In the above example I disable fuzzy matching, as our strings are a mess and it did more harm than good.", "I also disabled backup files, as everything is in subversion here.", "Run the above command for each language, in this case I updated the danish translation."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["Finally run msgfmt to create the .mo files from the .po files:"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"code": "<pre>\n<code>\n msgfmt nl.po --output-file nl.mo\n</code>\n</pre>\n", "senID": 9}, {"text": ["Ofcourse, you wouldn't want to run this manually everytime, so create some scripts (or preferably one or more Makefiles) to do this for you."], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"text": ["Note that your directory layout is slightly different from my situation, so you will have to adjust output filenames/paths a bit, but the steps should be the same."], "childNum": 0, "tag": "p", "senID": 11, "childList": []}], [{"text": ["It eludes me how you want to achieve a real translation without editing the .po files for each language?", "Magic?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Edit (after comment) - how to automate the generation of the .po files:"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": ".po", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["I don't use Gettext, but from the wiki page it looks like you only have to call"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "wiki page", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Gettext"}]}, {"text": ["for every language you want to support.", "I would generate a script that generates all the language files, give them to the translators, and when you get them back run msgfmt on them."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "msgfmt", "childNum": 0, "tag": "strong", "pos": 1, "childList": []}]}], [{"text": ["You can try Translate Toolkit for various po file conversions(po2csv for example).", "Child projects Pootle allows to manage translations over the web."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Translate Toolkit", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://translate.sourceforge.net/wiki/"}, {"text": "Pootle", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://translate.sourceforge.net/wiki/pootle/index"}]}], [{"text": ["I'm using poEdit for translations."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "poEdit", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.poedit.net/"}]}], [{"text": ["Use scripts.", "Assume your source code is in the directory $SRC, so create directory $SRC/po for i18n files (pot, po, mo etc).", "Then create file $SRC/po/POTFILES.in where specify path to source code files with gettext function calls.", "It may look like:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n [encoding: UTF-8]\n./main.cpp\n./plugins/list.cpp\n</code>\n</pre>\n", "senID": 1}, {"text": ["Now you can use the following commands (inside directory $SRC):"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["For updating master-file messages.pot:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n intltool-update --pot --gettext-package=messages --verbose\n</code>\n</pre>\n", "senID": 4}, {"text": ["For merging changes from messages.pot to fr.po file, for example:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n msgmerge -U fr.po messages.pot\n</code>\n</pre>\n", "senID": 6}, {"text": ["To generate mo file use command:"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n msgmerge -o - fr.po messages.pot | msgfmt -c -o fr/LC_MESSAGES/programname.mo -\n</code>\n</pre>\n", "senID": 8}, {"text": ["Of course directory fr/LC_MESSAGES/ must be created before that call, you can also delete existing fr/LC_MESSAGES/programname.mo before execution"], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"text": ["In order to speed up process place all such commands into the corresponding .sh-files for example."], "childNum": 0, "tag": "p", "senID": 10, "childList": []}], [{"text": ["My suggestion is django-rosetta, which gives you a web based interface to editing your translations.", "Django doesn't need to be involved at all with your app, you're just using it for an online .PO edit facility."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "django-rosetta", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.google.com/p/django-rosetta/"}]}, {"text": ["Another interesting new translation site, which I believe was built using Django/Pinax is Transifex, although I'm not sure if it allows direct editing of the .PO files."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "Transifex", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.transifex.net/"}]}]]