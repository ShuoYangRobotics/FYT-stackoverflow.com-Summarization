[[{"text": ["How about"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n for r in [regex.match(s) for s in str]:\n    if r:\n        print r.groups()\n</code>\n</pre>\n", "senID": 1}, {"text": ["or a bit more functional"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n for r in filter(None, map(regex.match, str)):\n    print r.groups()\n</code>\n</pre>\n", "senID": 3}], [{"text": ["Perhaps it's a bit hacky, but using a function object's attributes to store the last result allows you to do something along these lines:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def fn(regex, s):\n    fn.match = regex.match(s) # save result\n    return fn.match\n\nfor s in strings:\n    if fn(regex, s):\n        print fn.match.groups()\n</code>\n</pre>\n", "senID": 1}, {"text": ["Or more generically:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n def cache(value):\n    cache.value = value\n    return value\n\nfor s in strings:\n    if cache(regex.match(s)):\n        print cache.value.groups()\n</code>\n</pre>\n", "senID": 3}, {"text": ["Note that although the \"value\" saved can be a collection of a number of things, this approach is limited to holding only one such at a time, so more than one function may be required to handle situations where multiple values need to be saved simultaneously, such as in nested function calls, loops or other threads.", "So, in accordance with the DRY principle, rather than writing each one, a factory function can help:"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "DRY", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://encyclopedia.thefreedictionary.com/Don%27t+Repeat+Yourself"}]}, {"code": "<pre>\n<code>\n def Cache():\n    def cache(value):\n        cache.value = value\n        return value\n    return cache\n\ncache1 = Cache()\nfor s in strings:\n    if cache1(regex.match(s)):\n        # use another at same time\n        cache2 = Cache()\n        if cache2(somethingelse) != cache1.value:\n            process(cache2.value)\n        print cache1.value.groups()\n          ...\n</code>\n</pre>\n", "senID": 5}], [{"text": ["There's a recipe to make an assignment expression but it's very hacky.", "Your first option doesn't compile so your second option is the way to go."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "recipe", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.activestate.com/recipes/202234-assignment-in-expression/"}]}, {"code": "<pre>\n<code>\n ## {{{ http://code.activestate.com/recipes/202234/ (r2)\nimport sys\ndef set(**kw):\n    assert len(kw)==1\n\n    a = sys._getframe(1)\n    a.f_locals.update(kw)\n    return kw.values()[0]\n\n#\n# sample\n#\n\nA=range(10)\n\nwhile set(x=A.pop()):\n    print x\n## end of http://code.activestate.com/recipes/202234/ }}}\n</code>\n</pre>\n", "senID": 1}, {"text": ["As you can see, production code shouldn't touch this hack with a ten foot, double bagged stick."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["This might be an overly simplistic answer, but would you consider this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n for s in str:\n    if regex.match(s):\n        print regex.match(s).groups()\n</code>\n</pre>\n", "senID": 1}], [{"text": ["There is no pythonic way to do something that is not pythonic.", "It's that way for a reason, because 1, allowing statements in the conditional part of an if statement would make the grammar pretty ugly, for instance, if you allowed assignment statements in if conditions, why not also allow if statements?", "how would you actually write that?", "C like languages don't have this problem, because they don't have assignment statements.", "They make do with just assignment expressions and expression statements."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["the second reason is because of the way "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n if foo = bar:\n    pass\n</code>\n</pre>\n", "senID": 2}, {"text": ["looks very similar to "], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n if foo == bar:\n    pass\n</code>\n</pre>\n", "senID": 4}, {"text": ["even if you are clever enough to type the correct one, and even if most of the members on your team are sharp enough to notice it, are you sure that the one you are looking at now is exactly what is supposed to be there?", "it's not unreasonable for a new dev to see this and just fix it (one way or the other) and now its definitely wrong."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["Whenever I find that my loop logic is getting complex I do what I would with any other bit of logic: I extract it to a function.", "In Python it is a lot easier than some other languages to do this cleanly."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["So extract the code that just generates the items of interest:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n def matching(strings, regex):\n    for s in strings:\n        r = regex.match(s)\n        if r: yield r\n</code>\n</pre>\n", "senID": 2}, {"text": ["and then when you want to use it, the loop itself is as simple as they get:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n for r in matching(strings, regex):\n    print r.groups()\n</code>\n</pre>\n", "senID": 4}], [{"text": ["Yet another answer is to use the \"Assign and test\" recipe for allowing assigning and testing in a single statement published in O'Reilly Media's July 2002 1st edition of the Python Cookbook and also online at Activestate.", "It's object-oriented, the crux of which is this:"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Python Cookbook", "childNum": 0, "tag": "em", "pos": 0, "childList": []}, {"text": "online", "tag": "a", "pos": -1, "childList": [], "childNum": 0, "href": "http://code.activestate.com/recipes/66061-assign-and-test"}]}, {"code": "<pre>\n<code>\n # from http://code.activestate.com/recipes/66061\nclass DataHolder:\n    def __init__(self, value=None):\n        self.value = value\n    def set(self, value):\n        self.value = value\n        return value\n    def get(self):\n        return self.value\n</code>\n</pre>\n", "senID": 1}, {"text": ["This can optionally be modified slightly by adding the custom __call__() method shown below to provide an alternative way to retrieve instances' values -- which, while less explicit, seems like a completely logical thing for a 'DataHolder' object to do when called, I think."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "__call__()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n def __call__(self):\n        return self.value\n</code>\n</pre>\n", "senID": 3}, {"text": ["Allowing your example to be re-written:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n r = DataHolder()\nfor s in strings:\n    if r.set(regex.match(s))\n        print r.get().groups()\n# or\n        print r().groups()\n</code>\n</pre>\n", "senID": 5}, {"text": ["As also noted in the original recipe, if you use it a lot, adding the class and/or an instance of it to the __builtin__ module to make it globally available is very tempting despite the potential downsides:"], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "__builtin__", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n import __builtin__\n__builtin__.DataHolder = DataHolder\n__builtin__.data = DataHolder()\n</code>\n</pre>\n", "senID": 7}, {"text": ["As I mentioned in my other answer to this question, it must be noted that this approach is limited to holding only one result/value at a time, so more than one instance is required to handle situations where multiple values need to be saved simultaneously, such as in nested function calls, loops or other threads.", "That doesn't mean you should use it or the other answer, just that more effort will be required."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}]]