[[{"text": ["First, create a way to have your development and production servers pull settings from different files, say dev.py and prod.py.", "There are lots of ways to do this."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Then, create a setting, GOOGLE_ANALYTICS_KEY.", "In dev.py set it to the empty string.", "In prod.py, set it to your key, something like \"UA-124465-1\".", "Create a context processor to add this setting to all your template contexts, either as GOOGLE_ANALYTICS_KEY, or just go ahead and add your settings module.", "Then, in your template, use it to conditionally include your analytics code:"], "childNum": 3, "tag": "p", "senID": 1, "childList": [{"text": "GOOGLE_ANALYTICS_KEY", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "context processor", "tag": "a", "pos": 3, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/ref/templates/api/#writing-your-own-context-processors"}, {"text": "GOOGLE_ANALYTICS_KEY", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"code": "<pre>\n<code>\n {% if settings.GOOGLE_ANALYTICS_KEY %}\n&lt;script&gt; blah blah {{settings.GOOGLE_ANALYTICS_KEY}} blah blah &lt;/script&gt;\n{% endif %}\n</code>\n</pre>\n", "senID": 2}], [{"text": ["A little late to the party, but there's a reusable Django app called django-google-analytics.", "The easiest way to use it is:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "django-google-analytics", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://github.com/montylounge/django-google-analytics"}]}], [{"text": ["My solution takes a similar approach to Ned's preferred answer, but separates the analytics code into its own template.", "I prefer this, so I can just copy the template from project to project."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Here's a snippet from my context_processor file:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n from django.conf import settings\nfrom django.template.loader import render_to_string\n\ndef analytics(request):\n    \"\"\"\n    Returns analytics code.\n    \"\"\"\n    if not settings.DEBUG:\n        return { 'analytics_code': render_to_string(\"analytics/analytics.html\", { 'google_analytics_key: settings.GOOGLE_ANALYTICS_KEY }) }\n    else:\n        return { 'analytics_code': \"\" }\n</code>\n</pre>\n", "senID": 2}, {"text": ["Of course you'll need to tell Django to include this in your context.", "In in your settings.py file, include:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n TEMPLATE_CONTEXT_PROCESSORS = (\n    ...\n    \"context_processors.analytics\",\n)\n</code>\n</pre>\n", "senID": 4}, {"text": ["I have it set up to include the analytics code only when DEBUG is set to False, but you may prefer to key it off something else, perhaps a new setting altogether.", "I think DEBUG is a good default since it supposes you don't want to track any hits while debugging/developing."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["Create a setting with your Google Analytics Key:"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n GOOGLE_ANALYTICS_KEY = \"UA-1234567-8\"\n</code>\n</pre>\n", "senID": 7}, {"text": ["Create a template called: \"analytics/analytics.html\" that includes something like this:"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"code": "<pre>\n<code>\n &lt;script type=\"text/javascript\"&gt;\nvar gaJsHost = ((\"https:\" == document.location.protocol) ? \"https://ssl.\" : \"http://www.\");\ndocument.write(unescape(\"%3Cscript src='\" + gaJsHost + \"google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E\"));\n&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\ntry {\nvar pageTracker = _gat._getTracker(\"{{ google_analytics_key }}\");\npageTracker._trackPageview();\n} catch(err) {}&lt;/script&gt;\n</code>\n</pre>\n", "senID": 9}, {"text": ["Finally, just before the closing  tag in your base.html template, add this:"], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"code": "<pre>\n<code>\n {{ analytics_code }}\n</code>\n</pre>\n", "senID": 11}, {"text": ["Now your analytics code will be included only when DEBUG=False.", "Otherwise, nothing will be included."], "childNum": 0, "tag": "p", "senID": 12, "childList": []}], [{"text": ["I mostly agree with Ned, although I have a single setting called IS_LIVE_SITE which toggles analytics code, adverts and a few other things.", "This way I can keep all the keys in subversion (as it is a pain to look them up) and still toggle them on or off easily."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Instead of including the script tag directly in your html, just change the analytics javascript so it only runs if the href does not contain your prod site's name.", "This will work without any extra configuration."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["You have template context processors that can be used to pass values to all templates without updating all your views."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["http://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.djangoproject.com/en/dev/ref/settings/#template-context-processors"}]}]]