[[{"text": ["There is nothing \"dirty\" about using try-except clause.", "This is the pythonic way.", "ValueError will be raised by the .index method only, because it's the only code you have there!"], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "ValueError", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": ".index", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["To answer the comment:\nIn Python, easier to ask forgiveness than to get permission philosophy is well established, and no index will not raise this type of error for any other issues.", "Not that I can think of any. "], "childNum": 5, "tag": "p", "senID": 1, "childList": [{"text": "", "childNum": 0, "tag": "br", "pos": 0, "childList": []}, {"text": "easier to ask forgiveness than to get permission", "tag": "a", "pos": -1, "childList": [{"text": "easier to ask forgiveness than to get permission", "tag": "em"}], "childNum": 1, "href": "http://docs.python.org/3.1/glossary.html#term-eafp"}, {"text": "easier to ask forgiveness than to get permission", "childNum": 0, "tag": "em", "pos": -1, "childList": []}, {"text": "no", "childNum": 0, "tag": "strong", "pos": -1, "childList": []}, {"text": "index", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}], [{"text": ["The dicttype has a getfunction, where if the key doesn't exist in the dictionary, the 2nd argument to get is the value that it should return.", "Similarly there is setdefault, which returns the value in the dict if the key exists, otherwise it sets the value according to your default parameter and then returns your default parameter."], "childNum": 8, "tag": "p", "senID": 0, "childList": [{"text": "dicttype", "tag": "a", "pos": 0, "childList": [{"text": "dict", "tag": "code"}], "childNum": 1, "href": "http://docs.python.org/library/stdtypes.html#dict"}, {"text": "dict", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"href": "http://docs.python.org/library/stdtypes.html#dict.get", "text": "getfunction", "childNum": 1, "tag": "a", "childList": [{"text": "get", "tag": "code"}]}, {"text": "get", "childNum": 0, "tag": "code", "childList": []}, {"text": "get", "childNum": 0, "tag": "code", "childList": []}, {"href": "http://docs.python.org/library/stdtypes.html#dict.setdefault", "text": "setdefault", "childNum": 1, "tag": "a", "childList": [{"text": "setdefault", "tag": "code"}]}, {"text": "setdefault", "childNum": 0, "tag": "code", "childList": []}, {"text": "dict", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["You could extend the list type to have a getindexdefault method."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "list", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "getindexdefault", "childNum": 0, "tag": "code", "childList": []}]}, {"code": "<pre>\n<code>\n object SuperDuperList(list):\n    def getindexdefault(self, elem, default):\n        try:\n            thing_index = self.index(elem)\n        catch ValueError:\n            return default\n</code>\n</pre>\n", "senID": 2}, {"text": ["Which could then be used like:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n mylist = SuperDuperList([0,1,2])\nindex = mylist.getindexdefault( 'asdf', -1 )\n</code>\n</pre>\n", "senID": 4}], [{"text": ["There is nothing wrong with your code that uses ValueError.", "Here's yet another one-liner if you'd like to avoid exceptions:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "ValueError", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n thing_index = next((i for i, x in enumerate(thing_list) if x == thing), -1)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["This issue is one of language philosophy.", "In Java for example there has always been a tradition that exceptions should really only be used in \"exceptional circumstances\" that is when errors have happened, rather than for flow control.", "In the beginning this was for performance reasons as Java exceptions were slow but now this has become the accepted style."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "flow control", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://c2.com/cgi/wiki?DontUseExceptionsForFlowControl"}]}, {"text": ["In contrast Python has always used exceptions to indicate normal program flow, like raising a ValueError as we are discussing here.", "There is nothing \"dirty\" about this in Python style and there are many more where that came from.", "An even more common example is StopIterationexception which is raised by an iterator\u2018s next() method to signal that there are no further values."], "childNum": 4, "tag": "p", "senID": 1, "childList": [{"text": "ValueError", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "StopIterationexception", "tag": "a", "pos": 2, "childList": [{"text": "StopIteration", "tag": "code"}], "childNum": 1, "href": "http://docs.python.org/library/exceptions.html#exceptions.StopIteration"}, {"text": "StopIteration", "childNum": 0, "tag": "code", "childList": []}, {"text": "next()", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["What about this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n otherfunction(thing_collection, thing)\n</code>\n</pre>\n", "senID": 1}, {"text": ["Rather than expose something so implementation-dependent like a list index in a function interface, pass the collection and the thing and let otherfunction deal with the \"test for membership\" issues.", "If otherfunction is written to be collection-type-agnostic, then it would probably start with:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n if thing in thing_collection:\n    ... proceed with operation on thing\n</code>\n</pre>\n", "senID": 3}, {"text": ["which will work if thing_collection is a list, tuple, set, or dict."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["This is possibly clearer than:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n if thing_index != MAGIC_VALUE_INDICATING_NOT_A_MEMBER:\n</code>\n</pre>\n", "senID": 6}, {"text": ["which is the code you already have in otherfunction."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["I don't know why you should think it is dirty... because of the exception?", "if you want a oneliner, here it is:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n thing_index = thing_list.index(elem) if thing_list.count(elem) else -1\n</code>\n</pre>\n", "senID": 1}, {"text": ["but i would advise against using it; I think Ross Rogers solution is the best, use an object to encapsulate your desiderd behaviour, don't try pushing the language to its limits at the cost of readability."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"code": "<pre>\n<code>\n thing_index = thing_list.index(elem) if elem in thing_list else -1\n</code>\n</pre>\n", "senID": 0}, {"text": ["One line.", "Simple.", "No exceptions."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}]]