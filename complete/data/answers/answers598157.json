[[{"text": ["You might find this post helpful: Try / Except Performance in Python: A Simple Test where Patrick Altman did some simple testing to see what the performance is in various scenarios pre-conditional checking (specific to dictionary keys in this case) and using only exceptions.", "Code is provided as well if you want to adapt it to test other conditionals."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Try / Except Performance in Python: A Simple Test", "tag": "a", "pos": 0, "childList": [{"text": "Try / Except Performance in Python: A Simple Test", "tag": "strong"}], "childNum": 1, "href": "http://paltman.com/2008/jan/18/try-except-performance-in-python-a-simple-test/"}, {"text": "Try / Except Performance in Python: A Simple Test", "childNum": 0, "tag": "strong", "pos": -1, "childList": []}]}, {"text": ["The conclusions he came to: "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Don't sweat the small stuff.", "You've already picked one of the slower scripting languages out there, so trying to optimize down to the opcode is not going to help you much.", "The reason to choose an interpreted, dynamic language like Python is to optimize your time, not the CPU's."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["If you use common language idioms, then you'll see all the benefits of fast prototyping and clean design and your code will naturally run faster as new versions of Python are released and the computer hardware is upgraded."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If you have performance problems, then profile your code and optimize your slow algorithms.", "But in the mean time, use exceptions for exceptional situations since it will make any refactoring you ultimately do along these lines a lot easier."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["\"Can someone explain this to me?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Depends. "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Here's one explanation, but it's not helpful.", "Your question stems from your assumptions.", "Since the real world conflicts with your assumptions, it must mean  your assumptions are wrong.", "Not much of an explanation, but that's why you're asking."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["\"Exception handling means a dynamic call and a static return, whereas an if statement is static call, static return."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["What does \"dynamic call\" mean?", "Searching stack frames for a handler?", "I'm assuming that's what you're talking about.", "And a \"static call\" is somehow locating the block after the if statement."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["Perhaps this \"dynamic call\" is not the most costly part of the operation.", "Perhaps the if-statement expression evaluation is slightly more expensive than the simpler \"try-it-and-fail\"."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["Turns out that Python's internal integrity checks are almost the same as your if-statement, and have to be done anyway.", "Since Python's always going to check, your if-statement is (mostly) redundant."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["You can read about low-level exception handling in http://docs.python.org/c-api/intro.html#exceptions.  "], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "http://docs.python.org/c-api/intro.html#exceptions", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/c-api/intro.html#exceptions"}]}, {"tag": "hr", "senID": 8}, {"text": ["Edit"], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "Edit", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["More to the point:  The if vs. except debate doesn't matter."], "childNum": 1, "tag": "p", "senID": 10, "childList": [{"text": "The if vs. except debate doesn't matter.", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["Since exceptions are cheap, do not label them as a performance problem."], "childNum": 0, "tag": "p", "senID": 11, "childList": []}, {"text": ["Use what makes your code clear and meaningful.", "Don't waste time on micro-optimizations like this. "], "childNum": 2, "tag": "p", "senID": 12, "childList": [{"text": "clear", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}, {"text": "meaningful", "childNum": 0, "tag": "strong", "pos": -1, "childList": []}]}], [{"text": ["Putting aside the performance measurements that others have said, the guiding principle is often structured as \"it is easier to ask forgiveness than ask permission\" vs. \"look before you leap."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Consider these two snippets:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n # Look before you leap\nif not os.path.exists(filename):\n    raise SomeError(\"Cannot open configuration file\")\nf = open(filename)\n</code>\n</pre>\n", "senID": 2}, {"text": ["vs."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n # Ask forgiveness ...\ntry:\n  f = open(filename)\nexcept IOError:\n  raise SomeError(\"Cannot open configuration file\")\n</code>\n</pre>\n", "senID": 4}, {"text": ["Equivalent?", "Not really.", "OSes are multi-taking systems.", "What happens if the file was deleted between the test for 'exists' and 'open' call?"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["What happens if the file exists but it's not readable?", "What if it's a directory name instead of a file.", "There can be many possible failure modes and checking all of them is a lot of work.", "Especially since the 'open' call already checks and reports all of those possible failures."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["The guideline should be to reduce the chance of inconsistent state, and the best way for that is to use exceptions instead of test/call."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["With Python, it is easy to check different possibilities for speed - get to know the timeit module :"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "timeit module", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/library/timeit.html#module-timeit"}]}, {"code": "<pre>\n<code>\n % timeit.py 'try:' '  str.__nonzero__' 'except AttributeError:' '  pass'\n100000 loops, best of 3: 15.7 usec per loop\n% timeit.py 'if hasattr(str, \"__nonzero__\"): pass'\n100000 loops, best of 3: 4.26 usec per loop\n% timeit.py 'try:' '  int.__nonzero__' 'except AttributeError:' '  pass'\n1000000 loops, best of 3: 1.43 usec per loop\n% timeit.py 'if hasattr(int, \"__nonzero__\"): pass'\n100000 loops, best of 3: 2.23 usec per loop\n</code>\n</pre>\n", "senID": 1}, {"text": ["EDIT: The command line option -n will default to a large enough count so that the run time is meaningful.", "A quote from the manual:"], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "-n", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "quote from the manual", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://docs.python.org/library/timeit.html#command-line-interface"}]}], [{"text": ["I am a python beginner as well.", "While I cannot say why exactly Exception handling has been called cheap in the context of that answer, here are my thoughts:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Note that checking with if-elif-else has to evaluate a condition every time.", "Exception handling, including the search for an exception handler occurs only in an exceptional condition, which is likely to be rare in most cases.", "That is a clear efficiency gain.", "As pointed out by Jay, it is better to use conditional logic rather than exceptions when there is a high likelihood of the key being absent.", "This is because if the key is absent most of the time, it is not an exceptional condition. "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["That said, I suggest that you don't worry about efficiency and rather about meaning.", "Use exception handling to detect exceptional cases and checking conditions when you want to decide upon something.", "I was reminded about the importance of meaning by S.Lott just yesterday."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "That said, I suggest that you don't worry about efficiency and rather about meaning. Use exception handling to detect exceptional cases and checking conditions when you want to decide upon something.", "childNum": 0, "tag": "strong", "pos": -1, "childList": []}]}, {"text": ["Case in point: "], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "Case in point:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n def xyz(key):\n   dictOb = {x:1, y:2, z:3}\n   #Condition evaluated every time\n   if dictOb.has_key(key):  #Access 1 to dict\n        print dictOb[key]  #Access 2\n</code>\n</pre>\n", "senID": 4}, {"text": ["Versus"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n #Exception mechanism is in play only when the key isn't found.\ndef xyz(key):\n   dictOb = {x:1, y:2, z:3}\n   try:\n        print dictOb[key]  #Access 1\n   except KeyError:\n        print \"Not Found\"\n</code>\n</pre>\n", "senID": 6}, {"text": ["Overall, having some code that handles something,like a missing key, just in case needs exception handling, but in situations like when the key isn't present most of the time, what you really want to do is to decide if the key is present => if-else.", "Python emphasizes and encourages saying what you mean."], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "just in case", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["Why why Exceptions are preferred to if-elif ->"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["Note \nWhen we avoid using try-except, Exceptions continue being raised.", "Exceptions which aren't handled simply go to the default handler.", "When you use try-except, you can handle the error yourself.", "It might be more efficient because if-else requires condition evaluation, while looking for an exception handler may be cheaper.", "Even if this is true, the gain from it will be too minor to bother thinking about.  "], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "Note", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["I hope my answer helps."], "childNum": 0, "tag": "p", "senID": 10, "childList": []}], [{"text": ["What are static versus dynamic calls and returns, and why do you think that calls and returns are any different in Python depending on if you are doing it in a try/except block?", "Even if you aren't catching an exception, Python still has to handle the call possibly raising something, so it doesn't make a difference to Python in regards to how the calls and returns are handled."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Every function call in Python involves pushing the arguments onto the stack, and invoking the callable.", "Every single function termination is followed by the caller, in the internal wiring of Python, checking for a successful or exception termination, and handles it accordingly.", "In other words, if you think that there is some additional handling when you are in a try/except block that is somehow skipped when you are not in one, you are mistaken.", "I assume that is what you \"static\" versus \"dynamic\" distinction was about."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Further, it is a matter of style, and experienced Python developers come to read exception catching well, so that when they see the appropriate try/except around a call, it is more readable than a conditional check."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["The general message, as S.Lott said, is that try/except doesn't hurt so you should feel free to use it whenever it seems appropriate."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "doesn't hurt", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}, {"text": ["This debate is often called \"LBYL vs EAFP\" \u2013 that's \"look before you leap\" vs \"easier to ask forgiveness than permission\".", "Alex Martelli weighs forth on the subject here: http://mail.python.org/pipermail/python-list/2003-May/205182.html  This debate is almost six years old, but I don't think the basic issues have changed very much."], "childNum": 2, "tag": "p", "senID": 1, "childList": [{"text": "Alex Martelli", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Alex%5FMartelli"}, {"href": "http://mail.python.org/pipermail/python-list/2003-May/205182.html", "text": "http://mail.python.org/pipermail/python-list/2003-May/205182.html", "childNum": 0, "tag": "a", "childList": []}]}]]