[[{"text": ["I recommend Lua.", "It was designed for configuration."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Lua", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.lua.org/"}]}], [{"text": ["The simplest way would be to have a text file containing something like:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n key = value\nkey2 = anothervalue\n....\nkeyn = etc\n</code>\n</pre>\n", "senID": 1}, {"text": ["And then you simply open this file and parse it, putting everything in something like a hashmap/dictionary."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["A quick search on google comes up with a library (libConfuse) that can do this for you."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "libConfuse", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.nongnu.org/confuse/"}]}], [{"text": ["Check out CCAN ciniparser.", "Its a fork of the original iniparser (which is no longer maintained) and makes parsing INI style configuration files easy."], "childNum": 3, "tag": "p", "senID": 0, "childList": [{"text": "CCAN", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://ccan.ozlabs.org"}, {"text": "ciniparser", "tag": "a", "pos": -1, "childList": [], "childNum": 0, "href": "http://ccan.ozlabs.org/info/ciniparser.html"}, {"text": "the original iniparser", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://ndevilla.free.fr/iniparser/"}]}, {"text": ["Code from the example (almost mirrored by the unit tests):"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n #include &lt;stdio.h&gt;\n#include &lt;stdbool.h&gt;\n#include &lt;ccan/ciniparser/ciniparser.h&gt;\n\n#define CONFIG_FILE \"/etc/config.ini\"\n\nint main(int argc, char *argv[])\n{\n        dictionary *d;\n        char *val1;\n        bool val2;\n        double val3;\n        int val4;\n\n        d = ciniparser_load(CONFIG_FILE);\n        if (d == NULL)\n            return 1;\n\n        val1 = ciniparser_getstring(d, \"daemon:pidfile\", NULL);\n        val2 = ciniparser_getboolean(d, \"daemon:debug\", false);\n        val3 = ciniparser_getdouble(d, \"daemon:maxload\", 3.5);\n        val4 = ciniparser_getint(d, \"daemon:maxchild\", 5);\n\n        ciniparser_freedict(d);\n\n        return 0;\n}\n</code>\n</pre>\n", "senID": 2}, {"text": ["Of course, you can just drop the few files needed in your tree and #include \"iniparser.h\", there are no dependencies on other CCAN modules unless you want to run the unit tests."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "#include \"iniparser.h\"", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["A sample configuration might look like this:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n [stooges]\nlarry=larry_stooge\ncurly=curly_stooge\nmoe=moe_stooge\nshemp=questionable\n\n[cartoons]\ntom_hates=jerry\n</code>\n</pre>\n", "senID": 5}, {"text": ["Getting the value of stooges:shemp would yield a statically allocated questionable that you would use as-is (without modifying) or allocate and duplicate (i.e.", "strdup()).", "It doesn't get much easier than that.", "Wrap access to the dictionary with a simple mutex and its thread safe."], "childNum": 3, "tag": "p", "senID": 6, "childList": [{"text": "stooges:shemp", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "questionable", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "strdup()", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["CCAN is the Comprehensive C Archive network.", "Think CPAN , just C. Its a project Rusty Russell began a while ago which is finally gaining some traction."], "childNum": 3, "tag": "p", "senID": 7, "childList": [{"text": "CPAN", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "C", "childNum": 0, "tag": "code", "childList": []}, {"href": "http://en.wikipedia.org/wiki/Rusty_Russell", "text": "Rusty Russell", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["Disclaimer: I maintain the module."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}], [{"text": ["What's wrong with a plain text file?", "Are these configuration settings read once when the app starts, or continuously throughout the life of the app?", "When do they get written?", "It sounds like they only get read once at the begining of the app, because you need to recompile every time they change."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["If there's only a handful of values, then I'd say keep it simple and stick with a text file formatted as key/value pairs:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n Config1 = 1\nConfigValue2 = 33.4\nConfigValue3 = ABC\n</code>\n</pre>\n", "senID": 2}, {"text": ["If you have more complex settings, maybe some hierarchy of values, XML might make more sense."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["How much configuration do you need that it needs to be a \"script file\"? "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I just keep a little chunk of code handy that's a ini format parser."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["You could reread the configuration file when a signal such as SIGUSR1 is received."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "SIGUSR1", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}], [{"text": ["you can just store all configurations values externally and read it with the old plain C"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["you can do something like:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["param=value\nparam2=value2"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["and read it normally with fgets and then do a strtok looking for '=' and then you have both params and values."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["if you want to use XML i recommend you libxml2."], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "libxml2.", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://xmlsoft.org/"}]}]]