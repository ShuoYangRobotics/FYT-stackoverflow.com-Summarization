[[{"text": ["Here's a Python snippet that should do:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n thetext=\"\"\"triple quoted paste of your sample text\"\"\"\n y=thetext.split('\\n')\n for line in y:\n    m=re.findall('(\".*?\")',line)\n    if m:\n        print ' '.join(m)\n    else:\n        print line\n</code>\n</pre>\n", "senID": 1}], [{"text": ["The Text::Balanced module is what you seem to be after if you're looking to use Perl.", "The following should be able to extract all the quoted speech in your example (not pretty, but gets the job done)."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Text::Balanced", "tag": "a", "pos": 0, "childList": [{"text": "Text::Balanced", "tag": "code"}], "childNum": 1, "href": "http://search.cpan.org/dist/Text-Balanced/lib/Text/Balanced.pm"}, {"text": "Text::Balanced", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}, {"text": ["It also works for Dennis' test cases."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["The advantage of the code below is that the quotes are grouped by paragraph, which may or may not be useful for later analysis"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Script"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "Script", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n use strict;\nuse warnings;\nuse Text::Balanced qw/extract_quotelike extract_multiple/;\n\nmy %quotedSpeech;\n\n{\n    local $/ = '';\n    while (my $text = &lt;DATA&gt;) { # one paragraph at a time\n\n        while (my $speech = extract_multiple(\n                            $text,\n                            [sub{extract_quotelike($_[0])},],\n                            undef,\n                            1))\n        {   push @{$quotedSpeech{$.}}, $speech; }\n    }\n}\n\n# Print total number of paragraphs in DATA filehandle\n\nprint \"Total paragraphs: \", (sort {$a &lt;=&gt; $b} keys %quotedSpeech)[-1];\n\n# Print quotes grouped by paragraph:\n\nforeach my $paraNumber (sort {$a &lt;=&gt; $b} keys %quotedSpeech) {\n    print \"\\n\\nPara \",$paraNumber;\n    foreach my $speech (@{$quotedSpeech{$paraNumber}}) {\n        print \"\\t\",$speech,\"\\n\";\n    }\n}\n# How many quotes in paragraph 8?\nprint \"Number of quotes in Paragraph 8: \", scalar @{$quotedSpeech{8}};\n</code>\n</pre>\n", "senID": 4}, {"text": ["Output"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "Output", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n Total paragraphs: 10\n\nPara 1  \"Ah, that's perfectly true!\"\n\n\nPara 2  \"Oh, do leave off playing the fool! Some idiot comes in, and you put us\nto shame!\"\n\n\nPara 3  \"Wait a little, Varvara!\"\n        \"That's her character,\"\n\n\nPara 4  \"Where have you been?\"\n\n\nPara 5  \"I think,\"\n        \"I've forgotten something... my handkerchief, I think.... Well, even if\nI've not forgotten anything, let me stay a little.\"\n\n\nPara 7  \"You sit down, too,\"\n\n\nPara 8  \"It doesn't always work.\"\n\n\nPara 9  \"Secondly,\"\n        \"it fails for three quoted phrases...\"\n        \"with two unquoted ones.\"\n\n\nPara 10 \"That's right.\"\n</code>\n</pre>\n", "senID": 6}], [{"text": ["I am not entirely sure which editor are you using, if you are using something editor that supports atomic grouping (e.g.", "EditorPad Pro) You can use the regular expression below to do the search and replace:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Search for "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n (\".+?\"|^[A-Z].+\\r\\n)(.(?!\"))* \nNote: you should replace \\r\\n with \\n or \\r according to your line breaks\n</code>\n</pre>\n", "senID": 2}, {"text": ["Replace with"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n \\1\n</code>\n</pre>\n", "senID": 4}, {"text": ["Here is a bit explanation for the regular expression:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["This works for all cases shown in the question:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n sed -n '/\"/!{p;b}; s/\\(.*\\)\"[^\"]*/\\1\" /;s/\\(.*\"\\)\\([^\"]*\\)\\(\".*\"\\)/\\1 \\3/;p' textfile\n</code>\n</pre>\n", "senID": 1}, {"text": ["It fails for cases such as these:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n He said, \"It doesn't always work.\"\n\n\"Secondly,\" I said, \"it fails for three quoted phrases...\" He completed my thought, \"with two unquoted ones.\"\n\nI replied, \"That's right.\" dejectedly.\n</code>\n</pre>\n", "senID": 3}], [{"text": ["If I understand what you are after...  passing each line through a regex like this should work..."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["You can use the perl debugger to play around with this.", "Hop into the perl debugger with just a perl -de 42 on the command line in linux/mac.", "(The \"42\" is just a valid expression  - it could be anything, but why not choose the meaning of life?"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "perl -de 42", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["anyways"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n open FILE, \"&lt;\", \"filename.txt\" or die $!;\nwhile (my $line = &lt;FILE&gt;) {\n   @fixed_text = $line =~ m{(?:(\" .+? \")) | (?:\\A .* [^\"] .* \\z)}xmsg;\n  for my $new_line (@fixed_text) {\n    print qq($new_line );\n  }\n  print qq(\\n);\n}\n</code>\n</pre>\n", "senID": 3}, {"text": ["NOTE: Sorry I had to edit it - didn't see you wanted lines without any quotes at all..."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["Yes, Regex and Perl is amazing.", "It should be 100% accurate and get all of your instances, acept in the case where a quote extends across paragraphs"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["I forgot to mention that I'm running Perl and Python on a pc.", "I'm using Textpipe for regex."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I get the following error message when running the Perl script.", "The example file \"text\" is in the same BIN directory.", "I've had to make some changes to linux perl scripts before.", "Should I be using different syntax?", "Thanks to everyone for their contributions.", "I'll try the python script next"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["C:\\PERL\\BIN>perl script.pl \"text\"\nName \"main::DATA\" used only once: possible typo at script.pl line 10.\nreadline() on unopened filehandle DATA at script.pl line 10. "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["cheers,"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Aaron"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}]]