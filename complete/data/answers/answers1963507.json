[[{"text": ["See Time Complexity.", "The python dict is a hashmap, its worst case is therefore O(n) if the hash function is bad and results in a lot of collisions.", "However that is a very rare case where every item added has the same hash and so is added to the same chain which for a major Python implementation would be extremely unlikely.", "The average time complexity is of course O(1)."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Time Complexity", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/TimeComplexity"}, {"text": "extremely", "childNum": 0, "tag": "em", "pos": 2, "childList": []}]}, {"text": ["The best method would be to check and take a look at the hashs of the objects you are using.", "The CPython Dict uses int PyObject_Hash (PyObject *o) which is the equivalent of hash(o)."], "childNum": 3, "tag": "p", "senID": 1, "childList": [{"text": "CPython Dict", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://svn.python.org/view/python/trunk/Objects/dictobject.c?view=markup"}, {"href": "http://www.python.org/doc/2.0.1/api/object.html", "text": "int PyObject_Hash (PyObject *o)", "childNum": 0, "tag": "a", "childList": []}, {"text": "hash(o)", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["After a quick check, I have not yet managed to find two tuples that hash to the same value, which would indicate that the lookup is O(1)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n l = []\nfor x in range(0, 50):\n    for y in range(0, 50):\n        if hash((x,y)) in l:\n            print \"Fail: \", (x,y)\n        l.append(hash((x,y)))\nprint \"Test Finished\"\n</code>\n</pre>\n", "senID": 3}, {"text": ["CodePad (Available for 24 hours)"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "CodePad", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://codepad.org/GP8LVrnS"}]}], [{"text": ["It would be easier to make suggestions if you provided example code and data. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Accessing the dictionary is unlikely to be a problem as that operation is O(1) on average, and O(N) amortized worst case.", "It's possible that the built-in hashing functions are experiencing collisions for your data.", "If you're having problems with has the built-in hashing function, you can provide your own."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "O(1) on average, and O(N) amortized worst case", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/TimeComplexity"}]}, {"text": ["You can overwrite the __hash__ method in your class to implement a custom hash function like this:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n def __hash__(self):    \n    return hash(str(self))\n</code>\n</pre>\n", "senID": 3}, {"text": ["Depending on what your data actually looks like, you might be able to come up with a faster hash function that has fewer collisions than the standard function.", "However, this is unlikely.", "See the Python Wiki page on Dictionary Keys for more information. "], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "Python Wiki page on Dictionary Keys", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/DictionaryKeys"}]}], [{"text": ["You are not correct.", "dict access is unlikely to be your problem here.", "It is almost certainly O(1), unless you have some very weird inputs or a very bad hashing function.", "Paste some sample code from your application for a better diagnosis."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "dict", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["As others have pointed out, accessing dicts in Python is fast.", "They are probably the best-oiled data structure in the language, given their central role.", "The problem lies elsewhere."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["How many tuples are you memoizing?", "Have you considered the memory footprint?", "Perhaps you are spending all your time in the memory allocator or paging memory."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["This is evidence of a bug in your memoization method."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["To answer your specific questions:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Q1: \"\"\"Am I correct that python dicts suffer from linear access times with such inputs?", "\"\"\""], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["A1: If you mean that average lookup time is O(N) where N is the number of entries in the dict, then it is highly likely that you are wrong.", "If you are correct, the Python community would very much like to know under what circumstances you are correct, so that the problem can be mitigated or at least warned about.", "Neither \"sample\" code nor \"simplified\" code are useful.", "Please show actual code and data that reproduce the problem.", "The code should be instrumented with things like number of dict items and number of dict accesses for each P where P is the number of points in the key (2 &lt;= P &lt;= 5)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Q2: \"\"\"As far as I know, sets have guaranteed logarithmic access times.", "How can I simulate dicts using sets(or something similar) in Python?", "\"\"\""], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["A2: Sets have guaranteed logarithmic access times in what context?", "There is no such guarantee for Python implementations.", "Recent CPython versions in fact use a cut-down dict implementation (keys only, no values), so the expectation is average O(1) behaviour.", "How can you simulate dicts with sets or something similar in any language?", "Short answer: with extreme difficulty, if you want any functionality beyond dict.has_key(key)."], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "dict.has_key(key)", "childNum": 0, "tag": "code", "pos": 4, "childList": []}]}]]