[[{"text": ["App Engine is not a relational database and you won't be able to quickly do counts on the fly like this.", "The best approach is to update the counts at write time, not generate them at read time."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["When generating counts, there are two general approaches that scale well with App Engine to minimize write contention:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Since Version 1.3.6 "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["My approach would be to have an aggregate model or models to keep track of event types, dates and counts.", "I'm not 100% how you should model this given your requirements, though."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Then, I'd fire off deferred tasks to asynchronously update the appropriate aggregate models whenever a user does something that triggers an event."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Nick Johnson's Background work with the deferred library article has much more information, and provides a framework that you might find useful for doing the kind of aggregation you're talking about."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "Background work with the deferred library", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.google.com/appengine/articles/deferred.html"}]}], [{"text": ["This sounds very similar to a question that I posed on StackOverflow."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["http://stackoverflow.com/questions/1183102/how-to-get-the-distinct-value-of-one-of-my-models-in-google-app-engine I needed to know how to get a distinct values for an entities within my models and there is going to be over 1000 entities for that model."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://stackoverflow.com/questions/1183102/how-to-get-the-distinct-value-of-one-of-my-models-in-google-app-engine", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/1183102/how-to-get-the-distinct-value-of-one-of-my-models-in-google-app-engine"}]}, {"text": ["Hope that helps."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["See:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["http://norduz.wordpress.com/2010/10/22/getting-count-of-rows-in-special-query-in-google-app-engine/"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://norduz.wordpress.com/2010/10/22/getting-count-of-rows-in-special-query-in-google-app-engine/", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://norduz.wordpress.com/2010/10/22/getting-count-of-rows-in-special-query-in-google-app-engine/"}]}], [{"text": ["Would a solution using cursors (like the one below) work for you?", "I personally use this method to count the number of entries in a scenario similar to yours, and haven't seen yet any problems with it (although I run on a schedule, since constant querying of the data store is pretty taxing on the CPU quota)."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "solution", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://groups.google.com/group/google-appengine/browse_thread/thread/80d0c2351fe2fdf8"}]}, {"code": "<pre>\n<code>\n def count(query): \n  i = 0 \n  while True: \n    result = query.fetch(1000) \n    i = i + len(result) \n    if len(result) &lt; 1000: \n      break \n    cursor = query.cursor() \n    query.with_cursor(cursor) \n  return i\n</code>\n</pre>\n", "senID": 1}]]