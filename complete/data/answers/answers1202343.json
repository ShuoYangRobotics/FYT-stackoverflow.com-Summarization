[[{"text": ["I suggest that you spend a little bit of time writing up a Monte Carlo simulation and let it run while you work out the math by hand.", "Hopefully the Monte Carlo simulation will converge before you're finished with the math and you'll be able to check your solution."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["A slightly faster option might involve creating a SO clone for math questions."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Double counting can be solved by use of the Inclusion/Exclusion Principle"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Inclusion/Exclusion Principle", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Inclusion-exclusion%5Fprinciple"}]}, {"text": ["I suspect it comes out to: "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n Choose(8,1)*P(one set of 5 Xs) \n- Choose(8,2)*P(a set of 5 Xs and a set of 5 Ys) \n+ Choose(8,3)*P(5 Xs, 5 Ys, 5 Zs) \n- Choose(8,4)*P(5 Xs, 5 Ys, 5 Zs, 5 As)\n\nP(set of 5 Xs) = 20 Choose 5 * 7^15 / 8^20\nP(5 Xs, 5 Ys) = 20 Choose 5,5 * 6^10 / 8^20\n</code>\n</pre>\n", "senID": 2}, {"text": ["And so on.", "This doesn't solve the problem directly of 'more then 5 of the same', as if you simply summed the results of this applied to 5,6,7..20; you would over count the cases where you have, say, 10 1's and 5 8's. "], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["You could probably apply inclusion exclusion again to come up with that second answer; so, P(of at least 5)=P(one set of 20)+ ... + (P(one set of 15) - 7*P(set of 5 from 5 dice)) + ((P(one set of 14) - 7*P(one set of 5 from 6) - 7*P(one set of 6 from 6)).", "Coming up with the source code for that is proving itself more difficult."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["The exact probability distribution Fs,i of a sum of i s-sided dice can be calculated as the repeated convolution of the single-die probability distribution with itself."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"src": "http://upload.wikimedia.org/math/b/1/4/b140f36d9f022772b54f1236c3744190.png", "tag": "img", "senID": 1}, {"text": ["where     for all  and 0 otherwise."], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "", "childNum": 0, "tag": "img", "pos": 0, "childList": []}, {"text": "", "childNum": 0, "tag": "img", "childList": []}]}, {"text": ["http://en.wikipedia.org/wiki/Dice"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "http://en.wikipedia.org/wiki/Dice", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Dice"}]}], [{"text": ["This problem is really hard if you have to generalize it (get the exact formula)."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["But anyways, let me explain the algorithm.", "If you want to know "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["you have to rephrase your previous problem, as"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["For simplicity's sake, let's call function F(20,8,5) (5 dice, all values) the first answer, and F(20,8,5,3) (5 dice, value 3) the second.", "We have that F(20,8,5) = F(20,8,5,3) * 8 + (events when more than one value is repeated 5 times)"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "(events when more than one value is repeated 5 times)", "childNum": 0, "tag": "strong", "pos": 1, "childList": []}]}, {"text": ["So if we can get F(20,8,5,3) it should be pretty simple isn't it?", "Well...not so much..."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["First, let us define some variables:\nX1,X2,X3...,Xi , where Xi=number of times we get the dice i"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "X1,X2,X3...,Xi , where Xi=number of times we get the dice i", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["Then:"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n F(20,8,5)/20^8 = P(X1=5 or X2=5 or ... or X8=5, with R=20(rolls) and N=8(dice number))\n</code>\n</pre>\n", "senID": 7}, {"text": [", P(statement) being the standard way to write a probability."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["we continue:"], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"code": "<pre>\n<code>\n F(20,8,5,3)/20^8 = P(X3=5 and X1&lt;&gt;5 and ... and X8&lt;&gt;5, R=20, N=8) \nF(20,8,5,3)/20^8 = 1 - P(X1=5 or X2=5 or X4=5 or X5=5 or X6=5 or X7=5 or X8=5, R=15, N=7)  \nF(20,8,5,3)/20^8 = 1 - F(15,7,5)/7^15\n</code>\n</pre>\n", "senID": 10}, {"text": ["recursively:"], "childNum": 0, "tag": "p", "senID": 11, "childList": []}, {"code": "<pre>\n<code>\n F(15,8,5) = F(15,7,5,1) * 7  \nP(X1=5 or X2=5 or X4=5 or X5=5 or X6=5 or X7=5 or X8=5, R=15, N=7) = P(X1=5 and X2&lt;&gt;5 and X4&lt;&gt;5 and .. and X8&lt;&gt;5. R=15, N=7) * 7\n</code>\n</pre>\n", "senID": 12}, {"tag": "hr", "senID": 13}, {"code": "<pre>\n<code>\n F(15,7,5,1)/7^15 = 1 - F(10,6,5)/6^10 F(10,6,5) = F(10,6,5,2) * 6\n</code>\n</pre>\n", "senID": 14}, {"tag": "hr", "senID": 15}, {"code": "<pre>\n<code>\n F(10,6,5,2)/6^10 = 1 - F(5,5,5)/5^5\nF(5,5,5) = F(5,5,5,4) * 5\n</code>\n</pre>\n", "senID": 16}, {"text": ["Well then... F(5,5,5,4) is the number of ways to get 5 dices of value 4 in 5 rolls, such as no other dice repeats 5 times.", "There is only 1 way, out of a total 5^5.", "The probability is then 1/5^5."], "childNum": 0, "tag": "p", "senID": 17, "childList": []}, {"text": ["F(5,5,5) is the number of ways to get 5 dices of any value (out of 5 values) in 5 rolls.", "It's obviously 5.", "The probability is then 5/5^5 = 1/5^4."], "childNum": 0, "tag": "p", "senID": 18, "childList": []}, {"text": ["F(10,6,5,2) is the number of ways to get 5 dices of value 2 in 10 rolls, such as no other dice repeats 5 times.", "F(10,6,5,2) = (1-F(5,5,5)/5^5) * 6^10 = (1-1/5^4) * 6^10"], "childNum": 0, "tag": "p", "senID": 19, "childList": []}, {"text": ["Well...", "I think it may be incorrect at some part, but anyway, you get the idea.", "I hope I could make the algorithm understandable."], "childNum": 0, "tag": "p", "senID": 20, "childList": []}, {"text": ["edit:\nI did some checks, and I realized you have to add some cases when you get more than one value repeated exactly 5 times.", "Don't have time to solve that part thou..."], "childNum": 1, "tag": "p", "senID": 21, "childList": [{"text": "edit:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}], [{"text": ["Recursive solution:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n Prob_same_value(n) = Prob_same_value(n-1) * (1 - Prob_noone_rolling_that_value(N-(n-1)))\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Here is what I am thinking..."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["If you just had 5 dice, you would only have eight ways to get what you want."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["For each of those eight ways, all possible combinations of the other 15 dice work."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["So - I think the answer is: (8 * 8**15) / 8**20"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["(The answer for at least 5 the same."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["I believe you can use the formula of x occurrences in n events as:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["P = probability^n * (n!/((n - x)!x!", "))"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["So the final result is going to be the sum of results from 0 to n."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["I don't really see any easy way to combine it into one step that would be less messy.", "With this way you have the formula spelled out in the code as well.", "You may have to write your own factorial method though."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n float calculateProbability(int tosses, int atLeastNumber) {\n    float atLeastProbability = 0;\n    float eventProbability = Math.pow( 1.0/8.0, tosses);\n    int nFactorial = factorial(tosses);\n\n    for ( i = 1; i &lt;= atLeastNumber; i++) {\n      atLeastProbability += eventProbability * (nFactorial / (factorial(tosses - i) * factorial(i) );\n    }\n  }\n</code>\n</pre>\n", "senID": 4}]]