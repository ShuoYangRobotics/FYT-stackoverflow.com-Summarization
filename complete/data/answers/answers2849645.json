[[{"text": ["The particular code examples you have chosen do not demonstrate any advantage of the list comprehension, because it is being (mis-)used for the trivial task of printing.", "In this simple case I would choose the simple for loop."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "for", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["In many other cases, you will want to supply an actual list to another function or method, and the list comprehension is the easiest and most readable way to do that."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["An example which would clearly show the superiority of the list comp could be made by replacing the print example with one involving creating another actual list, by appending to one on each iteration of the for loop:"], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "print", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "for", "childNum": 0, "tag": "code", "childList": []}]}, {"code": "<pre>\n<code>\n L = []\nfor x in range(10):\n    L.append(x**2)\n</code>\n</pre>\n", "senID": 3}, {"text": ["Gives the same L as:"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "L", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n L = [x**2 for x in range(10)]\n</code>\n</pre>\n", "senID": 5}], [{"text": ["I find the first example better - less verbose, clearer and more readable."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["In my opinion, go with what best gets your intention across, after all:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["-- from \"Structure and Interpretation of Computer Programs\" by Abelson and Sussman"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["By the way, since you're just starting to learn Python, start learning the new String Formatting syntax right away:"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "new String Formatting syntax", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://docs.python.org/tutorial/inputoutput.html#fancier-output-formatting"}]}, {"code": "<pre>\n<code>\n for k, v in os.environ.items():\n    print \"{0}={1}\".format(k, v)\n</code>\n</pre>\n", "senID": 4}], [{"text": ["If the iteration is being done for its side effect ( as it is in your \"print\" example ), then a loop is clearer. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["If the iteration is executed in order to build a composite value, then list comprehensions are usually more readable.  "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["The first one in my opinion, because:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": "It doesn't build a huge string.", "tag": "none", "senID": 1}, {"text": "It doesn't build a huge list (can easily be fixed with a generator, by removing the ", "tag": "none", "senID": 2}]}, {"text": ["In both cases, you access the items in the same way (using the dictionary iterator)."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["List comprehension is more than twice as fast as explicit loop.", "Base on Ben James' variation, but replace the x**2 with a more trivial x+2 function, the two alternatives are:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def foo(n):\n  L = []\n  for x in xrange(n):\n    L.append(x+2)\n  return L\n\n\ndef bar(n):\n  return [x+2 for x in xrange(n)]\n</code>\n</pre>\n", "senID": 1}, {"text": ["Timing result:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n In [674]: timeit foo(1000)\n10000 loops, best of 3: 195 us per loop\n\nIn [675]: timeit bar(1000)\n10000 loops, best of 3: 81.7 us per loop\n</code>\n</pre>\n", "senID": 3}, {"text": ["List comprehension wins by a large margin."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["I agree than readability should be a priority over performance optimization.", "However readability is in the eye of beholder.", "When I first learn Python, list comprehension is a weird thing I find hard to comprehend!", ":-O But once I got use to it, it becomes a really nice short hand notation.", "If you are to become proficient in Python you have to master list comprehension."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["list comprehensions are supposed to be run at C level, so if there is huge loop, list comprehensions are good choice."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["I agree with @Ben, @Tim, @Steven:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "readability is the most important thing (do \"import this\" to remind yourself of what is)", "tag": "none", "senID": 1}, {"text": "a listcomp may or may not be much faster than an iterative-loop version... it depends on the total number of function calls that are made", "tag": "none", "senID": 2}, {"text": "if you ", "tag": "none", "senID": 3}]}, {"text": ["Example:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n print \"\\n\".join(\"%s=%s\" % (k, v) for k,v in os.environ.iteritems())\n</code>\n</pre>\n", "senID": 5}, {"text": ["in the code snippet above, I made two changes...", "I replaced the listcomp with a genexp, and I changed the method call to iteritems().", "[this trend is moving forward as in Python 3, iteritems() replaces and is renamed to items()."], "childNum": 4, "tag": "p", "senID": 6, "childList": [{"text": "two", "childNum": 0, "tag": "em", "pos": 0, "childList": []}, {"text": "iteritems()", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "iteritems()", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "items()", "childNum": 0, "tag": "code", "childList": []}]}]]