[[{"text": ["I don't know nothing about Python but I often create dynamic regex expressions into a string like:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["\"(school 1|school 2|school 3|school n)\""], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Then I instantiate a regex object, passing the string."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["You can then match your schools, regardless of the form of the document unless a HTML tag is  in the middle of a school name."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Mike"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["EDIT - example (sorry c#): \"(\" + String.Join(\"|\", arrayOfSchools) + \")\""], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "\"(\" + String.Join(\"|\", arrayOfSchools) + \")\"", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}], [{"text": ["This is a very basic screen scraping way to achieve what you want"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import urllib\nhtml = urllib.urlopen(pageToLawyersBio)\n\nhtmlstr=''\nfor line in html.readlines():\n    htmlstr += line.lower()\n\nfor school in listOfSchools:\n    if school.lower() in htmlstr:\n        print \"This lawyer went to\", school\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I hate to rain on your parade, but building a lookup list of law schools and then doing a set membership type of test in the source code probably will not work.", "The flawed approach:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n schools = []\nhtml = page.read()\nfor school in list:\n    if school in html:\n        schools.append(school)\n</code>\n</pre>\n", "senID": 1}, {"text": ["The reason why is this: you're assuming law school names are represented uniformly on lawyer websites, but that assumption isn't reliable.", "For example, I went to a law school called University of California, Hastings College of the Law.", "Sometimes it appears on lawyer websites as Hastings College of Law, and others it appears as UC Hastings.", "Often the data about where a lawyer went to school is collected directly from the lawyer, so it will appear verbatim as he or she supplied it.", "You probably can't assume the data was later normalized."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["As a result, any school names that deviate from your lookup list won't be found.", "To further complicate matters, the shortest version of my school's name--UC Hastings--might even confound a difflib 'get close matches' lookup unless you set the match ratio very low, which inevitably causes the routine to find a number of other false positives as well. "], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Here's my advice.", "Spider a list of all law school names and put it in a database table.", "Create a second table with known deviations from the list.", "Each time you spider a site, try a basic set membership test in the lookup list (or dynamically generated regex).", "In the probable event that such a lookup fails, make the script throw an error and print the unmatched school to a console.", "Add that school the table of known variants and key it to the correct school name in the main lookup table.", "Repeat this process until you feel confident you have most variants accounted for.", "From there, add a hack to check unfound school names against a list of the official lookup items and all known variants using "], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n difflib.get_close_matches\n</code>\n</pre>\n", "senID": 5}, {"text": ["Use this kind of method to return the closest valid match any time a school isn't found.", "It may be the best your clients can ask for.", "I use django for this kind of thing because the built-in database admin makes it easy to add in known variants. "], "childNum": 0, "tag": "p", "senID": 6, "childList": []}], [{"text": ["I would need to know which school matches."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Now I am extracting the school info with regex (I am still testing):"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n item = re.search('(JD)(.*?)(\\d+)', html)\n    if item:\n        JD = item.group()\n        f = open('test1.txt', 'a')\n        f.write(JD)\n    else:\n        NoJD = (\"empty cvs schema goes here\")\n        f = open('test1.txt', 'a')\n        f.write(NoJD)\n</code>\n</pre>\n", "senID": 2}, {"text": ["This picks up the relevant part from the html:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["JD, Columbia Law School, Harlan Fiske Stone Scholar, Parker School Recognition of Achievement in International and Foreign Law, 2005"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "JD, Columbia Law School, Harlan Fiske Stone Scholar, Parker School Recognition of Achievement in International and Foreign Law, 2005", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["I still need to parse this to format properly so that I can write it into an items.csv file:"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "items.csv", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["first,initial,last,title,firm,school,year"], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "first,initial,last,title,firm,school,year", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["So, I thought that if i looked for matches for schools, I could pick up the school names (and year graduated) by looking up a school list.", "But if this is too complicated I'll go ahead with the regex."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["Thanks."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}], [{"text": ["You should consider using beautifulSoup to parse the HTML.", "In regards to your question, you might want to try something like:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n for line in html.split(\"&lt;br \\&gt;\"):\n    # This gives a lot of crap, filter it with\n    for values in line.split(\", \"):\n         try: \n             if values[0] in schools:\n                  #This line contains a school, write it out.\n         except:\n             # Ignore badly formatted lines\n             pass\n</code>\n</pre>\n", "senID": 1}], [{"text": ["inspectorG4dgt: This is great!", "thanks.", "I think this better than using regex.", "Because in some pages \"JD\" comes before school name, in others, after the school name.", "Same with the graduation dates. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I have been trying to get the line where the school names occurs but I couldn't do it.", "Something like this:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n htmlstr = ''\nfor line in html.readlines():\n    htmlstr += line.lower()\n\nfor school in listOfSchools:\n    if school.lower() in htmlstr:\n        [ schoolLine = line with the school and date ]\n</code>\n</pre>\n", "senID": 2}, {"text": ["To learn more about this stuff I've been studying this tutorial."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "tutorial", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.daniweb.com/code/snippet216630.html#"}]}, {"text": ["For instance, I tried to use readline() to loop on each line but that didn't work. "], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "readline()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Or it may be better to search for listOfSchools and a list of years = [1956, ... 2008].", "Since schools and dates are on the same lines.", "Any suggestions how I can do this?", "Thanks."], "childNum": 2, "tag": "p", "senID": 5, "childList": [{"text": "listOfSchools", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "years = [1956, ... 2008]", "childNum": 0, "tag": "code", "pos": -1, "childList": []}]}]]