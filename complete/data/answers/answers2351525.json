[[{"code": "<pre>\n<code>\n class SomeClass( object ):\n....\n    def action( self ):\n        return self.name\n\nclass AnotherClass( object ):\n....\n    def action( self ):\n        return self.normalize( self.identifier )\n\n[5 more classes like the above two]\n\na.action()\n</code>\n</pre>\n", "senID": 0}, {"text": ["Simpler.", "Clearer.", "More extensible.", "Less Magic.", "No dictionary.", "No loop."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"code": "<pre>\n<code>\n actions[obj.__class__]()\n</code>\n</pre>\n", "senID": 0}, {"text": ["works if obj is really an instance of (say) SomeClass and not of a subclass -- so if that can be the case, the result will be different from your current way of handling it.", "Also note that this might raise a KeyError if the class has no corresponding action.", "To handle this case the same way you do now (i.e.", "do nothing), you could use"], "childNum": 3, "tag": "p", "senID": 1, "childList": [{"text": "obj", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "SomeClass", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "KeyError", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n actions.get(obj.__class__, lambda: None)\n</code>\n</pre>\n", "senID": 2}, {"text": ["to have a default value returned."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Oh, and listen to S.Lott's comment on your question.", "In many cases, there are better ways to achieve something like this.", "You could, for example, have all your classes define a do_whatever(self) and just call obj.do_whatever()."], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "do_whatever(self)", "childNum": 0, "tag": "code", "pos": 2, "childList": []}, {"text": "obj.do_whatever()", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["I assume you have a parent class for all of those, or at least a mixin.", "Put a default return function in the parent or mixin, and then override it in those that are different...", "It's the only proper way of doing it. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Sure, it makes extra code, but at least it's encapsulated, and scalable.", "Say you wanna add support for five more classes.", "Instead of altering that code up there, just add the correct code to the new classes.", "By the looks of it, it's two lines per class (function definition and return line).", "That's not bad, is it?"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If obj isn't a class which contains a return function, then an exception is raised, which you could catch and ignore with a clean conscience."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "obj", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n class MyMixin:\n  def my_return(self, *args):\n    return self.name\n  ... possibly other things...\n\nclass SomeClass(MyMixin):\n  ... no alteration to the default ...\n\nclass AnotherClass(MyParent, MyMixin):\n  def my_return(self, *args):\n    return args[0].normalize(self.identifier)\n  ... blabla\n\n\n# now, this is in the caller object...\ntry:\n  rval = obj.my_return(self) # this is the caller object 'self', not the 'self' in the 'obj'\n  #dosomething with rval\nexcept Exception:\n  pass #no rval for this object type, skipping it...\n</code>\n</pre>\n", "senID": 3}], [{"text": ["What about"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n actions[obj.__class__]()\n</code>\n</pre>\n", "senID": 1}], [{"code": "<pre>\n<code>\n actions[type(obj)]()\n</code>\n</pre>\n", "senID": 0}], [{"code": "<pre>\n<code>\n results = [func() for cls, func in actions.iteritems() if isinstance(obj, cls)]\n</code>\n</pre>\n", "senID": 0}, {"text": ["There will be zero or more results, if your object isinstance of zero or more of the class-keys. "], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "isinstance", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Using type(obj) as key will only work if your object is of that type.", "If it's further down the inheritance tree, you'll miss it."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "type(obj)", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}]]