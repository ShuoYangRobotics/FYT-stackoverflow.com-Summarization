[[{"text": ["If you're \"academically interested\", you want to learn about how to write a parser with operator precedence."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Simple Top-Down Parsing in Python is a nice article that builds an example parser to do exactly what you want to do: Evaluate mathematical expressions."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "Simple Top-Down Parsing in Python", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://effbot.org/zone/simple-top-down-parsing.htm"}]}, {"text": ["I can highly recommend having a go at writing your own first parser -- it's one of those \"ah, that's how that works\" moments!"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "that's", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}], [{"text": ["Another possibility is to look at Pyparsing, which is a general parser builder.", "It is more powerful than you need, but it may be faster to implement."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Pyparsing", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://pyparsing.wikispaces.com/"}]}], [{"text": ["I'm not terribly familiar with Python and any extremely Pythonic methods, but you could look at the Interpreter pattern, which is defined in the Gang of Four book.", "It's designed for processing a \"language\", and mathematical expressions do follow a particular language with rules.", "In fact, the example on Wikipedia is actually a Java implementation of a RPN calculator."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Interpreter pattern", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Interpreter%5Fpattern"}]}], [{"text": ["That's what the \"eval\" function does in Python."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n result = eval(expression)\n</code>\n</pre>\n", "senID": 1}, {"text": ["Beware though it can do a whole lot more, primarily call functions, so to be safe you should make sure it can't access the locals or globals.", "Also, you can access the builtin methods, including the tricky import so you need to block access to that as well:"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "import", "childNum": 0, "tag": "strong", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n result = eval(expression, {'__builtins__': None}, {})\n</code>\n</pre>\n", "senID": 3}, {"text": ["But that's only if you need security, that is if you allow anybody to type in any expression."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["Of course since you this way block all locla variables from use, then you don't have any variables to use, so to have that you need to pass in just those variables which should be accessed in the dictionaries."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n vars = {'__builtins__': None, 'x': x}\nresult = eval(expression, vars, {})\n</code>\n</pre>\n", "senID": 6}, {"text": ["or similar."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["take a look at calculation engine"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "calculation engine", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://calculator.codeplex.com/"}]}], [{"text": ["The java alternative is here http://code.google.com/p/expressionoasis/"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://code.google.com/p/expressionoasis/", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.google.com/p/expressionoasis/"}]}], [{"text": ["This receipe gives the proper answer to your problem:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["http://code.activestate.com/recipes/496746-restricted-safe-eval/"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://code.activestate.com/recipes/496746-restricted-safe-eval/", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.activestate.com/recipes/496746-restricted-safe-eval/"}]}, {"text": ["It allows you to eval limited statement that can not harm your computer or your program."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}]]