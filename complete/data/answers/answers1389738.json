[[{"text": ["From your description JSON encoding is the secure and fast solution.", "There is a json module in python2.6, you can use it like this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import json\nobj = {'key1': 'value1', 'key2': [1, 2, 3, 4], 'key3': 1322}\nencoded = json.dumps(obj)\nobj = json.loads(encoded)\n</code>\n</pre>\n", "senID": 1}, {"text": ["JSON format is human readable and is very similar to the dictionary string representation in python.", "And doesn't have any security issues like pickle.", "If you don't have python2.6 you can install cjson or simplejson"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "simplejson", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://pypi.python.org/pypi/simplejson/"}]}, {"text": ["You can't use JSON to save python objects like Pickle.", "But you can use it to save: strings, dictionaries, lists, ...", "It can be enough for most cases."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["To explain why pickle is insecure.", "From python docs:"], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "To explain why pickle is insecure.", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}, {"text": "docs", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://www.python.org/doc/2.2.3/lib/pickle-sec.html"}]}, {"text": ["There are some ways to defend yourself but it is much easier to use JSON in your case."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}], [{"text": ["You could do something like:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["to write"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "Pickle", "tag": "none", "senID": 2}, {"text": "Sign pickled file", "tag": "none", "senID": 3}, {"text": "Done", "tag": "none", "senID": 4}]}, {"text": ["to read"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "Check pickled file's signature", "tag": "none", "senID": 6}, {"text": "Unpickle", "tag": "none", "senID": 7}, {"text": "Use", "tag": "none", "senID": 8}]}, {"text": ["I wonder though what makes you think that the data files are going to be tampered but your application is not going to be?"], "childNum": 0, "tag": "p", "senID": 9, "childList": []}], [{"text": ["You need to give us more context before we can answer: what type of data are you saving, how much is there, how do you want to access it?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["As for pickles: they do not store code.", "When you pickle a function or class, it is the name that is stored, not the actual code itself."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["In this answer, I'm only concerned about accidental corruption of the application's integrity."], "childNum": 4, "tag": "p", "senID": 0, "childList": [{"text": "", "childNum": 1, "tag": "strong", "pos": 0, "childList": [{"text": "", "tag": "em"}]}, {"text": "", "childNum": 0, "tag": "em", "childList": []}, {"text": "accidental", "childNum": 0, "tag": "strong", "childList": []}, {"text": "", "childNum": 0, "tag": "strong", "childList": []}]}, {"text": ["Pickle is \"secure\".", "What might be insecure is accessing code you didn't write, for example in plugins; that is not relevant to pickles though."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["When you pickle an object, all its data is saved, but code and implementation is not.", "This means when unpickled, an updated object might find it has \"old-style\" data inside (if you update the implementation).", "This is something you must know and handle, if applicable."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Pickling strings, lists, numbers, dicts is very easy and works perfectly, and comparably to JSON.", "The Pickle magic is that -- sometimes without adjustment -- even complex python objects can be pickled.", "But only data is pickled; the instances are reconstructed simply by the saved module name and type name of the object."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["You should use a database of some kind.", "Storing in pickle format isn't a good idea (in most cases).", "You may consider:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": ["SQLite"], "childNum": 0, "tag": "strong", "senID": 1, "childList": []}, {"text": ["buzhug"], "childNum": 1, "tag": "a", "senID": 2, "childList": [{"text": "buzhug", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": "SQL database - you may use interface to some of DBMS (like MySQL, PostreSQL etc.), but it's only good for larger amount of data (thousands of records).", "tag": "none", "senID": 3}]}, {"text": ["You may find some other solutions here."], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "here", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/DatabaseInterfaces#Non-RelationalDatabases"}]}], [{"text": ["You might enjoy working with the y_serial module over at \nhttp://yserial.sourceforge.net "], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://yserial.sourceforge.net", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://yserial.sourceforge.net"}]}, {"text": ["which reads like a tutorial but operationally offers \nworking code for serialization and persistance.", "The commentary discusses some of the pros and cons \nrelevant to issues raised here."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["It's designed to be a general solution to \nwarehousing compressed Python objects with SQLite \n(with almost no SQL fuss ;-)"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Hope this helps."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["Who -- specifically -- is the sociopath who's going through the effort to break a program by hacking the pickled file?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["It's Python.", "The sociopath has your source.", "They don't need to fool around hacking your pickle file.", "They can just edit your source and do all the \"damage\" they want."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Don't worry about \"insecurity\" unless you're involved in litigation with organized crime syndicates."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Don't worry about \"a rogue save file could inject harmful code into the program\".", "No one will bother with a rogue save file when they have the source."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}]]