[[{"text": ["If you are behind a router which obtains the external IP, I'm afraid you have no other option but to use external service like you do.", "If the router itself has some query interface, you can use it, but the solution it will be very environment specific and unreliable."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["If you think and external source is too unreliable, you could pool a few different services.", "For most ip lookup pages they require you to scrape html, but a few of them that have created lean pages for scripts like yours - also so they can reduce the hits on their sites:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": ["automation.whatismyip.com/n09230945.asp"], "childNum": 0, "tag": "a", "senID": 1, "childList": []}, {"text": ["whatismyip.org"], "childNum": 0, "tag": "a", "senID": 2, "childList": []}]}], [{"text": ["If the machine is being a firewall then your solution is a very sensible one: the alternative being able to query the firewall which ends-up being very dependent on the type of firewall (if at all possible)."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["as mentioned by others, you need to hit an external server to reliably get your external IP address.", "However, you don't need a complicated library to do it.", "Here's the solution I came up with:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n import socket\n\ndef getExternalIP():\n    sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)\n    sock.connect(('google.com', 80))\n    ip = sock.getsockname()[0]\n    sock.close()\n    return ip\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Just as an alternative.", "Here's a script you can try out."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "script", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://ipcheck.sourceforge.net/"}]}], [{"text": ["As Sunny has suggested, its not possible in general to get external ip-address being inside a network without any help from external services.", "Have a look at the following tutorial which covers exactly the same thing.", "I guess it works for Python 2.5.X.", "http://codetempo.com/programming/python/monitoring-ip-addresses-of-your-computer-start-up-script-on-linux-ubuntu"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://codetempo.com/programming/python/monitoring-ip-addresses-of-your-computer-start-up-script-on-linux-ubuntu", "tag": "a", "pos": 3, "childList": [], "childNum": 0, "href": "http://codetempo.com/programming/python/monitoring-ip-addresses-of-your-computer-start-up-script-on-linux-ubuntu"}]}, {"text": ["It says that tutorial is for Linux but works for other platforms with python too."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}]]