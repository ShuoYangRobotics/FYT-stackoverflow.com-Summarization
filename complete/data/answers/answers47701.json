[[{"text": ["Yeah, gdb is good for lower level debugging."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["You can change threads with the thread command."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "thread", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}, {"text": ["e.g"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n (gdb) thr 2\n[Switching to thread 2 (process 6159 thread 0x3f1b)]\n(gdb) backtrace\n....\n</code>\n</pre>\n", "senID": 3}, {"text": ["You could also check out Python specific debuggers like Winpdb, or pydb.", "Both platform independent. "], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "Winpdb", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://winpdb.org/about/"}, {"text": "pydb", "tag": "a", "pos": -1, "childList": [], "childNum": 0, "href": "http://bashdb.sourceforge.net/pydb/"}]}], [{"text": ["Use Winpdb.", "It is a platform independent graphical GPL Python debugger with support for remote debugging over a network, multiple threads, namespace modification, embedded debugging, encrypted communication and is up to 20 times faster than pdb."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "Winpdb", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://winpdb.org/"}, {"text": "platform independent", "childNum": 0, "tag": "strong", "pos": 1, "childList": []}]}, {"text": ["Features:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"tag": "ul", "num": 5, "lis": [{"text": "GPL license. Winpdb is Free Software.", "tag": "none", "senID": 2}, {"text": "Compatible with CPython 2.3 through 2.6 and Python 3000", "tag": "none", "senID": 3}, {"text": "Compatible with wxPython 2.6 through 2.8", "tag": "none", "senID": 4}, {"text": "Platform independent, and tested on Ubuntu Gutsy and Windows XP.", "tag": "none", "senID": 5}, {"text": "User Interfaces: rpdb2 is console based, while winpdb requires wxPython 2.6 or later.", "tag": "none", "senID": 6}]}, {"src": "http://winpdb.org/images/screenshot%5Fwinpdb%5Fsmall.jpg", "tag": "img", "senID": 7}], [{"text": ["My experience debugging multi-threaded programs in PyDev (Eclipse on Windows XP) is, threads created using thread.start_new_thread could not be hooked, but thread created using threading.Thread could be hooked.", "Hope the information is helpful."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["You can attach a debugger to a multi-threaded Python process, but you need to do it at the C level.", "To make sense of what's going on, you need the Python interpreter to be compiled with symbols.", "If you don't have one, you need to download source from python.org and build it yourself:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n ./configure --prefix=/usr/local/pydbg\nmake OPT=-g\nsudo make install\nsudo ln -s /usr/local/pydbg/bin/python /usr/local/bin/dbgpy\n</code>\n</pre>\n", "senID": 1}, {"text": ["Make sure your workload is running on that version of the interpreter.", "You can then attach to it with GDB at any time.", "The Python folks have included a sample \".gdbinit\" in their Misc directory, which has some useful macros.", "However it's broken for multi-threaded debugging (!).", "You need to replace lines like this"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n while $pc &lt; Py_Main || $pc &gt; Py_GetArgcArgv\n</code>\n</pre>\n", "senID": 3}, {"text": ["with the following:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n while ($pc &lt; Py_Main || $pc &gt; Py_GetArgcArgv) &amp;&amp; ($pc &lt; t_bootstrap || $pc &gt; thread_PyThread_start_new_thread)\n</code>\n</pre>\n", "senID": 5}, {"text": ["Otherwise commands like pystack won't terminate on threads other than the main thread.", "With this stuff in place, you can do stuff like"], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "pystack", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n gdb&gt; attach &lt;PID&gt;\ngdb&gt; info threads\ngdb&gt; thread &lt;N&gt;\ngdb&gt; bt\ngdb&gt; pystack\ngdb&gt; detach\n</code>\n</pre>\n", "senID": 7}, {"text": ["and see what's going on.", "Kind of."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["You can parse what the objects are with the \"pyo\" macro.", "Chris has some examples on his blog."], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "Chris has some examples", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://chrismiles.livejournal.com/20226.html"}]}, {"text": ["Good luck."], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"text": ["(Shoutout for Dan's blog for some key information for me, notably the threading fix!"], "childNum": 1, "tag": "p", "senID": 11, "childList": [{"text": "Dan's blog", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://mcfunley.com/cs/blogs/dan/archive/2007/10/19/1530.aspx"}]}], [{"text": ["If you mean the pydb, there is no way to do it.", "There was some effort in that direction:\nsee the svn commit, but it was abandoned.", "Supposedly winpdb supports it."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "see the svn commit", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://svn.python.org/projects/sandbox/trunk/pdb/mpdb.py"}, {"text": "winpdb supports it", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://winpdb.org/docs/launch-time/"}]}], [{"text": ["What platform are you attempting this on?", "Most debuggers allow you to attach to a running process by using the process id.", "You can either output the process id via logging or using something like Task Manager.", "Once that is achieved it will be possible to inspect individual threads and their call stacks."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["EDIT: I don't have any experience with GNU Debugger (GDB), which is cross platform, however I found this link and it may start you on the right path.", "It explains how to add debug symbols (handy for reading stack traces) and how to instruct gdb to attach to a running python process."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "link", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://wiki.python.org/moin/DebuggingWithGdb"}]}]]