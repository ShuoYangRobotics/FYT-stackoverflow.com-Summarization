[[{"text": ["Somewhere on Usenet I read a statement like this from Google \"he Python 2.7 runtime is slower than the Python 2.5 runtime in some cases and faster in others.", "We aren't publicizing  the reasons why at this point.\".", "Seems nobody has found so far a scenario where 2.7 is faster than 2.5 thus ..."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Somewhere on Usenet", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://groups.google.com/group/google-appengine/msg/88fa978c4aa46041"}]}, {"text": ["I read into this"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["My profiling indicates that python 2.7 multithreaded applications spend ca.", "35 % of their time in {method 'acquire' of 'thread.lock' objects} - and seemingly that happens in googles RPC code.", "There are also indication that importing has serious locking issues."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "{method 'acquire' of 'thread.lock' objects}", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Basically you can't do anything about it except waiting for the AppEngine to fix it.", "See also this comprehensive documentation about the slowdown."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "this comprehensive documentation", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "https://docs.google.com/a/hudora.de/document/d/1cbiFN7ONeubDW-qDaRFuK4mtyO3kEfA9qhGEDUVdJ4w/edit?pli=1"}]}, {"text": ["Factors which almost certainly don't play a significant role in this are:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "uploading pyc files (the GAE infrastructure does that for you)", "tag": "none", "senID": 5}, {"text": "the server provisioning (GAE is such a massive scale and even in closed beta 2.7. was slow)", "tag": "none", "senID": 6}, {"text": "WSGI vs. CGI (wouldn't explain such a huge performance hit)", "tag": "none", "senID": 7}]}, {"text": ["The ugly thing is that Google did a massive price hike in two steps but told us \"by using multithreaded python 2.7 you can run so much more effective that the new prices don't look so bad\".", "Unfortunately the Python 2.7. runtime is still labeled \"experimental\" and doesn't deliver production quality performance."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}], [{"text": ["Python 2.7 support is still experimental.", "One aspect of being new and experimental is that it hasn't had the kind of performance baking and tuning that Python 2.5 has."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Did you migrated your application to use WSGI instead of CGI when run on python 2.7?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["It is possible that CGI interface is just a wrapper around WSGI that is enabled for 2.7 now."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["By swtiching to python2.7 my app performance under load is 3x worse."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["With 2.5:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Connection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:       36   48  15.4     41     109\nProcessing:   685 3010 1893.3   2657    9255\nWaiting:      685 3009 1893.3   2656    9255\nTotal:        725 3058 1900.5   2711    9333"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Percentage of the requests served within a certain time (ms)\n  50%   2711\n  66%   3287\n  75%   3896\n  80%   4521\n  90%   6146\n  95%   7078\n  98%   7934\n  99%   8413\n 100%   9333 (longest request)"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["With 2.7:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["Connection Times (ms)\n              min  mean[+/-sd] median   max\nConnect:       35   46  11.4     41      96\nProcessing:  1076 7614 4190.5   6711   32284\nWaiting:     1075 7614 4190.5   6711   32283\nTotal:       1124 7660 4195.5   6764   32353"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["Percentage of the requests served within a certain time (ms)\n  50%   6764\n  66%   7790\n  75%   8751\n  80%   9392\n  90%  10844\n  95%  13139\n  98%  25219\n  99%  27259\n 100%  32353 (longest request)"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}], [{"text": ["As far as I know, Python 2.7 should be faster than 2.5.", "However, there are some factors that can influence speeds:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "The way the binary is compiled;", "tag": "none", "senID": 1}, {"text": "Whether your libraries (such as Memcache) are compiled as C(++) or Python. A C++ module is, of course, faster than the Python equivalent;", "tag": "none", "senID": 2}, {"text": "The server it's on - I haven't ever used App Engine but I'd assume that a server only runs either Python 2.5 or Python 2.7, since mixing them would be a waste of resources. If the 2.7 servers are used a lot more than the 2.5 servers and App Engine hasn't compensated for this, you'll notice the performance go down as well.", "tag": "none", "senID": 3}]}, {"text": ["These are the first 3 things that I came up with, but there are a lot of factors.", "Even the weather could in theory affect performance."], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "in theory", "childNum": 0, "tag": "em", "pos": 1, "childList": []}]}], [{"text": ["A quote from google itself "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["They haven't really made it for production use yet , Its like beta testing ."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["So keep your application in python2.7 till the experimental phase is over. "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["You can also try uploading only the compiled .pyc files because python27 runtime supports bytecode upload "], "childNum": 2, "tag": "p", "senID": 3, "childList": [{"text": ".pyc", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"href": "http://code.google.com/appengine/docs/python/python27/newin27.html#Bytecode_Upload", "text": "bytecode upload", "childNum": 0, "tag": "a", "childList": []}]}]]