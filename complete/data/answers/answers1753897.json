[[{"text": ["You don't need to write your own stubs - the SDK includes them, since they're what it uses to emulate the production APIs.", "Not all of them are suitable for use in unit-tests, but most are.", "Check out this code for an example of the setup/teardown code you need to make use of the built in stubs."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "this code", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://gist.github.com/186251"}]}], [{"text": ["I use GAEUnit for my Google App Engine App and I am quite happy with the speed of the tests.", "The thing that I like about GAEUnit,and I am sure Webtest does it, is that it creates its own version for stubs of everything for testing leaving your \"live\" versions alone for testing."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["So your datastore that you may be using for development will be left as is when you run your GAETests."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["NoseGAE is a nose plugin that support unittests by automatically setting up the development environment and a test datastore for you.", "Very useful when developing on dev_appserver."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "NoseGAE", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://farmdev.com/projects/nosegae/"}]}], [{"text": ["I might also add that Fixture has been very useful in my unit tests.", "It lets you create models in a declarative syntax, which it converts into stored entities that you can load in your tests.", "This way you have the same data set at the beginning of every test case!, which saves you from having to create data by hand at the start of every test.", "Here is an example, from the Fixture documentation:\nGiven this model:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Fixture", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://farmdev.com/projects/fixture/using-fixture-with-appengine.html"}]}, {"code": "<pre>\n<code>\n from google.appengine.ext import db\n\nclass Entry(db.Model):\n    title = db.StringProperty()\n    body = db.TextProperty()\n    added_on = db.DateTimeProperty(auto_now_add=True)\n</code>\n</pre>\n", "senID": 1}, {"text": ["Your fixture would look like this:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n from fixture import DataSet\n\nclass EntryData(DataSet):\n    class great_monday:\n        title = \"Monday Was Great\"\n        body = \"\"\"\\\nMonday was the best day ever.\n\"\"\"\n</code>\n</pre>\n", "senID": 3}, {"text": ["Note however, that I ran into the following issues:\n1.", "This bug, but the included patch does remedy it.", "2.", "The datastore is not -by default- reset between test cases.", "So I use this to force a reset for each test case:"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "This bug", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://code.google.com/p/fixture/issues/detail?id=36"}]}, {"code": "<pre>\n<code>\n class TycoonTest(unittest.TestCase):\n    def setUp(self):\n        # Clear out the datastore before starting the test.\n        apiproxy_stub_map.apiproxy._APIProxyStubMap__stub_map['datastore_v3'].Clear()    \n        self.data = self.load_data()\n        self.data.setup()\n        os.environ['SERVER_NAME'] = \"dev_appserver\"\n        self.after_setUp()\n\n    def load_data(self):\n        return datafixture.data(*dset.__all__)\n\n    def after_setUp(self):\n        \"\"\" After setup\n        \"\"\"\n        pass\n\n    def tearDown(self):\n        # Teardown data.\n        try:\n            self.data.teardown()\n        except:\n            pass\n</code>\n</pre>\n", "senID": 5}], [{"text": ["Since 1.3.1 version of SDK there is the build-in unit test framework."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "1.3.1 version of SDK", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://googleappengine.blogspot.com/2010/02/app-engine-sdk-131-including-major.html"}, {"href": "http://code.google.com/appengine/docs/java/tools/localunittesting.html", "text": "unit test framework", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["It is Java only right now but I feel like:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["So does the author of this framework - Max Ross and he explicitly tells us about it in his I/O presentation \"Testing techniques for Google App Engine\""], "childNum": 2, "tag": "p", "senID": 2, "childList": [{"text": "Max Ross", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://qconsf.com/sf2009/speaker/Max+Ross"}, {"href": "http://www.youtube.com/watch?v=bcyz3sGa1Qo", "text": "\"Testing techniques for Google App Engine\"", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["Does anyone have any updates on this topic?"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["The SDK 1.4.3 Testbed API provides easy configuration of stub libraries for local integration tests."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "SDK 1.4.3", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes"}, {"href": "http://code.google.com/intl/it-IT/appengine/docs/python/tools/localunittesting.html", "text": "Testbed API", "childNum": 0, "tag": "a", "childList": []}]}]]