[[{"text": ["Something like this, perhaps?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def mailexception(ex):\n  # Be creative.\n  print 'Mailing... NOW!'\n\ndef pokemontrainer(cls):\n  class Rye(cls):\n    def __getattribute__(self, name):\n      def catcher(func):\n        def caller(*args, **kwargs):\n          try:\n            func(*args, **kwargs)\n          except Exception, e:\n            mailexception(e)\n            raise\n        return caller\n      ref = cls.__getattribute__(self, name)\n      if hasattr(cls, name) and hasattr(getattr(cls, name), '__call__'):\n        return catcher(ref)\n  return Rye\n\n@pokemontrainer\nclass Exceptor(object):\n  def toss(self, e):\n    raise e('Incoming salad!')\n\nex = Exceptor()\nex.toss(ValueError)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Beware the wizard's apprentice!"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "the wizard's apprentice", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.youtube.com/watch?v=XChxLGnIwCU"}]}, {"text": ["It would be better to log those errors, then check to see when the last email was sent, and if the timespan is too short, do not send another message because the human being will already be looking at the log file.", "For many things, one message per day would be enough, but even for system critical things, if you have already had one failure, what could go wrong if you wait two hours to send the next email?"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If you send one email per two hour timespan, then the maximum number of emails per day is 12.", "And if you get a cascading failure (you will!", ") then it will most likely happen within a couple of hours of the first failure event."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Most large networking companies offer an SLA of 4 hour to fix a failure, measured from the time it first occurs (because cascading failures tend to repeat) until the customer is satisified that it is fixed.", "If you have a tighter SLA than that, then unless it is some finance industry service, you probably are offering too high of a service level."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["But if you do have a 4 hour SLA, then I would make sure that any email sent within 2 - 4 hours of the last email, should use whatever bells and whistles you can to prioritise it, highlight it, etc.", "For instance use the X-Priority header and put the word URGENT in the subject so that your mail client can display it in large bold red letters."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["Python stdlib has dedicated class to do what you want.", "See logging.handlers.SMTPHandler"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "logging.handlers.SMTPHandler", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}], [{"text": ["How about this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n class MyException(Exception):\n    def __init__(self):\n        SendEmail()\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I'd just subclassException and send the e-mail in the custom Exception. "], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "subclassException", "tag": "a", "pos": 0, "childList": [{"text": "Exception", "tag": "code"}], "childNum": 1, "href": "http://docs.python.org/tutorial/errors.html#user-defined-exceptions"}, {"text": "Exception", "childNum": 0, "tag": "code", "childList": []}]}], [{"text": ["Hold on a second.", "I reread your question, and suddenly feel that the answer to this problem is very simple.", "If the alternative is this:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n if problem_test():\n    SendEmail()\n    raise Exception\n</code>\n</pre>\n", "senID": 1}, {"text": ["Then why don't you just define a custom raise_email method?"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "raise_email", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n def raise_email(self, e):\n    SendEmail()\n    raise e\n</code>\n</pre>\n", "senID": 3}], [{"text": ["You can use an except hook to send an email when an exception is not caught."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["see sys.excepthook"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "sys.excepthook", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.python.org/doc//current/library/sys.html#sys.excepthook"}]}], [{"text": ["Guys, like @User said before Python has logging.handlers.SMTPHandle to send logged error message.", "Use logging module!", "Overriding exception class to send an email is a bad idea."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Quick example:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n import logging\nimport logging.handlers\n\nsmtp_handler = logging.handlers.SMTPHandler(mailhost=(\"smtp.example.com\", 25),\n                                            fromaddr=\"from@example.com\", \n                                            toaddrs=\"to@example.com\",\n                                            subject=u\"AppName error!\")\n\n\nlogger = logging.getLogger()\nlogger.addHandler(smtp_handler)\n\ntry:\n  break\nexcept Exception as e:\n  logger.error(e)\n</code>\n</pre>\n", "senID": 2}, {"text": ["Regards."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}]]