[[{"text": ["Some more things that I needed to fix:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "Where the various HOWTOs say to use ", "tag": "none", "senID": 1}, {"text": "I'd installed Python 2.7.  Mercurial 1.6.2's .pyo files were compiled with Python 2.6.  This resulted in a magic number error.  Uninstalling 2.7 and installing 2.6.5 fixed this.  (If you're reading this at some point in the future, this point may no longer be relevant - check the name of the DLL in Mercurial's directory, or TortoiseHg's directory, depending on where you took library.zip from)", "tag": "none", "senID": 2}, {"text": "hgwebdir.cgi is now just hgweb.cgi - webdir was integrated into it", "tag": "none", "senID": 3}]}], [{"text": ["Finally I got that \"no headers\" error returned on any python script error, so I checked script with console interpreter and fixed errors in my config file.", "And of course I should ask this question at ServerFault instead of StackOverflow - the lack of sleep did the job :) "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["In my situation, this error caused by line application = hgwebdir('c:\\somewhere\\hgweb.config') in hgweb.cgi, it should be application = hgweb('c:\\somewhere\\hgweb.config').  "], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "application = hgwebdir('c:\\somewhere\\hgweb.config')", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "application = hgweb('c:\\somewhere\\hgweb.config')", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Besides, uncomment line import cgitb; cgitb.enable() in hgweb.cgi will give you more info about the error( and other errors)."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "import cgitb; cgitb.enable()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["P.S.", "I use Python 2.6.6 and Mercurial 1.7.3 on Windows Server 2003 with IIS 6.0."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["In my case, the critical step that fixed it was using: c:\\whatever\\Python26\\python.exe -u -O -B \"%s\" \"%s"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Before that it was not working with the error: "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n A problem occurred in a Python script. Here is the sequence of function calls leading up to the error, in the order they occurred.\n\n c:\\hg\\hgweb.cgi in ()\n   13 import cgitb; cgitb.enable()\n   14 \n   15 from mercurial import demandimport; demandimport.enable()\n   16 from mercurial.hgweb import hgweb, wsgicgi\n   17 application = hgweb(config)\nmercurial undefined, demandimport undefined\n&lt;type 'exceptions.ImportError'&gt;: No module named mercurial \n      args = ('No module named mercurial',)\n</code>\n</pre>\n", "senID": 2}], [{"text": ["There's a pretty good post at http://vampirebasic.blogspot.com/2009/06/running-mercurial-on-windows.html that'll get you started, but if you need more detail or to go further than the writer did, I've got a 4 part blog post that covers everything you need to know about getting up and running on IIS, including Active Directory integration, pull/push privileges, customization of the UI:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "http://vampirebasic.blogspot.com/2009/06/running-mercurial-on-windows.html", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://vampirebasic.blogspot.com/2009/06/running-mercurial-on-windows.html"}]}, {"text": ["http://www.endswithsaurus.com/2010/05/setting-up-and-configuring-mercurial-in.html"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "http://www.endswithsaurus.com/2010/05/setting-up-and-configuring-mercurial-in.html", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.endswithsaurus.com/2010/05/setting-up-and-configuring-mercurial-in.html"}]}, {"text": ["It's worth a read..."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["I have just finished setting up Mercurial on IIS6, and suggest going down the ISAPI route, not CGI.", "I found CGI very unstable.", "He a look at my blog entry : http://hyperionchaos.net/blog , and see if it helps."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "", "childNum": 0, "tag": "br", "pos": 0, "childList": []}, {"text": "http://hyperionchaos.net/blog", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://hyperionchaos.net/blog"}]}]]