[[{"text": ["First, realize I cannot give you a complete list.", "If you were to ask \"why are screwdrivers useful?", "\", I would would talk about screws and paint can lids but would miss their value in termite inspection.", "When you ask, \"Why are nested functions useful?", "\", I can tell you about scoping, closures, and entry points."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["First, nesting can be an alternative to classes.", "I recently wrote some rendering code that took a file name for specialized mark-up code and returned a bitmap.", "This naturally lead to functions named grab_markup_from_filename() and render_text_onto_image() and others.", "The cleanest organization was one entry point named generate_png_from_markup_filename().", "The entry point did its job, using nested functions to accomplish its task.", "There was no need for a class, because there was no object with state.", "My alternative was to create a module with private methods hiding my helpers, but it would be messier."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n def generate_png_from_markup_filename(filename):\n    def grab_markup_from_filename():\n        ... \n    ... # code that calls grab_markup_from_filename() to make the image\n    return image\n</code>\n</pre>\n", "senID": 2}, {"text": ["Second, I use nesting for closures.", "The most common example is for creating decorators.", "The trick is that I return a reference to an inner function, so that inner function and the outer parameter value are not garbage collected."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n def verify_admin(function_to_call):\n    def call_on_verify_admin(*args, **kwargs):\n        if is_admin(global.session.user):\n            return function_to_call(*args, **kwargs)\n        else:\n           throw Exception(\"Not Admin\")\n    return call_on_verify_admin  # the return value of verify_admin()\n</code>\n</pre>\n", "senID": 4}, {"text": ["use it this way:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n def update_price(item, price):\n     database.lookup(item).set_field('price', price)\n update_price = verify_admin(update_price)\n</code>\n</pre>\n", "senID": 6}, {"text": ["or, more concisely:"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n @verify_admin\n def update_price(item, price):\n     database.lookup(item).set_field('price', price)\n</code>\n</pre>\n", "senID": 8}, {"text": ["And yes, it should be hard to trace.", "Remember that \"def\" is just another statement."], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"text": ["So, here are two places nested classes are helpful.", "There are more.", "It is a tool."], "childNum": 0, "tag": "p", "senID": 10, "childList": []}], [{"text": ["Nested methods are useful because there are many cases where you want to pass behaviour around, rather than just data.", "In many instances, it is clearer and easier to follow, in addition to being easier and faster to write, to just define that behaviour in the body of your method, where you are going to use it."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "behaviour", "childNum": 0, "tag": "em", "pos": 0, "childList": []}, {"text": "data", "childNum": 0, "tag": "em", "pos": -1, "childList": []}]}, {"text": ["In .NET, LINQ is a great example of this.", "Suppose you wanted to create a list where each value was double its value in the original list: "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n list.Select(i =&gt; i*2)\n</code>\n</pre>\n", "senID": 2}, {"text": ["where i =&gt; i*2 is equivalent to:"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "i =&gt; i*2", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n Func&lt;int,int&gt; double = delegate(int x) { return x*2; }\n</code>\n</pre>\n", "senID": 4}, {"text": ["This is much simpler and clearer than creating a separate function.  "], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "much", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}, {"text": ["Further, the function you declare may not have meaning elsewhere (ie, outside the scope of your method).", "In C#, you can even reference to variables declared inside your method body -- which you cannot do with a non-nested function."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["Of course, you can also abuse nested functions..."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["Nested methods also allow you to control scope of the caller as well as allowing you to access internally created members without them being exposed to other functions in a similar scope (i.e.", "inside of a class)"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Try this Pythonish pseudocode example for a glimpse at one use-case for this technique:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n def MyMethod(base):\n    base = expensivePreparation(base)\n    def MyInnerMethod(some_modifier):\n        doSomethingCoolWith(base, some_modifier)\n\n    return MyInnerMethod\n\nprocess = MyMethod(some_obj)\nprocess(arg1)\nprocess(arg2)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["Along the above mentioned points,\n  - these can be treated as Higer order functions,  functions that themselves take or return functions."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "Higer order functions", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["Checkout the sample."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n static void Main(string[] args)\n    {\n\n        Func&lt;int, int&gt; NestedMethod = delegate(int x)     \n        {             Console.WriteLine(\"In nested method. Value of x is {0}.\", x);        \n            return x;         \n        };\n\n        HigerOrderTest(NestedMethod)();\n    }\n\n     private static Action HigerOrderTest(Func&lt;int, int&gt; highFunction)\n    {\n          var sam = highFunction(3);\n\n          Action DoIt =() =&gt;\n          {\n              Console.WriteLine(\"Output is {0}.\", sam);    \n          };\n             return DoIt;\n    }\n</code>\n</pre>\n", "senID": 2}], [{"text": ["Nested methods increase locality of your code which is a good thing as you don't have to pollute classes with small private methods used only in one place."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["Many useful answers here already, but here goes."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": "inner classes: not!  nice try, but too much make-work.  Nested functions / procs are much quicker and to the point.  King Java's [1] classes with one method [2] really suck, and nested functions (or procedures) circumvent such syntactic nonsense.", "tag": "none", "senID": 1}, {"text": "functional decomposition:  break a long routine into smaller ones, which are hidden from other places where they aren't used.  Pascal supported this eons ago, and I'm pretty sure it wasn't a new invention even then (early 70s).", "tag": "none", "senID": 2}, {"text": "closures: mentioned elsewhere, but useful.  use local variables in the enclosing function to initialize the generated function, and return a customized function (or otherwise use the generated code)", "tag": "none", "senID": 3}]}, {"text": ["1: http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html \"King Java\""], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://steve-yegge.blogspot.com/2006/03/execution-in-kingdom-of-nouns.html"}]}, {"text": ["2: http://en.wikipedia.org/wiki/Function%5Fobject#In%5FJava \"Function object / functor\""], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "http://en.wikipedia.org/wiki/Function%5Fobject#In%5FJava", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Function%5Fobject#In%5FJava"}]}], [{"text": ["You are perhaps already aware of the usefulness of passing functions to other functions, for example, providing a sort() routine with a comparison function, and the obvious examples of map() and filter() and so on.", "Likewise, it is often useful to receive functions as a result from another function.", "The most common usage is for closures, but currying is also common.  "], "childNum": 5, "tag": "p", "senID": 0, "childList": [{"text": "sort()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "map()", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "filter()", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "closures", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://en.wikipedia.org/wiki/Closure%5F%28computer%5Fscience%29"}, {"href": "http://en.wikipedia.org/wiki/Currying", "text": "currying", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["A central benefit of a closure is being able to create a new function at runtime that contains all the temporal information required for its execution at that point in time.", "In language implementations that don't support closures, such state management is usually done, arguably less elegantly, via classes: object instance variables are set, and then later read when needed.", "Closures provide a means to bundle the state with the action."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "with", "childNum": 0, "tag": "em", "pos": 2, "childList": []}]}, {"text": ["So as a basic point of understanding, it may help to think of nested functions as a way to write on-the-spot functions to perform very specific actions where the details of those actions will be known at runtime, but you only want to execute that action at some later time."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["There are other things that can be done with nested functions, but you have to start somewhere."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}]]