[[{"text": ["As explained by others, the backslashes are escaping double quote characters you insert into the cookie value.", "The (hidden) mechanism in action here is the SimpleCookie class.", "The BaseCookie.output() method returns a string representation suitable to be sent as HTTP headers.", "It will insert escape characters (backslashes) before double quote characters and before backslash characters."], "childNum": 5, "tag": "p", "senID": 0, "childList": [{"text": "SimpleCookie", "tag": "a", "pos": 1, "childList": [{"text": "SimpleCookie", "tag": "code"}], "childNum": 1, "href": "http://docs.python.org/library/cookie.html#Cookie.SimpleCookie"}, {"text": "SimpleCookie", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "BaseCookie.output()", "tag": "a", "pos": 2, "childList": [{"text": "BaseCookie.output()", "tag": "code"}], "childNum": 1, "href": "http://docs.python.org/library/cookie.html#Cookie.BaseCookie.output"}, {"text": "BaseCookie.output()", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "before backslash characters", "childNum": 0, "tag": "strong", "pos": 3, "childList": []}]}, {"text": ["The"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n print cookie\n</code>\n</pre>\n", "senID": 2}, {"text": ["statement activates BaseCookie.output()."], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "BaseCookie.output()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["On each trip your string makes through the cookie's output() method, backslashes are multiplied (starting with the 1st pair of quotes)."], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "output()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n &gt;&gt;&gt; c1=Cookie.SimpleCookie()\n&gt;&gt;&gt; c1['name']='A:0'\n&gt;&gt;&gt; print c1\nSet-Cookie: name=\"A:0\"\n&gt;&gt;&gt; c1['name']=r'\"A:0\"'\n&gt;&gt;&gt; print c1\nSet-Cookie: name=\"\\\"A:0\\\"\"\n&gt;&gt;&gt; c1['name']=r'\"\\\"A:0\\\"\"'\n&gt;&gt;&gt; print c1\nSet-Cookie: name=\"\\\"\\\\\\\"A:0\\\\\\\"\\\"\"\n&gt;&gt;&gt;\n</code>\n</pre>\n", "senID": 5}], [{"text": ["I'm not sure, but it looks like regular Python string escaping.", "If you have a string containing a backslash or a double quote, for instance, Python will often print it in escaped form, to make the printed string a valid string literal."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The following snippet illustrates:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n &gt;&gt;&gt; a='hell\\'s bells, \\\"my\\\" \\\\'\n&gt;&gt;&gt; a\n'hell\\'s bells, \"my\" \\\\'\n&gt;&gt;&gt; print a\nhell's bells, \"my\" \\\n</code>\n</pre>\n", "senID": 2}, {"text": ["Not sure if this is relevant, perhaps someone with more domain knowledge can chime in."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["The slashes result from escaping the double quotes.", "Apparently, the first time through, your code is seeing the double quote, and escaping it by adding a back-slash.", "Then it reads the escaped backslash, and escapes the backslash by prepending it with -- a backslash.", "Then it reads...."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The problem is happening when you call append."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["As others have already said, you are experiencing string escaping issues as soon as you add \"and more\" onto the end of the cookie."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Until that point, the cookie header is being returned from the SimpleCookie without enclosing quotes.", "(If there are no spaces in the cookie value, then enclosing quotes are not needed."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n # HTTP cookie header with no spaces in value\nSet-Cookie: cookie=value\n\n# HTTP cookie header with spaces in value\nSet-Cookie: cookie=\"value with spaces\"\n</code>\n</pre>\n", "senID": 2}, {"text": ["I would suggest using the same SimpleCookie class to parse the cookie header initially, saving you from doing it by hand, and also handling unescaping the strings properly."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n cookies = Cookie.SimpleCookie(os.environ.get('HTTP_COOKIE', ''))\nprint cookies['critter'].value\n</code>\n</pre>\n", "senID": 4}, {"text": ["edit: This whole deal with the spaces does not apply to this question (although it can in certain circumstances come and bite you when you are not expecting it.", ") But my suggestion to use the SimpleCookie to parse still stands."], "childNum": 2, "tag": "p", "senID": 5, "childList": [{"text": "edit", "childNum": 1, "tag": "strong", "pos": 0, "childList": [{"text": "edit", "tag": "em"}]}, {"text": "edit", "childNum": 0, "tag": "em", "pos": -1, "childList": []}]}], [{"text": ["Backslashes are used for \"escaping\" characters in strings that would otherwise have special meaning, in effect depriving them of their special meaning.", "The classic case is the way you can include quotes in quoted strings, such as:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n Bob said \"Hey!\"\n</code>\n</pre>\n", "senID": 1}, {"text": ["which can be written as a string this way:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n \"Bob said \\\"Hey!\\\"\"\n</code>\n</pre>\n", "senID": 3}, {"text": ["Of course, you may want to have a regular backslash in there, so \"\\\" just means a single backslash."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["EDIT: In response to your comment on another answer (about using a regexp to remove the slashes) I think you're picking up the wrong end of the stick.", "The slashes aren't the problem, they are a symptom.", "The problem is that you're doing round trips treating strings representing quoted strings as if they were plain old strings.", "Imagine two friends, Bob and Sam, having a conversation:"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "EDIT:", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n Bob:  Hey!\nSam:  Did you say \"Hey!\"?\nBob:  Did you say \"Did you say \\\"Hey!\\\"?\"?\n</code>\n</pre>\n", "senID": 6}, {"text": ["That's why the don't show up until the third time."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["Others have already pointed out that this is a result of backslash-escapes of quotes and backslashes.", "I just wanted to point out that if you look carefully at the structure of the output you cite, you can see how the structure is being built here."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The cookie value that you're getting from SimpleCookie is wrapped in quotes -- the (unprocessed) cookie has, e.g., "], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "SimpleCookie", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n `'[...], critter=\"value1\", [...]'`\n</code>\n</pre>\n", "senID": 2}, {"text": ["After you split on ', ' and '=', you have a string that contains \"value1\".", "You then append a new value to that string, so that the string contains \"value1\":value2."], "childNum": 4, "tag": "p", "senID": 3, "childList": [{"text": "', '", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "'='", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "\"value1\"", "childNum": 0, "tag": "code", "pos": 1, "childList": []}, {"text": "\"value1\":value2", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["The next time through, you get that string back, but with another set of quotes wrapping it -- conceptually, \"\"value1\":value2\".", "But in order to make it so that a web browser will not see two quote characters at the beginning and think that's all there is, the inner set of quotes is being escaped, so it's actually returned as \"\\\"value1\\\":value2\"."], "childNum": 2, "tag": "p", "senID": 4, "childList": [{"text": "\"\"value1\":value2\"", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "\"\\\"value1\\\":value2\"", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["You then append yet another chunk, make another pass back and forth between server and client, and the next time (because those backslashes need escaped now too) you get \"\\\"\\\\\"value1\\\\\":value2\\\":value3\".", "And so on."], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "\"\\\"\\\\\"value1\\\\\":value2\\\":value3\"", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["The correct solution, as has already been pointed out, is to let SimpleCookie do the parsing instead of chopping up the strings yourself."], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "SimpleCookie", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}]]