[[{"text": ["Project Euler isn't fond of discussing problems on public forums like StackOverflow.", "All tasks are made to be done solo, if you encounter problems you may ask help for a specific mathematical or programming concept, but you can't just decide to ask how to solve the problem at hand - takes away the point of project Euler."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Point is to learn and come up with solutions yourself, and learn new concepts."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["Let me continue what jug started, but try a somewhat different approach.", "The goal again is to just find the numbers that have two distinct factors n=pq.", "As you already pointed out we are looking for the numbers such that n-phi(n) divides n-1.", "I.e., if n=pq then that means we are looking for p,q such that"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n p+q-1 divides pq-1\n</code>\n</pre>\n", "senID": 1}, {"text": ["Assume we fix p and are looking for all primes q satisfying the equation above.", "The equation above doesn't look very easy to solve, hence the next step is to eliminate q as much as possible.", "In particular, we use that if a divides b then a also divides b + ka for any integer k. Hence "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n p+q-1 divides pq - 1 - p(p+q-1)\n</code>\n</pre>\n", "senID": 3}, {"text": ["and simplifying this leads to the condition "], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n p+q-1 divides p^2 - p + 1.\n</code>\n</pre>\n", "senID": 5}, {"text": ["We may assume that p is the smaller prime factor of n. Then p is smaller than the square root of 1011.", "Hence it is possible to find all numbers with two factors by iterating through all primes p below the square root of 1011, then find the divisors of p^2-p+1, solve for q and check if q is prime and pq is a solution of the problem."], "childNum": 2, "tag": "p", "senID": 6, "childList": [{"text": "11", "childNum": 0, "tag": "sup", "pos": 0, "childList": []}, {"text": "11", "childNum": 0, "tag": "sup", "pos": 1, "childList": []}]}, {"text": ["This of course, still leaves the integers with more than two prime factors.", "A somewhat similar approach works here too, but is more involved and needs further optimizations."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["One question I can't answer is why is this problem formulated so complicated.", "Couldn't the authors just have asked for the sum of composite integers where n-phi(n) divides n-1.", "So maybe I'm missing a big hint there."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"tag": "hr", "senID": 9}, {"text": ["Now, that the solutions with two prime factors are known, I'll try to find a potential algorithm for finding solutions with more than 2 prime factors.", "The goal is to find an algorithm that given a composite integer m finds all primes q such that mq is a solution.", "I.e., q must be such that"], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"code": "<pre>\n<code>\n mq - phi(mq) divides mq - 1.\n</code>\n</pre>\n", "senID": 11}, {"text": ["Let "], "childNum": 0, "tag": "p", "senID": 12, "childList": []}, {"code": "<pre>\n<code>\n F = mq - phi(mq).\n</code>\n</pre>\n", "senID": 13}, {"text": ["Then of course "], "childNum": 0, "tag": "p", "senID": 14, "childList": []}, {"code": "<pre>\n<code>\n F = (m-phi(m)) q + phi(m).\n</code>\n</pre>\n", "senID": 15}, {"text": ["As in the case of two prime factors it is possible to find a condition for F, by eliminating q from the left hand side of the equation above.", "Since F divides mq-1 it also divides "], "childNum": 0, "tag": "p", "senID": 16, "childList": []}, {"code": "<pre>\n<code>\n (m-phi(m))(mq - 1)\n</code>\n</pre>\n", "senID": 17}, {"text": ["and hence also "], "childNum": 0, "tag": "p", "senID": 18, "childList": []}, {"code": "<pre>\n<code>\n m F - (m-phi(m))(mq - 1)  = m phi(m) + m - phi(m).\n</code>\n</pre>\n", "senID": 19}, {"text": ["Thus by finding all the divisors F of m phi(m) + m - phi(m) and by checking if \n(F - phi(m))/ (m - phi(m)) is prime it is possible to find all solutions mq for a given m.\nSince only the divisors F that satisfy"], "childNum": 0, "tag": "p", "senID": 20, "childList": []}, {"code": "<pre>\n<code>\n F == phi(m) (mod m - phi(m))\n</code>\n</pre>\n", "senID": 21}, {"text": ["can lead to new solutions, this fact can somtimes be used to optimze the factorization of\nm phi(m) + m - phi(m)."], "childNum": 0, "tag": "p", "senID": 22, "childList": []}], [{"text": ["Multiply primes.", "What I did, is first check every 2-prime product; store the ones that are successes.", "Then using the stored products, check those with more primes (every 3-prime product shown in your brute force has a 2-prime subset that works).", "Use these stored products, and try again with 4 primes, 5 primes etc."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The only downside is that you need a good sieve or list of primes."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Here is a list of the ones for N&lt;=(10^7):"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["2 primes\n15,85,259,391,589,1111,3193,4171,4369,12361,17473,25429,28243,47989,52537,65641,\n68377,83767,91759,100777,120019,144097,186367,268321,286357,291919,316171,327937\n,346063,353029,360301,404797,406867,524851,531721,558013,563767,633727,705667,73\n8607,910489,970141,1013539,1080769,1093987,1184233,1185421,1223869,1233823,12618\n07,1264693,1455889,1487371,1529641,1574383,1612381,1617379,1657531,1793689,20163\n79,2095087,2130871,2214031,2299459,2500681,2553709,2609689,2617963,2763697,30475\n21,3146677,3397651,3514603,3539017,3820909,3961219,4078927,4186993,4197901,44997\n07,4552411,4935883,4975687,5103841,5299351,5729257,5829877,5864581,6017299,62364\n01,6802531,6856609,8759011,9059233,9203377,9301603,9305311,9526747,9536899,95832\n79,9782347,9900217\n3 primes\n255,21845,335923,3817309\n4 primes\n65535\n5 primes\n83623935"], "childNum": 4, "tag": "p", "senID": 3, "childList": [{"text": "2 primes", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}, {"text": "3 primes", "childNum": 0, "tag": "strong", "childList": []}, {"text": "4 primes", "childNum": 0, "tag": "strong", "childList": []}, {"text": "5 primes", "childNum": 0, "tag": "strong", "childList": []}]}], [{"text": ["In order not to give too much away, I'd suggest two things:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "hr", "senID": 1}, {"text": ["EDIT: The patterns you wll find will only add to your understading, and hopefully show you how you could have achieved the same amount of knowledge by an adequate manipulation of the analytical expression.", "Without knowing that pattern, I'm afraid that there is no path to a solution.", "Plus, this is probably among the hardest Project Euler problems, so you need not worry about finding the solution without a lot of sweat and toil..."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["I haven't found a full solution, but I would like to share my thoughts.", "Perhaps someone could help."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["I believe that one should try to reduce the problem to"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21O%28%5Csqrt%7Bn%7D%29.gif", "tag": "img", "senID": 2}, {"text": ["complexity.The following facts can be used to make the search more effective:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": "Any solution must be an odd number", "tag": "none", "senID": 4}, {"text": "Any solution must be a multiple of distinct primes (no square number factors are allowed)", "tag": "none", "senID": 5}]}, {"text": ["Others have pointed out about these and it is easy to prove them using only the basic properties of the totient function."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["I'll start by analyzing all prime and composite numbers up to sqrt(10^11).", "This is not a big task and the time required should be well below the 1 minute requirement.", "All solutions above the square root are of the form:"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n a*b, where at least one of a,b &lt; sqrt(10^11)\n</code>\n</pre>\n", "senID": 8}, {"text": ["While iterating the range 0..sqrt(10^11), I will search for multiples of the number in iteration that are solutions.", "I will only cover the case of multiplying a number below the square root with a single prime.", "The solution set I will get this way will be a superset of the two-prime factors solution set.", "It will still not be the complete solution set, as solutions of the form p1*p2*p3, where p1p2,p2p3,p1p3>sqrt(10^11) will not be found."], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"text": ["Let b be the number below the square root and a the prime to multiply it."], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21b%20%3D%20k%5F%7Bb%7D%5Bb%20-%20%5Cphi%28b%29%5D%20%2B%20m%5F%7Bb%7D.gif", "tag": "img", "senID": 11}, {"text": ["We have:"], "childNum": 0, "tag": "p", "senID": 12, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21ab%20%3D%20k%5F%7Bb%7D%5Bab%20-%20a%5Cphi%28b%29%5D%20%2B%20am%5F%7Bb%7D.gif", "tag": "img", "senID": 13}, {"text": ["Based on the facts that "], "childNum": 0, "tag": "p", "senID": 14, "childList": []}, {"code": "<pre>\n<code>\n phi(a) = a - 1 and phi(a)*phi(b) = phi(a*b) if a, b coprime\n</code>\n</pre>\n", "senID": 15}, {"text": ["we have"], "childNum": 0, "tag": "p", "senID": 16, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21ab%20%3D%20k%5F%7Bb%7D%5Bab%20-%20%5Cphi%28ab%29%5D%20-%20k%5F%7Bb%7D%5Cphi%28b%29%20%2B%20am%5F%7Bb%7D.gif", "tag": "img", "senID": 17}, {"text": ["The 'modulo' part on the right can be written as:"], "childNum": 0, "tag": "p", "senID": 18, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21m%20%3D%20am%5F%7Bb%7D%20-%20k%5F%7Bb%7D%5Cphi%28b%29%20%3D%20%28a-1%29m%5F%7Bb%7D%20-%20%28k%5F%7Bb%7D-1%29b.gif", "tag": "img", "senID": 19}, {"text": ["Let me temporarily accept that "], "childNum": 0, "tag": "p", "senID": 20, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%210%20%5Cleq%20m%20%5Cleq%20ab%20-%20%5Cphi%28ab%29.gif", "tag": "img", "senID": 21}, {"text": ["Then I could solve the above equation for a (m=1), verify that the result is prime and then I will have the only solution that is a multiple of b.", "If the m is not within the limits to be the actual modulo, then I need to either solve the equation for different values of k:"], "childNum": 0, "tag": "p", "senID": 22, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21%28k-1%29%28ab%20-%20%5Cphi%28ab%29%29%20%5Cleq%20m%20%5Cleq%20k%28ab%20-%20%5Cphi%28ab%29%29.gif", "tag": "img", "senID": 23}, {"text": ["(k values must be somehow limited) or prove that in that case the will be a higher b &lt; sqrt(10^11) to cover for this."], "childNum": 0, "tag": "p", "senID": 24, "childList": []}, {"text": ["There is a special case for b prime or b composite and mb = 0.", "In that case:"], "childNum": 0, "tag": "p", "senID": 25, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21m%20%3D%20-%28k%5F%7Bb%7D%20-%201%29b.gif", "tag": "img", "senID": 26}, {"text": ["This can be calculated.", "For b a prime number:"], "childNum": 0, "tag": "p", "senID": 27, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21m%20%3D%20-%28b%20-%201%29b.gif", "tag": "img", "senID": 28}, {"text": ["I need to find a prime a that satisfies the equation:"], "childNum": 0, "tag": "p", "senID": 29, "childList": []}, {"src": "http://www.texify.com/img/%5CLARGE%5C%21k%5Bab%20-%20%28a-1%29%5Cphi%28b%29%5D%20%2B%20m%20%20%3D%201%2C%20k%20%3D%201%2C2%2C....gif", "tag": "img", "senID": 30}, {"text": ["For example, let b=3, phi(b)=2."], "childNum": 0, "tag": "p", "senID": 31, "childList": []}, {"text": ["I need to solve:"], "childNum": 0, "tag": "p", "senID": 32, "childList": []}, {"text": ["k[3a-2(a-1)] - 6 = 1 => k(a + 2) = 5"], "childNum": 0, "tag": "p", "senID": 33, "childList": []}, {"text": ["For k=1, a=7, a prime (solution)\nFor all other values of k, the above equation can't be satisfied."], "childNum": 0, "tag": "p", "senID": 34, "childList": []}], [{"text": ["no direct help for this problem, but maybe interesting for future math projects: instead of using WolframAlpha to analyze the sequence, I'd recommend \"The On-Line Encyclopedia of Integer Sequences\" on research.att.com."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "\"The On-Line Encyclopedia of Integer Sequences\"", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.research.att.com/~njas/sequences/"}]}, {"text": ["Have fun solving all Euler problems!"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}]]