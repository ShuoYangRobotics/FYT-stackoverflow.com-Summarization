[[{"text": ["ast uses compile to generate abstract syntax trees from Python source code.", "These are used by modules such as pyflakes to parse and validate Python."], "childNum": 3, "tag": "p", "senID": 0, "childList": [{"text": "ast", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "compile", "childNum": 0, "tag": "code", "pos": -1, "childList": []}, {"text": "pyflakes", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n def parse(expr, filename='&lt;unknown&gt;', mode='exec'):\n    \"\"\"\n    Parse an expression into an AST node.\n    Equivalent to compile(expr, filename, mode, PyCF_ONLY_AST).\n    \"\"\"\n    return compile(expr, filename, mode, PyCF_ONLY_AST)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["The standard library has an instructive example of how to use exec.", "collections.namedtuple uses it to build a class dynamically."], "childNum": 2, "tag": "p", "senID": 0, "childList": [{"text": "exec", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "collections.namedtuple", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://svn.python.org/view/python/trunk/Lib/collections.py?revision=79962&view=markup"}]}, {"code": "<pre>\n<code>\n template = '''class %(typename)s(tuple):\n    '%(typename)s(%(argtxt)s)' \\n\n    __slots__ = () \\n\n    _fields = %(field_names)r \\n\n    def __new__(_cls, %(argtxt)s):\n        'Create new instance of %(typename)s(%(argtxt)s)'\n        return _tuple.__new__(_cls, (%(argtxt)s)) \\n\n    ...'''\n\n   namespace = dict(_itemgetter=_itemgetter, __name__='namedtuple_%s' % typename,\n                     OrderedDict=OrderedDict, _property=property, _tuple=tuple)\n   try:\n       exec template in namespace\n   except SyntaxError, e:\n       raise SyntaxError(e.message + ':\\n' + template)\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I'll give an example in which I have used eval and where I think it was the best choice."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "eval", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["I was writing a simple software testing utility ... something to test whether student exercises were conforming to the assignment requirements.", "The goal was to provide a way for a simple configuration file to serve as a test specification (to get around a \"chicken-and-egg\" issue of using a programming language to describe/document/implement the test cases for elementary programming assignments)."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["I based my harness on the ConfigParser in the standard libraries.", "However, I did want the ability to represent arbitrary Python strings (including interpolations of \\n, \\t, and especially any interpolated hex encoded ASCII characters in the values read therefrom."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["My solution was a try around an parsed_string=eval('''%s''' % cfg_read_item) followed by a try of the triple double-quoted version (\"\"\"%s\"\"\") of the same."], "childNum": 3, "tag": "p", "senID": 3, "childList": [{"text": "try", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "parsed_string=eval('''%s''' % cfg_read_item)", "childNum": 0, "tag": "code", "childList": []}, {"text": "try", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["This is a case where the alternative would have been to write (or find a pre-written) Python language parser and figure out how to include and adapt it to my program.", "The risks are minimal (I'm not worried that student submitted code is going to trick my parser, break out if its jail, delete all my files, send my credit card numbers to Romania and so on)*"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["*(In part because I was testing them under Linux from an untrusted headless user account)."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["As here others have said, there are other use cases where you're building code from a template based on input data and need to execute that code (meta programming).", "You should always be able to accomplish those tasks in another way.", "However, whenever that alternative entails coding effort that approaches writing a general programming language parser/compiler/interpreter .... then eval may be the better approach.  "], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "eval", "childNum": 0, "tag": "code", "pos": 2, "childList": []}]}], [{"text": ["Are you just asking for an example?", "You could write a simple app that reads from standard in and allows the user to input various expressions, like (4*2)/8 - 1.", "In other languages (Java, C++, etc.", ") this would be close to impossible to evaluate, but in python it is simple, just:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "(4*2)/8 - 1", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"code": "<pre>\n<code>\n eval((4*2)/8 - 1)\n</code>\n</pre>\n", "senID": 1}, {"text": ["That being said, unless you are careful, using these things can be very dangerous as they (essentially)allow the user a huge amount of access."], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "very", "childNum": 0, "tag": "em", "pos": 0, "childList": []}]}], [{"text": ["This is used in meta-programming (when the program writes itself).", "For example, you have animals of different species, which are described with different classes: Lion, Tiger, Horse, Donkey.", "And you want to simulate crossbreeding between them, for exampe, between Lion and Tiger.", "When you write the program, you can not determine how the user will cross the animals, but you can create new classes of animals on the fly:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n new_class_name = boy.class.to_str() + girl.class.to_str()\neval(\"class \" + new_class_name + \" extends \" + boy.class.to_str() + \", \" + girl.class.to_str())\n</code>\n</pre>\n", "senID": 1}, {"text": ["P. S. Sorry, I forgot Python some.", "So there is a bunch of pseudo-code."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["You don't need to use them, and in my opinion you should avoid them."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "don't need", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["They are only useful in cases where you are generating the code itself, which in the end is going to most likely be considered bad practice."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["If you are considering using eval() for things like mathematical expressions, you would be better sanitizing the input before evaluating it.", "You never know what kind of 'text' the user sends in that might screw up the application itself."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["Here's a valid use case.", "In the python paste middleware (for web programming) when an exception is raised it creates a command line within the browser.", "This works be using methods like these.", "Also, in Blender there is an option to animate values using python expressions and this works using eval."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}]]