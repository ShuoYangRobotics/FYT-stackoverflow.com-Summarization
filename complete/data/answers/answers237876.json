[[{"text": ["It feels like what you really want is a class representing the weapon, with attributes to handle the base values and calculate hit values with various modifiers.", "Here's a simple example:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n SHORT_RANGE = 'S'\nMEDIUM_RANGE = 'M'\nLONG_RANGE = 'L'\nSHORT_RANGE_MODIFIER = 0.6\nMEDIUM_RANGE_MODIFIER = 0.3\nLONG_RANGE_MODIFIER = 0.1\n\nclass Weapon(object):\n    def __init__(self, code_name, full_name, base_hit_value,\n                 short_range_modifier=None, medium_range_modifier=None,\n                 long_range_modifier=None):\n        self.code_name, self.full_name = code_name, full_name\n        self.base_hit_value = base_hit_value\n        self.range_modifiers = {\n            SHORT_RANGE: short_range_modifier or SHORT_RANGE_MODIFIER,\n            MEDIUM_RANGE: medium_range_modifier or MEDIUM_RANGE_MODIFIER,\n            LONG_RANGE: long_range_modifier or LONG_RANGE_MODIFIER,\n        }\n\n    def hit_value(self, range, modifier=1):\n        return self.base_hit_value * self.range_modifiers[range] * modifier\n</code>\n</pre>\n", "senID": 1}, {"text": ["From there, you might create instances of Weapon inside your Character object like so:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n self.rifle = Weapon('CRM', 'rifle', 5)\n    self.pistol = Weapon('PST', 'pistol', 10)\n</code>\n</pre>\n", "senID": 3}, {"text": ["And then if, say, the character fires the pistol at short range:"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"code": "<pre>\n<code>\n hit_value = self.pistol.hit_value(SHORT_RANGE)\n</code>\n</pre>\n", "senID": 5}, {"text": ["The extra argument to the hit_value() method can be used to pass in character- or situation-specific modifications."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["Of course, the next step beyond this would be to directly model the weapons as subclasses of Weapon (perhaps breaking down into specific types of weapons, like guns, bows, grenades, etc., each with their own base values) and add an Inventory class to represent the weapons a character is carrying."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["All of this is pretty standard, boring object-oriented design procedure, but for plenty of situations this type of thinking will get you off the ground quickly and provide at least a little bit of basic flexibility."], "childNum": 0, "tag": "p", "senID": 8, "childList": []}], [{"text": ["Lets see if I understand you scenario:  each weapon has its own distinct hit point so a rifle may have 1, a heavy weapon may have 2 etc.", "Then each character has a short, medium and long value to be multiplied by the hit point of the weapon."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["You should consider using a Strategy design.", "That is create a weapon superclass with a hit point property.", "Create sub class weapons for rifle, pistol, bow etc.", "I am sure that the differences between the weapons are more than just the hit points."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Then the Character has one or more weapons depending on your gameplay.", "To calculate the hit point for a particular weapon is as simple as"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n current_weapon * self.medium\n</code>\n</pre>\n", "senID": 3}, {"text": ["If you decide to add more weapons later on then you do not have to edit your Character code because your character can handle any weapon."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["In Pseudo Python"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n class Weapon\n    hit = 1\n    #other properties of weapon\n\nclass Rifle(Weapon)\n    #other properties of Rifle\n\nclass Pistol(Weapon)\n    #other properties of Pistol\n\nclass Character\n   weapon = Rifle()\n   long=0.6\n   def calcHit()\n      return self.long*weapon.hit\n\njohn = Character()\njohn.weapon= Rifle()\njohn.calcHit\n</code>\n</pre>\n", "senID": 6}], [{"text": ["@Vinko: perhaps make calcBaseHitNumbers, do the \"if not self.calculatedBase:\" check internally, and just no-op if it's been done before.", "That said, I can't see the pressing need for precalculating this information.", "But I'm no Python performance expert."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"text": ["What sense of dynamic do you mean?", "What is likely to vary - the number of skills, or the weighting factors, the number of ranges (short, med, long) or all of these?"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["What happens to the (e.g.", ") bhPST_* values afterwards - do they get combined into one number?"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["One thing that leaps out is that the list of skills is hardwired in the code - I would be inclined to replace the bh variables with a method"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["So (please take into account I don't know the first thing about Python :) )"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\n<code>\n def bh_short(self, key)\n  skill = self.skill_dict.get(key, 0)\n  return skill * 0.6\n</code>\n</pre>\n", "senID": 4}, {"text": ["Now you can keep  a list of skills that contribute to hit points and iterate over that calling bh_short etc."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["Possibly also pass the range (long med short) unto the function, or return all three values - this all depends on what you're going to do next with the calculated hitpoints."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["Basically, we need more information about the context this is to be used in"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}], [{"text": ["Just a quick try, not optimized at all.", "But you should be able to add weapons and ranges or edit range modifiers at will."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n weapon_skills = ('rifle', 'pistol', 'big_gun', 'heavy_weapon', 'bow')\n\nranges = [  {'name': 'short', 'modifier': 0.6, }, \n            {'name': 'medium', 'modifier': 0.3, }, \n            {'name': 'long', 'modifier': 0.1, },  \n]\n\n\nclass Character():\n\n  def __init__(self, wskills=None):\n    self.weapon_skills = {}\n    self.base_hit = {}\n    for weapon in weapon_skills:\n      self.weapon_skills[weapon] = 0\n      self.base_hit[weapon] = self.calcBaseHit(0)\n    if wskills != None:\n      for weapon in wskills:\n        self.weapon_skills[weapon] = wskills[weapon]\n        self.base_hit[weapon] = self.calcBaseHit(wskills[weapon])\n\n  def calcBaseHit(self, wskill):\n    ret = []\n    for rng in ranges:\n      ret.append(wskill * rng['modifier'])\n    return ret\n\n\ndef printWeaponSkills(charcter):\n  for weapon in sorted(charcter.weapon_skills):\n    base_hit_string = ' / '.join(str(x) for x in charcter.base_hit[weapon])\n    print '%12s %d: %s' % (weapon, charcter.weapon_skills[weapon], base_hit_string)\n  print\n\nprintWeaponSkills(Character())\nprintWeaponSkills(Character({'rifle': 3, 'pistol':5, 'big_gun':2, 'heavy_weapon':1}))\n</code>\n</pre>\n", "senID": 1}], [{"text": ["I would have a class for the character's attributes (so you don't have heaps of things in the character class) and a class for a weapon's attributes:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n class WeaponAttribute(object):\n\n    short_mod = 0.6\n    med_mod = 0.3\n    long_mod = 0.1\n\n    def __init__(self, base):\n        self.base = base\n\n    @property\n    def short(self):\n        return self.base * self.short_mod\n\n    @property\n    def med(self):\n        return self.base * self.med_mod\n\n    @property\n    def long(self):\n        return self.base * self.long_mod\n\n\nclass CharacterAttributes(object):\n\n    def __init__(self, attributes):\n        for weapon, base in attributes.items():\n            setattr(self, weapon, WeaponAttribute(base))\n</code>\n</pre>\n", "senID": 1}, {"text": ["Have a CharacterAttributes object in the character class and use it like this:"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "CharacterAttributes", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n # Initialise\nself.charAttribs = CharacterAttributes(self.skill_dict)\n# Get some values\nprint self.charAttribs.CRM.short\nprint self.charAttribs.PST.med\nprint self.charAttribs.LCG.long\n</code>\n</pre>\n", "senID": 3}]]