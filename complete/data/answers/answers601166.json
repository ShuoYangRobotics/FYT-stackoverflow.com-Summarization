[[{"text": ["Try with version 3.0.7a as \u0141ukasz suggested.", "BeautifulSoup 3.1 was designed to be compatible with Python 3.0 so they had to change the parser from SGMLParser to HTMLParser which seems more vulnerable to bad HTML."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "\u0141ukasz", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://stackoverflow.com/questions/601166/issues-with-beautifulsoup-parsing/601636#601636"}]}, {"text": ["From the changelog for BeautifulSoup 3.1:"], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "changelog for BeautifulSoup 3.1", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://www.crummy.com/software/BeautifulSoup/CHANGELOG.html"}]}, {"text": ["\"Beautiful Soup is now based on HTMLParser rather than SGMLParser, which is gone in Python 3.", "There's some bad HTML that SGMLParser handled but HTMLParser doesn't\""], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["BeautifulSoup isn't magic: if the incoming HTML is too horrible then it isn't going to work."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["In this case, the incoming HTML is exactly that: too broken for BeautifulSoup to figure out what to do.", "For instance it contains markup like:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["SCRIPT type=\"\"javascript\"\""], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["(Notice the double quoting."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["The BeautifulSoup docs contains a section what you can do if BeautifulSoup can't parse you markup.", "You'll need to investigate those alternatives."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["Try lxml.", "Despite its name, it is also for parsing and scraping HTML.", "It's much, much faster than BeautifulSoup, and it even handles \"broken\" HTML better than BeautifulSoup, so it might work better for you.", "It has a compatibility API for BeautifulSoup too if you don't want to learn the lxml API."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "lxml", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://codespeak.net/lxml/"}]}, {"text": ["Ian Blicking agrees."], "childNum": 1, "tag": "p", "senID": 1, "childList": [{"text": "Ian Blicking agrees", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://blog.ianbicking.org/2008/12/10/lxml-an-underappreciated-web-scraping-library/"}]}, {"text": ["There's no reason to use BeautifulSoup anymore, unless you're on Google App Engine or something where anything not purely Python isn't allowed."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}], [{"text": ["I tested this script on BeautifulSoup version '3.0.7a' and it returns what appears to be correct output.", "I don't know what changed between '3.0.7a' and '3.1.0.1' but give it a try."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}], [{"code": "<pre>\n<code>\n import urllib\nfrom BeautifulSoup import BeautifulSoup\n\n&gt;&gt;&gt; page = urllib.urlopen('http://www.futureshop.ca/catalog/subclass.asp?catid=10607&amp;mfr=&amp;logon=&amp;langid=FR&amp;sort=0&amp;page=1')\n&gt;&gt;&gt; soup = BeautifulSoup(page)\n&gt;&gt;&gt; soup.prettify()\n</code>\n</pre>\n", "senID": 0}, {"text": ["In my case by executing the above statements, it returns the entire HTML page."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["I had problems parsing the following code too:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"code": "<pre>\n<code>\n &lt;script&gt;\n        function show_ads() {\n          document.write(\"&lt;div&gt;&lt;sc\"+\"ript type='text/javascript'src='http://pagead2.googlesyndication.com/pagead/show_ads.js'&gt;&lt;/scr\"+\"ipt&gt;&lt;/div&gt;\");\n        }\n&lt;/script&gt;\n</code>\n</pre>\n", "senID": 1}, {"text": ["HTMLParseError: bad end tag: u'', at line 26, column 127"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["Sam"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}], [{"text": ["Samj: If I get things like\nHTMLParser.HTMLParseError: bad end tag: u\"&lt;/scr' + 'ipt&gt;\"\nI just remove the culprit from markup before I serve it to BeautifulSoup and all is dandy:"], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "HTMLParser.HTMLParseError: bad end tag: u\"&lt;/scr' + 'ipt&gt;\"", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n html = urllib2.urlopen(url).read()\nhtml = html.replace(\"&lt;/scr' + 'ipt&gt;\",\"\")\nsoup = BeautifulSoup(html)\n</code>\n</pre>\n", "senID": 1}]]