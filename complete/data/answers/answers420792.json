[[{"text": ["So far, I have noticed two further issues:"], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"tag": "ul", "num": 1, "lis": [{"text": "String interning 'a' is 'a' is not guaranteed (and it is just an implementation fluke on CPython). This could be a serious problem, and really was in one of the libraries I was porting (Jinja2). Unit tests are (as always) your best friends!", "tag": "none", "senID": 1}]}, {"code": "<pre>\nJython 2.5b0 (trunk:5540, Oct 31 2008, 13:55:41)\n>>> 'a' is 'a'\nTrue\n>>> s = 'a'\n>>> 'a' is s\nFalse\n>>> 'a' == s   \nTrue\n>>> intern('a') is intern(s)\nTrue\n</pre>\n", "senID": 2}, {"text": ["Here is the same session on CPython:"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"code": "<pre>\nPython 2.5.2 (r252:60911, Oct  5 2008, 19:24:49)\n>>> 'a' is 'a'\nTrue\n>>> s = 'a'\n>>> 'a' is s\nTrue\n>>> 'a' == s\nTrue\n>>> intern('a') is intern(s)\nTrue\n</pre>\n", "senID": 4}, {"tag": "ul", "num": 1, "lis": [{"text": "os.spawn* functions are not implemented. Instead use subprocess.call. I was surprised really, as the implementation using subprocess.call would be easy, and I am sure they will accept patches.", "tag": "none", "senID": 5}]}, {"text": ["(I have been doing a similar thing as you, porting an app recently)"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}], [{"text": ["First off, I have to say the Jython implementation is very good.", "Most things \"just work\". "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["Here are a few things that I have encountered:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"tag": "ul", "num": 5, "lis": [{"text": ["C modules are not available, of course. "], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["open('file').read() doesn't automatically close the file.", "This has to do with the difference in the garbage collector.", "This can cause issues with too many open files.", "It's better to use the \"with open('file') as fp\" idiom."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["Setting the current working directory (using os.setcwd()) works for Python code, but not for Java code.", "It emulates the current working directory for everything file-related but can only do so for Jython."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["XML parsing will try to validate an external DTD if it's available.", "This can cause massive slowdowns in XML handling code because the parser will download the DTD over the network.", "I reported this issue, but so far it remains unfixed."], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "reported this issue", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://bugs.jython.org/issue1268"}]}, {"text": ["The __ del __ method is invoked very late in Jython code, not immediately after the last reference to the object is deleted."], "childNum": 0, "tag": "p", "senID": 6, "childList": []}]}, {"text": ["There is an old list of differences, but a recent list is not available."], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "old list of differences", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://jython.sourceforge.net/archive/21/docs/differences.html"}]}], [{"text": ["When I switched a project from CPython to Jython some time ago I realized a speed-down of up to 50x for time-critical sections.", "Because of that I stayed with CPython. "], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["However, that might have changed now with the current versions. "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}], [{"text": ["You might also want to research JPype.", "I'm not sure how mature it is compared to Jython, but it should allow CPython to access Java code."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "JPype", "tag": "a", "pos": 0, "childList": [], "childNum": 0, "href": "http://jpype.sourceforge.net/"}]}], [{"text": ["Recently, I worked on a project for a professor at my school with a group.", "Early on, it was decided that we would write the project in Python.", "We definitely should have used CPython.", "We wrote the program in Python and all of our unit tests eventually worked.", "Because most people already have Java installed on their computers, and not Python, we decided to just deploy it as a Jython jar.", "We therefore wrote the GUI with Swing, because that's included in Java's standard library."], "childNum": 0, "tag": "p", "senID": 0, "childList": []}, {"text": ["The first time I ran the program with Jython, it crashed immediately.", "For one, csv.reader's \".fieldnames\" always seemed to be None.", "Therefore I had to change several parts of our code to work around this."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["A different section of my code crashed as well, which worked fine with CPython.", "Jython accused me of referencing a variable before it was assigned anything (which drove me nuts and really wasn't the case).", "This is one example: ActiveState's Code Recipe's external sort"], "childNum": 1, "tag": "p", "senID": 2, "childList": [{"text": "ActiveState's Code Recipe's external sort", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://code.activestate.com/recipes/466302-sorting-big-files-the-python-24-way/"}]}, {"text": ["Worse yet, the performance was awful.", "Basically this code combined several CSV files, one of which was about 2 GB.", "In CPython, it ran in 8.5 minutes.", "In Jython, it ran in 25 minutes."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["These problems happened with 2.5.2rc2 (the latest at the time of writing this post)."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}], [{"text": ["I'm starting this as a wiki collected from the other answers and my experience.", "Feel free to edit and add stuff, but please try to stick to practical advice rather than a list of broken things.", "Here's an old list of differences from the Jython site."], "childNum": 1, "tag": "p", "senID": 0, "childList": [{"text": "old list of differences", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://jython.sourceforge.net/archive/21/docs/differences.html"}]}, {"text": ["Resource management"], "childNum": 0, "tag": "h2", "senID": 1, "childList": []}, {"text": ["Jython does not use reference counting, and so resources are released as they\nare garbage collected, which is much later then you'd see in the equivalent \nCPython program"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": ["open('file').read()"], "childNum": 0, "tag": "code", "senID": 3, "childList": []}, {"text": "The __ del __ method is invoked very late in Jython code, not immediately \nafter the last reference to the object is deleted.", "tag": "none", "senID": 4}]}, {"text": ["MySQL Integration"], "childNum": 0, "tag": "h2", "senID": 5, "childList": []}, {"text": ["mysqldb is a c module, and therefore will not work in jython.", "Instead, you \nshould use com.ziclix.python.sql.zxJDBC, which comes bundled with Jython."], "childNum": 2, "tag": "p", "senID": 6, "childList": [{"text": "mysqldb", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "com.ziclix.python.sql.zxJDBC", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Replace the following MySQLdb code:"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n connection = MySQLdb.connect(host, user, passwd, db, use_unicode=True, chatset='utf8')\n</code>\n</pre>\n", "senID": 8}, {"text": ["With:"], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"code": "<pre>\n<code>\n url = \"jdbc:mysql://%s/%s?useUnicode=true&amp;characterEncoding=UTF-8&amp;zeroDateTimeBehavior=convertToNull\" % (host, db)\nconnections = zxJDBC.connect(url, user, passwd, \"com.mysql.jdbc.Driver\")\n</code>\n</pre>\n", "senID": 10}, {"text": ["You'll also need to replace all _mysql_exception with zxJDBC."], "childNum": 2, "tag": "p", "senID": 11, "childList": [{"text": "_mysql_exception", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "zxJDBC", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Finally, you'll need to replace the query placeholders from %s to ?."], "childNum": 2, "tag": "p", "senID": 12, "childList": [{"text": "%s", "childNum": 0, "tag": "code", "pos": 0, "childList": []}, {"text": "?", "childNum": 0, "tag": "code", "childList": []}]}, {"text": ["Unicode"], "childNum": 0, "tag": "h2", "senID": 13, "childList": []}, {"tag": "ul", "num": 1, "lis": [{"text": "You can't express illegal unicode characters in Jython. Trying something\nlike ", "tag": "none", "senID": 14}]}, {"text": ["Missing things"], "childNum": 0, "tag": "h2", "senID": 15, "childList": []}, {"tag": "ul", "num": 2, "lis": [{"text": "C modules are not available, of course.\n", "tag": "none", "senID": 16}, {"text": "os.spawn* functions are not implemented. Instead use subprocess.call.", "tag": "none", "senID": 17}]}, {"text": ["Performance"], "childNum": 0, "tag": "h2", "senID": 18, "childList": []}, {"tag": "ul", "num": 1, "lis": [{"text": "For most workloads, Jython will be much slower than CPython. Reports are \nanything between 3 to 50 times slower.", "tag": "none", "senID": 19}]}, {"text": ["Community"], "childNum": 0, "tag": "h2", "senID": 20, "childList": []}, {"text": ["The Jython project is still alive, but is not fast-moving.", "The \ndev mailing list\nhas about 20 messages a month, and there seem to be only about 2 developers \ncommiting code lately."], "childNum": 1, "tag": "p", "senID": 21, "childList": [{"text": "dev mailing list", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://sourceforge.net/mailarchive/forum.php?forum_name=jython-dev"}]}]]