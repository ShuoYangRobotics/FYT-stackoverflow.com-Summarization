[{"text": ["Populating a table with a large amount of data from a temporary table - MySQL"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["Ok I have a temporary MySQL table with 135,000 rows, from this temporary table I want to populate several other tables."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["First of all this is the structure of the temporary table"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["CREATE TEMPORARY TABLE TVTEMPTABLE (\nPROGTITLE TEXT, SUBTITLE TEXT,\nEPISODE TEXT, YR YEAR, DIRECTOR TEXT,\nPERFORMERS TEXT, PREMIERE BOOL, FILM BOOL, RPEAT BOOL,\nSUBTITLES BOOL, WIDESCREEN BOOL, NEWSERIES BOOL, DEAFSIGNED BOOL,\nBNW BOOL, STARRATING TINYINT, CERTIFICATE VARCHAR(5), GENRE VARCHAR(50),\nDESCRIPTION TEXT, CHOICE BOOL, PROGDATE DATE, STARTIME TIME, ENDTIME TIME,\nDURATION INT, CHANNELID INT NOT NULL)"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "CREATE TEMPORARY TABLE TVTEMPTABLE (\nPROGTITLE TEXT, SUBTITLE TEXT,\nEPISODE TEXT, YR YEAR, DIRECTOR TEXT,\nPERFORMERS TEXT, PREMIERE BOOL, FILM BOOL, RPEAT BOOL,\nSUBTITLES BOOL, WIDESCREEN BOOL, NEWSERIES BOOL, DEAFSIGNED BOOL,\nBNW BOOL, STARRATING TINYINT, CERTIFICATE VARCHAR(5), GENRE VARCHAR(50),\nDESCRIPTION TEXT, CHOICE BOOL, PROGDATE DATE, STARTIME TIME, ENDTIME TIME,\nDURATION INT, CHANNELID INT NOT NULL)", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["And this is the structure of one of the tables I plan to populate from this."], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["CREATE TABLE PROGRAMME (\nPROGRAMMEID INT NOT NULL AUTO_INCREMENT, GENREID INT NOT NULL, PROGTITLE VARCHAR(50), YR YEAR, DIRECTOR VARCHAR(50), PERFORMERS TEXT, FILM BOOL, WIDESCREEN BOOL, BNW BOOL, CERTIFICATE VARCHAR(5), DESCRIPTION TEXT, PRIMARY KEY(PROGRAMMEID), INDEX (GENREID), FOREIGN KEY (GENREID) REFERENCES GENRE(GENREID)\n) ENGINE=INNODB;"], "childNum": 1, "tag": "p", "senID": 5, "childList": [{"text": "CREATE TABLE PROGRAMME (\nPROGRAMMEID INT NOT NULL AUTO_INCREMENT, GENREID INT NOT NULL, PROGTITLE VARCHAR(50), YR YEAR, DIRECTOR VARCHAR(50), PERFORMERS TEXT, FILM BOOL, WIDESCREEN BOOL, BNW BOOL, CERTIFICATE VARCHAR(5), DESCRIPTION TEXT, PRIMARY KEY(PROGRAMMEID), INDEX (GENREID), FOREIGN KEY (GENREID) REFERENCES GENRE(GENREID)\n) ENGINE=INNODB;", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["And this is how I do my insert to the programme table"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"text": ["INSERT INTO PROGRAMME (\nGENREID, PROGTITLE, YR, DIRECTOR, PERFORMERS, FILM, WIDESCREEN, BNW, CERTIFICATE, DESCRIPTION) SELECT G.GENREID, T.PROGTITLE, T.YR, T.DIRECTOR, T.PERFORMERS, T.FILM, T.WIDESCREEN, T.BNW, T.CERTIFICATE, T.DESCRIPTION FROM TVTEMPTABLE T,GENRE G WHERE G.GENRENAME = T.GENRE AND NOT EXISTS (\nSELECT * FROM PROGRAMME P WHERE P.PROGTITLE = T.PROGTITLE )"], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "INSERT INTO PROGRAMME (\nGENREID, PROGTITLE, YR, DIRECTOR, PERFORMERS, FILM, WIDESCREEN, BNW, CERTIFICATE, DESCRIPTION) SELECT G.GENREID, T.PROGTITLE, T.YR, T.DIRECTOR, T.PERFORMERS, T.FILM, T.WIDESCREEN, T.BNW, T.CERTIFICATE, T.DESCRIPTION FROM TVTEMPTABLE T,GENRE G WHERE G.GENRENAME = T.GENRE AND NOT EXISTS (\nSELECT * FROM PROGRAMME P WHERE P.PROGTITLE = T.PROGTITLE )", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["This is however taking a very very long time to do, how should I approach this?"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["Thanks,\nPaul"], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"text": ["Ok thanks guys still having a few issues with this I'm trying the left join example, I've found however that if the table I'm inserting into is empty to begin with though, then it inserts duplicates.", "Here's a simple example"], "childNum": 0, "tag": "p", "senID": 10, "childList": []}, {"code": "<pre>\n<code>\n CREATE TEMPORARY TABLE TEMP(\n    GENRENAME TEXT);\n\nCREATE TABLE GENRE(\n    GENREID INT NOT NULL AUTO_INCREMENT,\n    GENRENAME TEXT, PRIMARY KEY(GENREID)\n) ENGINE=INNODB;\n\nINSERT INTO TEMP(\n    GENRENAME)\nVALUES(\"news\");\n\nINSERT INTO TEMP(\n    GENRENAME)\nVALUES(\"news\");\n</code>\n</pre>\n", "senID": 11}, {"text": ["This inserts the \"news\" genre into the temporary table twice.", "Now if I run this SQL command"], "childNum": 0, "tag": "p", "senID": 12, "childList": []}, {"code": "<pre>\n<code>\n INSERT INTO GENRE(\n    GENRENAME)\nSELECT\n    T.GENRENAME\nFROM\n    TEMP T\nLEFT JOIN\n    GENRE G ON G.GENRENAME=T.GENRENAME\nWHERE\n    G.GENRENAME IS NULL;\n</code>\n</pre>\n", "senID": 13}, {"text": ["It inserts \"news\" twice into the genre table which is wrong.", "If I run the same command again, it correctly doesn't insert any new rows."], "childNum": 0, "tag": "p", "senID": 14, "childList": []}]