[{"text": ["Optimizing mean in python"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["I have a function which updates the centroid (mean) in a K-means algoritm.", "I ran a profiler and noticed that this function uses a lot of computing time."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["It looks like:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n def updateCentroid(self, label):\n    X=[]; Y=[]\n    for point in self.clusters[label].points:\n        X.append(point.x)\n        Y.append(point.y)\n    self.clusters[label].centroid.x = numpy.mean(X)\n    self.clusters[label].centroid.y = numpy.mean(Y)\n</code>\n</pre>\n", "senID": 3}, {"text": ["So I ponder, is there a more efficient way to calculate the mean of these points?", "If not, is there a more elegant way to formulate it?", ";)"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["EDIT:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["Thanks for all great responses!", "I was thinking that perhaps I can calculate the mean cumulativly, using something like:\n"], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "", "childNum": 0, "tag": "img", "pos": 0, "childList": []}]}, {"text": ["where x_bar(t) is the new mean and x_bar(t-1) is the old mean."], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"text": ["Which would result in a function similar to this:"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"code": "<pre>\n<code>\n def updateCentroid(self, label):\n    cluster = self.clusters[label]\n    n = len(cluster.points)\n    cluster.centroid.x *= (n-1) / n\n    cluster.centroid.x += cluster.points[n-1].x / n\n    cluster.centroid.y *= (n-1) / n\n    cluster.centroid.y += cluster.points[n-1].y / n\n</code>\n</pre>\n", "senID": 9}, {"text": ["Its not really working but do you think this could work with some tweeking?"], "childNum": 0, "tag": "p", "senID": 10, "childList": []}]