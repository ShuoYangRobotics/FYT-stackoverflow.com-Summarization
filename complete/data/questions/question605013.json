[{"text": ["python: how to send packets in multi thread and then the thread kill itself"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["I have a question.", "I'd like to send a continuous streams of byte to some host for certain amount of time (let's say 1 minute) using python. "], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Here is my code so far:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n #! /usr/bin/env python                                                          \n\nimport socket\nimport thread\nimport time\n\nIP = \"192.168.0.2\"\nPADDING = \"a\" * 1000 #assume the MTU is slighly above 1000\nDATA = PADDING + \"this is sentence number = \"\nPORT = 14444\nkilled = False\ntest_time = 60 #60 seconds of testing\n\ndef send_data():\n  s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)\n  s.connect((IP, PORT))\n  count = 1\n  starttime = time.clock()\n  while elapsed &lt; test_time:\n    sent = s.send(DATA + str(count) + \"\\n\")\n    if sent == 0: break # assume that if nothing is sent -&gt; connection died\n    count = count+1\n    elapsed = time.clock() - starttime\n    if killed:\n      break\n  s.close()\n  print str(count) + \" has been sent\"\n\nprint \"to quit type quit\"\nthread.start_new_thread(send_data, ())\n\nwhile True:\n  var = raw_input(\"Enter something: \")\n  if var == \"quit\":\n    killed = True\n</code>\n</pre>\n", "senID": 3}, {"text": ["Few question, is there a better way to let a thread die after 60 seconds other than polling the time.clock every time?", "When I run this program, it sends the bytes correctly but when I typed quit the other thread won't die, even though I set the var killed = True.", "I wonder why is that?", "the scope of var Killed should reach the other thread right?"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["Thanks"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}]