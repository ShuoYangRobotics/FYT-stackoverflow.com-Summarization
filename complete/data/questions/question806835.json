[{"text": ["Django: Redirect to previous page after login"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["I'm trying to build a simple website with login functionality very similar to the one here on SO.", "The user should be able to browse the site as an anonymous user and there will be a login link on every page.", "When clicking on the login link the user will be taken to the login form.", "After a succesfull login the user should be taken back to the page from where he clicked the login link in the first place.", "I'm guessing that I have to somehow pass the url of the current page to the view that handles the login form but I can't really get it to work.", "Maybe you guys could help me."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["Thanks,"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["joerg"], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"text": ["EDIT:\nI figured it out.", "I linked to the login form by passing the current page as a GET parameter and then used 'next' to redirect to that page.", "Thanks!"], "childNum": 0, "tag": "p", "senID": 4, "childList": []}, {"text": ["EDIT 2:\nMy explanation did not seem to be clear so as requested here is my code:\nLets say we are on a page foo.html and we are not logged in.", "Now we would like to have a link on foo.html that links to login.html.", "There we can login and are then redirected back to foo.html.", "The link on foo.html looks like this:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n &lt;a href='/login/?next={{ request.path }}'&gt;Login&lt;/a&gt;\n</code>\n</pre>\n", "senID": 6}, {"text": ["Now I wrote a custom login view that looks somewhat like this:"], "childNum": 0, "tag": "p", "senID": 7, "childList": []}, {"code": "<pre>\n<code>\n def login_view(request):\n   redirect_to = request.REQUEST.get('next', '')\n   if request.method=='POST':\n      #create login form...\n      if valid login credentials have been entered:\n         return HttpResponseRedirect(redirect_to)  \n   #...\n   return render_to_response('login.html', locals())\n</code>\n</pre>\n", "senID": 8}, {"text": ["And the important line in login.html:"], "childNum": 0, "tag": "p", "senID": 9, "childList": []}, {"code": "<pre>\n<code>\n &lt;form method=\"post\" action=\"./?next={{ redirect_to }}\"&gt;\n</code>\n</pre>\n", "senID": 10}, {"text": ["So yeah thats pretty much it, hope that makes it clear."], "childNum": 0, "tag": "p", "senID": 11, "childList": []}]