[{"text": ["python, subprocess: reading output from subprocess"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["I have following script:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"code": "<pre>\n<code>\n #!/usr/bin/python\n\nwhile True:\n    x = raw_input()\n    print x[::-1]\n</code>\n</pre>\n", "senID": 2}, {"text": ["I am calling it from ipython:"], "childNum": 1, "tag": "p", "senID": 3, "childList": [{"text": "ipython", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n In [5]: p = Popen('./script.py', stdin=PIPE)\n\nIn [6]: p.stdin.write('abc\\n')\ncba\n</code>\n</pre>\n", "senID": 4}, {"text": ["and it works fine."], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"text": ["However, when I do this:"], "childNum": 0, "tag": "p", "senID": 6, "childList": []}, {"code": "<pre>\n<code>\n In [7]: p = Popen('./script.py', stdin=PIPE, stdout=PIPE)\n\nIn [8]: p.stdin.write('abc\\n')\n\nIn [9]: p.stdout.read()\n</code>\n</pre>\n", "senID": 7}, {"text": ["the interpreter hangs.", "What am I doing wrong?", "I would like to be able to both write and read from another process multiple times, to pass some tasks to this process.", "What do I need to do differently?"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}, {"text": ["EDIT 1"], "childNum": 1, "tag": "p", "senID": 9, "childList": [{"text": "EDIT 1", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["If I use communicate, I get this:"], "childNum": 1, "tag": "p", "senID": 10, "childList": [{"text": "communicate", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"code": "<pre>\n<code>\n In [7]: p = Popen('./script.py', stdin=PIPE, stdout=PIPE)\n\nIn [8]: p.communicate('abc\\n')\nTraceback (most recent call last):\n  File \"./script.py\", line 4, in &lt;module&gt;\n    x = raw_input()\nEOFError: EOF when reading a line\nOut[8]: ('cba\\n', None)\n</code>\n</pre>\n", "senID": 11}, {"text": ["EDIT 2"], "childNum": 1, "tag": "p", "senID": 12, "childList": [{"text": "EDIT 2", "childNum": 0, "tag": "strong", "pos": 0, "childList": []}]}, {"text": ["I tried flushing:"], "childNum": 0, "tag": "p", "senID": 13, "childList": []}, {"code": "<pre>\n<code>\n #!/usr/bin/python\n\nimport sys\n\nwhile True:\n        x = raw_input()\n        print x[::-1]\n        sys.stdout.flush()\n</code>\n</pre>\n", "senID": 14}, {"text": ["and here:"], "childNum": 0, "tag": "p", "senID": 15, "childList": []}, {"code": "<pre>\n<code>\n In [5]: from subprocess import PIPE, Popen\n\nIn [6]: p = Popen('./script.py', stdin=PIPE, stdout=PIPE)\n\nIn [7]: p.stdin.write('abc')\n\nIn [8]: p.stdin.flush()\n\nIn [9]: p.stdout.read()\n</code>\n</pre>\n", "senID": 16}, {"text": ["but it hangs again."], "childNum": 0, "tag": "p", "senID": 17, "childList": []}]