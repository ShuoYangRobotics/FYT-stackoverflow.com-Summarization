[{"text": ["Using crontab with django"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["I need to create a function for sending newsletters everyday from crontab.", "I've found two ways of doing this on the internet :"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["First - file placed in the django project folder:"], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"code": "<pre>\n<code>\n #! /usr/bin/env python\nimport sys\nimport os\n\nfrom django.core.management import setup_environ\nimport settings\nsetup_environ(settings)\n\nfrom django.core.mail import send_mail\nfrom project.newsletter.models import Newsletter, Address\n\ndef main(argv=None):\n    if argv is None:\n        argv = sys.argv\n\n    newsletters = Newsletter.objects.filter(sent=False)\n    message = 'Your newsletter.'\n\n    adr = Address.objects.all()\n    for a in adr:\n        for n in newsletters:\n            send_mail('System report',message, a ,['user@example.com'])\n\nif __name__ == '__main__':\n    main()\n</code>\n</pre>\n", "senID": 3}, {"text": ["I'm not sure if it will work and I'm not sure how to run it.", "Let's say it's called run.py, so should I call it in cron with 0 0 * * * python /path/to/project/run.py ?"], "childNum": 1, "tag": "p", "senID": 4, "childList": [{"text": "0 0 * * * python /path/to/project/run.py", "childNum": 0, "tag": "code", "pos": 1, "childList": []}]}, {"text": ["Second solution - create my send function anywhere (just like a normal django function), and then create a run.py script :"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n import sys\nimport os\n\nos.environ['DJANGO_SETTINGS_MODULE'] = 'settings'\n\nmodule_name = sys.argv[1]\nfunction_name = ' '.join(sys.argv[2:])\n\nexec('import %s' % module_name)\nexec('%s.%s' % (module_name, function_name))\n</code>\n</pre>\n", "senID": 6}, {"text": ["And then in cron call : 0 0 * * * python /path/to/project/run.py newsletter.views daily_job()"], "childNum": 1, "tag": "p", "senID": 7, "childList": [{"text": "0 0 * * * python /path/to/project/run.py newsletter.views daily_job()", "childNum": 0, "tag": "code", "pos": 0, "childList": []}]}, {"text": ["Which method will work, or which is better ?"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}]