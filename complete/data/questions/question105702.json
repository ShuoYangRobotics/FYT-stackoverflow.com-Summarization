[{"text": ["Making a beta code for a public django site"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["I'm about to put a beta version of the site I'm working on up on the web.", "It needs to have a beta code to restrict access.", "The site is written in django."], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"text": ["I don't want to change the fundamental Auth system to accommodate a beta code, and I don't care particularly that the security of the beta code is iron-clad, just that it's a significant stumbling block."], "childNum": 0, "tag": "p", "senID": 2, "childList": []}, {"text": ["How should I do this?", "It's a fairly large project so adding code to every view is far from ideal."], "childNum": 0, "tag": "p", "senID": 3, "childList": []}, {"tag": "hr", "senID": 4}, {"text": ["That solution works well.", "The Middleware Class I ended up with this this:"], "childNum": 0, "tag": "p", "senID": 5, "childList": []}, {"code": "<pre>\n<code>\n from django.http import HttpResponseRedirect\n\nclass BetaMiddleware(object):\n    \"\"\"\n    Require beta code session key in order to view any page.\n    \"\"\"\n    def process_request(self, request):\n        if request.path != '/beta/' and not request.session.get('in_beta'):\n            return HttpResponseRedirect('%s?next=%s' % ('/beta/', request.path))\n</code>\n</pre>\n", "senID": 6}]