[{"text": ["python non-privileged ICMP"], "childNum": 0, "tag": "h2", "senID": 0, "childList": []}, {"text": ["While trying to figure out the best method to ping (ICMP) something from python, I came across these questions:"], "childNum": 0, "tag": "p", "senID": 1, "childList": []}, {"tag": "ul", "num": 3, "lis": [{"text": ["How can I perform a ping or traceroute in python, accessing the output as it is produced?"], "childNum": 0, "tag": "a", "senID": 2, "childList": []}, {"text": ["ping a site in python"], "childNum": 0, "tag": "a", "senID": 3, "childList": []}, {"text": ["How can I perform a ping or traceroute using native python?"], "childNum": 0, "tag": "a", "senID": 4, "childList": []}]}, {"text": ["The answers generally boil down to \"use this third party module with root privileges\" or \"use the system's ping command and parse the output\".", "Of the native methods, icmplib and M. Cowles and J. Diemer's ping.py explicitly mention the need for root privileges, as does the scapy manual."], "childNum": 4, "tag": "p", "senID": 5, "childList": [{"text": "icmplib", "tag": "a", "pos": 1, "childList": [], "childNum": 0, "href": "http://code.activestate.com/recipes/409689/"}, {"href": "http://svn.pylucid.net/pylucid/CodeSnippets/ping.py", "text": "M. Cowles and J. Diemer's ping.py", "childNum": 0, "tag": "a", "childList": []}, {"href": "http://www.secdev.org/projects/scapy/", "text": "scapy", "childNum": 0, "tag": "a", "childList": []}, {"href": "http://www.secdev.org/projects/scapy/doc/usage.html?highlight=Root%20privileges", "text": "manual", "childNum": 0, "tag": "a", "childList": []}]}, {"text": ["So from that front, natively sending ICMP pings without special privileges seems impossible.", "The system ping command does manage somehow, but its man page doesn't shed any light on how.", "The man page for icmp, on the other hand, seems to say it's possible: "], "childNum": 1, "tag": "p", "senID": 6, "childList": [{"text": "man page for icmp", "tag": "a", "pos": 2, "childList": [], "childNum": 0, "href": "http://www.manpagez.com/man/4/icmp/"}]}, {"code": "<pre>\nNon-privileged ICMP\n     ICMP sockets can be opened with the SOCK_DGRAM socket type without\n     requiring root privileges. The synopsis is the following:\n\n     socket(AF_INET, SOCK_DGRAM, IPPROTO_ICMP)\n\n     Datagram oriented ICMP sockets offer a subset of the functionality avail-\n     able to raw ICMP sockets. Only IMCP request messages of the following\n     types can be sent: ICMP_ECHO, ICMP_TSTAMP or ICMP_MASKREQ.\n</pre>\n", "senID": 7}, {"text": ["So it would seem that, at least according to icmp, it's allowed.", "So why is it that all the python tools are unable to do this?", "Are the python tools too general and expect any work on privileged sockets to be privileged?", "Would it be possible to write a ping function in C that can ping without root privileges, and extend python with this?", "Has anyone done this?", "Have I just misunderstood the problem?"], "childNum": 0, "tag": "p", "senID": 8, "childList": []}]