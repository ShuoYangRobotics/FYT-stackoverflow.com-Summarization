Question (ID-2311510): Python: Getting a machine's external IP address Looking for a better way to get a machines current external IP #...Below works, but would rather not rely on an outside site to gather the information ... I am restricted to using standard Python 2.5.1 libraries bundled with Mac OS X 10.5.x 

 import os
import urllib2

def check_in():

 fqn = os.uname()[1]
 ext_ip = urllib2.urlopen('http://whatismyip.org').read()
 print ("Asset: %s " % fqn, "Checking in from IP#: %s " % ext_ip) 
 
 Answers (Total-6): #0 If you are behind a router which obtains the external IP, I'm afraid you have no other option but to use external service like you do. If the router itself has some query interface, you can use it, but the solution it will be very environment specific and unreliable. 
 #1 If you think and external source is too unreliable, you could pool a few different services. For most ip lookup pages they require you to scrape html, but a few of them that have created lean pages for scripts like yours - also so they can reduce the hits on their sites: 

 
 automation.whatismyip.com/n09230945.asp 
 whatismyip.org 
 
 #2 If the machine is being a firewall then your solution is a very sensible one: the alternative being able to query the firewall which ends-up being very dependent on the type of firewall (if at all possible). 
 #3 as mentioned by others, you need to hit an external server to reliably get your external IP address. However, you don't need a complicated library to do it. Here's the solution I came up with: 

 import socket

def getExternalIP():
 sock = socket.socket(socket.AF_INET,socket.SOCK_STREAM)
 sock.connect(('google.com', 80))
 ip = sock.getsockname()[0]
 sock.close()
 return ip
 
 #4 Just as an alternative. Here's a script you can try out. 
 #5 As Sunny has suggested, its not possible in general to get external ip-address being inside a network without any help from external services. 
Have a look at the following tutorial which covers exactly the same thing. I guess it works for Python 2.5.X. 
 http://codetempo.com/programming/python/monitoring-ip-addresses-of-your-computer-start-up-script-on-linux-ubuntu 

 It says that tutorial is for Linux but works for other platforms with python too.